"use strict";var hh=Object.create;var Vr=Object.defineProperty;var ph=Object.getOwnPropertyDescriptor;var gh=Object.getOwnPropertyNames;var mh=Object.getPrototypeOf,vh=Object.prototype.hasOwnProperty;var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),yh=(t,e)=>{for(var n in e)Vr(t,n,{get:e[n],enumerable:!0})},bc=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of gh(e))!vh.call(t,i)&&i!==n&&Vr(t,i,{get:()=>e[i],enumerable:!(r=ph(e,i))||r.enumerable});return t};var on=(t,e,n)=>(n=t!=null?hh(mh(t)):{},bc(e||!t||!t.__esModule?Vr(n,"default",{value:t,enumerable:!0}):n,t)),Rh=t=>bc(Vr({},"__esModule",{value:!0}),t);var fr=E(($C,Pc)=>{var Ch="2.0.0",_h=Number.MAX_SAFE_INTEGER||9007199254740991,wh=16;Pc.exports={SEMVER_SPEC_VERSION:Ch,MAX_LENGTH:256,MAX_SAFE_INTEGER:_h,MAX_SAFE_COMPONENT_LENGTH:wh}});var hr=E((WC,Ec)=>{var Th=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Ec.exports=Th});var wn=E((sn,Dc)=>{var{MAX_SAFE_COMPONENT_LENGTH:io}=fr(),Sh=hr();sn=Dc.exports={};var bh=sn.re=[],A=sn.src=[],M=sn.t={},Ph=0,Q=(t,e,n)=>{let r=Ph++;Sh(r,e),M[t]=r,A[r]=e,bh[r]=new RegExp(e,n?"g":void 0)};Q("NUMERICIDENTIFIER","0|[1-9]\\d*");Q("NUMERICIDENTIFIERLOOSE","[0-9]+");Q("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Q("MAINVERSION",`(${A[M.NUMERICIDENTIFIER]})\\.(${A[M.NUMERICIDENTIFIER]})\\.(${A[M.NUMERICIDENTIFIER]})`);Q("MAINVERSIONLOOSE",`(${A[M.NUMERICIDENTIFIERLOOSE]})\\.(${A[M.NUMERICIDENTIFIERLOOSE]})\\.(${A[M.NUMERICIDENTIFIERLOOSE]})`);Q("PRERELEASEIDENTIFIER",`(?:${A[M.NUMERICIDENTIFIER]}|${A[M.NONNUMERICIDENTIFIER]})`);Q("PRERELEASEIDENTIFIERLOOSE",`(?:${A[M.NUMERICIDENTIFIERLOOSE]}|${A[M.NONNUMERICIDENTIFIER]})`);Q("PRERELEASE",`(?:-(${A[M.PRERELEASEIDENTIFIER]}(?:\\.${A[M.PRERELEASEIDENTIFIER]})*))`);Q("PRERELEASELOOSE",`(?:-?(${A[M.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${A[M.PRERELEASEIDENTIFIERLOOSE]})*))`);Q("BUILDIDENTIFIER","[0-9A-Za-z-]+");Q("BUILD",`(?:\\+(${A[M.BUILDIDENTIFIER]}(?:\\.${A[M.BUILDIDENTIFIER]})*))`);Q("FULLPLAIN",`v?${A[M.MAINVERSION]}${A[M.PRERELEASE]}?${A[M.BUILD]}?`);Q("FULL",`^${A[M.FULLPLAIN]}$`);Q("LOOSEPLAIN",`[v=\\s]*${A[M.MAINVERSIONLOOSE]}${A[M.PRERELEASELOOSE]}?${A[M.BUILD]}?`);Q("LOOSE",`^${A[M.LOOSEPLAIN]}$`);Q("GTLT","((?:<|>)?=?)");Q("XRANGEIDENTIFIERLOOSE",`${A[M.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Q("XRANGEIDENTIFIER",`${A[M.NUMERICIDENTIFIER]}|x|X|\\*`);Q("XRANGEPLAIN",`[v=\\s]*(${A[M.XRANGEIDENTIFIER]})(?:\\.(${A[M.XRANGEIDENTIFIER]})(?:\\.(${A[M.XRANGEIDENTIFIER]})(?:${A[M.PRERELEASE]})?${A[M.BUILD]}?)?)?`);Q("XRANGEPLAINLOOSE",`[v=\\s]*(${A[M.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[M.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[M.XRANGEIDENTIFIERLOOSE]})(?:${A[M.PRERELEASELOOSE]})?${A[M.BUILD]}?)?)?`);Q("XRANGE",`^${A[M.GTLT]}\\s*${A[M.XRANGEPLAIN]}$`);Q("XRANGELOOSE",`^${A[M.GTLT]}\\s*${A[M.XRANGEPLAINLOOSE]}$`);Q("COERCE",`(^|[^\\d])(\\d{1,${io}})(?:\\.(\\d{1,${io}}))?(?:\\.(\\d{1,${io}}))?(?:$|[^\\d])`);Q("COERCERTL",A[M.COERCE],!0);Q("LONETILDE","(?:~>?)");Q("TILDETRIM",`(\\s*)${A[M.LONETILDE]}\\s+`,!0);sn.tildeTrimReplace="$1~";Q("TILDE",`^${A[M.LONETILDE]}${A[M.XRANGEPLAIN]}$`);Q("TILDELOOSE",`^${A[M.LONETILDE]}${A[M.XRANGEPLAINLOOSE]}$`);Q("LONECARET","(?:\\^)");Q("CARETTRIM",`(\\s*)${A[M.LONECARET]}\\s+`,!0);sn.caretTrimReplace="$1^";Q("CARET",`^${A[M.LONECARET]}${A[M.XRANGEPLAIN]}$`);Q("CARETLOOSE",`^${A[M.LONECARET]}${A[M.XRANGEPLAINLOOSE]}$`);Q("COMPARATORLOOSE",`^${A[M.GTLT]}\\s*(${A[M.LOOSEPLAIN]})$|^$`);Q("COMPARATOR",`^${A[M.GTLT]}\\s*(${A[M.FULLPLAIN]})$|^$`);Q("COMPARATORTRIM",`(\\s*)${A[M.GTLT]}\\s*(${A[M.LOOSEPLAIN]}|${A[M.XRANGEPLAIN]})`,!0);sn.comparatorTrimReplace="$1$2$3";Q("HYPHENRANGE",`^\\s*(${A[M.XRANGEPLAIN]})\\s+-\\s+(${A[M.XRANGEPLAIN]})\\s*$`);Q("HYPHENRANGELOOSE",`^\\s*(${A[M.XRANGEPLAINLOOSE]})\\s+-\\s+(${A[M.XRANGEPLAINLOOSE]})\\s*$`);Q("STAR","(<|>)?=?\\s*\\*");Q("GTE0","^\\s*>=\\s*0.0.0\\s*$");Q("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var pr=E((HC,qc)=>{var Eh=["includePrerelease","loose","rtl"],Dh=t=>t?typeof t!="object"?{loose:!0}:Eh.filter(e=>t[e]).reduce((e,n)=>(e[n]=!0,e),{}):{};qc.exports=Dh});var Jr=E((KC,kc)=>{var Oc=/^[0-9]+$/,xc=(t,e)=>{let n=Oc.test(t),r=Oc.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},qh=(t,e)=>xc(e,t);kc.exports={compareIdentifiers:xc,rcompareIdentifiers:qh}});var He=E((zC,Lc)=>{var Qr=hr(),{MAX_LENGTH:Ic,MAX_SAFE_INTEGER:Yr}=fr(),{re:Nc,t:Fc}=wn(),Oh=pr(),{compareIdentifiers:gr}=Jr(),ot=class{constructor(e,n){if(n=Oh(n),e instanceof ot){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Ic)throw new TypeError(`version is longer than ${Ic} characters`);Qr("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?Nc[Fc.LOOSE]:Nc[Fc.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Yr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Yr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Yr||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Yr)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Qr("SemVer.compare",this.version,this.options,e),!(e instanceof ot)){if(typeof e=="string"&&e===this.version)return 0;e=new ot(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ot||(e=new ot(e,this.options)),gr(this.major,e.major)||gr(this.minor,e.minor)||gr(this.patch,e.patch)}comparePre(e){if(e instanceof ot||(e=new ot(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(Qr("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return gr(r,i)}while(++n)}compareBuild(e){e instanceof ot||(e=new ot(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(Qr("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return gr(r,i)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(this.prerelease[0]===n?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};Lc.exports=ot});var Tn=E((UC,$c)=>{var{MAX_LENGTH:xh}=fr(),{re:Ac,t:Mc}=wn(),jc=He(),kh=pr(),Ih=(t,e)=>{if(e=kh(e),t instanceof jc)return t;if(typeof t!="string"||t.length>xh||!(e.loose?Ac[Mc.LOOSE]:Ac[Mc.FULL]).test(t))return null;try{return new jc(t,e)}catch{return null}};$c.exports=Ih});var Hc=E((BC,Wc)=>{var Nh=Tn(),Fh=(t,e)=>{let n=Nh(t,e);return n?n.version:null};Wc.exports=Fh});var zc=E((GC,Kc)=>{var Lh=Tn(),Ah=(t,e)=>{let n=Lh(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};Kc.exports=Ah});var Bc=E((XC,Uc)=>{var Mh=He(),jh=(t,e,n,r)=>{typeof n=="string"&&(r=n,n=void 0);try{return new Mh(t,n).inc(e,r).version}catch{return null}};Uc.exports=jh});var pt=E((VC,Xc)=>{var Gc=He(),$h=(t,e,n)=>new Gc(t,n).compare(new Gc(e,n));Xc.exports=$h});var Zr=E((JC,Vc)=>{var Wh=pt(),Hh=(t,e,n)=>Wh(t,e,n)===0;Vc.exports=Hh});var Yc=E((QC,Qc)=>{var Jc=Tn(),Kh=Zr(),zh=(t,e)=>{if(Kh(t,e))return null;{let n=Jc(t),r=Jc(e),i=n.prerelease.length||r.prerelease.length,s=i?"pre":"",c=i?"prerelease":"";for(let f in n)if((f==="major"||f==="minor"||f==="patch")&&n[f]!==r[f])return s+f;return c}};Qc.exports=zh});var eu=E((YC,Zc)=>{var Uh=He(),Bh=(t,e)=>new Uh(t,e).major;Zc.exports=Bh});var nu=E((ZC,tu)=>{var Gh=He(),Xh=(t,e)=>new Gh(t,e).minor;tu.exports=Xh});var iu=E((e_,ru)=>{var Vh=He(),Jh=(t,e)=>new Vh(t,e).patch;ru.exports=Jh});var su=E((t_,ou)=>{var Qh=Tn(),Yh=(t,e)=>{let n=Qh(t,e);return n&&n.prerelease.length?n.prerelease:null};ou.exports=Yh});var cu=E((n_,au)=>{var Zh=pt(),ep=(t,e,n)=>Zh(e,t,n);au.exports=ep});var lu=E((r_,uu)=>{var tp=pt(),np=(t,e)=>tp(t,e,!0);uu.exports=np});var ei=E((i_,fu)=>{var du=He(),rp=(t,e,n)=>{let r=new du(t,n),i=new du(e,n);return r.compare(i)||r.compareBuild(i)};fu.exports=rp});var pu=E((o_,hu)=>{var ip=ei(),op=(t,e)=>t.sort((n,r)=>ip(n,r,e));hu.exports=op});var mu=E((s_,gu)=>{var sp=ei(),ap=(t,e)=>t.sort((n,r)=>sp(r,n,e));gu.exports=ap});var mr=E((a_,vu)=>{var cp=pt(),up=(t,e,n)=>cp(t,e,n)>0;vu.exports=up});var ti=E((c_,yu)=>{var lp=pt(),dp=(t,e,n)=>lp(t,e,n)<0;yu.exports=dp});var oo=E((u_,Ru)=>{var fp=pt(),hp=(t,e,n)=>fp(t,e,n)!==0;Ru.exports=hp});var ni=E((l_,Cu)=>{var pp=pt(),gp=(t,e,n)=>pp(t,e,n)>=0;Cu.exports=gp});var ri=E((d_,_u)=>{var mp=pt(),vp=(t,e,n)=>mp(t,e,n)<=0;_u.exports=vp});var so=E((f_,wu)=>{var yp=Zr(),Rp=oo(),Cp=mr(),_p=ni(),wp=ti(),Tp=ri(),Sp=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return yp(t,n,r);case"!=":return Rp(t,n,r);case">":return Cp(t,n,r);case">=":return _p(t,n,r);case"<":return wp(t,n,r);case"<=":return Tp(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};wu.exports=Sp});var Su=E((h_,Tu)=>{var bp=He(),Pp=Tn(),{re:ii,t:oi}=wn(),Ep=(t,e)=>{if(t instanceof bp)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(ii[oi.COERCE]);else{let r;for(;(r=ii[oi.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),ii[oi.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;ii[oi.COERCERTL].lastIndex=-1}return n===null?null:Pp(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)};Tu.exports=Ep});var Pu=E((p_,bu)=>{"use strict";bu.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Du=E((g_,Eu)=>{"use strict";Eu.exports=ne;ne.Node=Sn;ne.create=ne;function ne(t){var e=this;if(e instanceof ne||(e=new ne),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}ne.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};ne.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};ne.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};ne.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)qp(this,arguments[t]);return this.length};ne.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Op(this,arguments[t]);return this.length};ne.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};ne.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};ne.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};ne.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};ne.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};ne.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};ne.prototype.map=function(t,e){e=e||this;for(var n=new ne,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};ne.prototype.mapReverse=function(t,e){e=e||this;for(var n=new ne,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};ne.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};ne.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};ne.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};ne.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};ne.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ne;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};ne.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ne;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};ne.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var s=[],r=0;i&&r<e;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Dp(this,i,n[r]);return s};ne.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function Dp(t,e,n){var r=e===t.head?new Sn(n,null,e,t):new Sn(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function qp(t,e){t.tail=new Sn(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Op(t,e){t.head=new Sn(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Sn(t,e,n,r){if(!(this instanceof Sn))return new Sn(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Pu()(ne)}catch{}});var Iu=E((m_,ku)=>{"use strict";var xp=Du(),bn=Symbol("max"),Wt=Symbol("length"),zn=Symbol("lengthCalculator"),yr=Symbol("allowStale"),Pn=Symbol("maxAge"),$t=Symbol("dispose"),qu=Symbol("noDisposeOnSet"),Ie=Symbol("lruList"),wt=Symbol("cache"),xu=Symbol("updateAgeOnGet"),ao=()=>1,uo=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let n=this[bn]=e.max||1/0,r=e.length||ao;if(this[zn]=typeof r!="function"?ao:r,this[yr]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Pn]=e.maxAge||0,this[$t]=e.dispose,this[qu]=e.noDisposeOnSet||!1,this[xu]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[bn]=e||1/0,vr(this)}get max(){return this[bn]}set allowStale(e){this[yr]=!!e}get allowStale(){return this[yr]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Pn]=e,vr(this)}get maxAge(){return this[Pn]}set lengthCalculator(e){typeof e!="function"&&(e=ao),e!==this[zn]&&(this[zn]=e,this[Wt]=0,this[Ie].forEach(n=>{n.length=this[zn](n.value,n.key),this[Wt]+=n.length})),vr(this)}get lengthCalculator(){return this[zn]}get length(){return this[Wt]}get itemCount(){return this[Ie].length}rforEach(e,n){n=n||this;for(let r=this[Ie].tail;r!==null;){let i=r.prev;Ou(this,e,r,n),r=i}}forEach(e,n){n=n||this;for(let r=this[Ie].head;r!==null;){let i=r.next;Ou(this,e,r,n),r=i}}keys(){return this[Ie].toArray().map(e=>e.key)}values(){return this[Ie].toArray().map(e=>e.value)}reset(){this[$t]&&this[Ie]&&this[Ie].length&&this[Ie].forEach(e=>this[$t](e.key,e.value)),this[wt]=new Map,this[Ie]=new xp,this[Wt]=0}dump(){return this[Ie].map(e=>si(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Ie]}set(e,n,r){if(r=r||this[Pn],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,s=this[zn](n,e);if(this[wt].has(e)){if(s>this[bn])return Un(this,this[wt].get(e)),!1;let d=this[wt].get(e).value;return this[$t]&&(this[qu]||this[$t](e,d.value)),d.now=i,d.maxAge=r,d.value=n,this[Wt]+=s-d.length,d.length=s,this.get(e),vr(this),!0}let c=new lo(e,n,s,i,r);return c.length>this[bn]?(this[$t]&&this[$t](e,n),!1):(this[Wt]+=c.length,this[Ie].unshift(c),this[wt].set(e,this[Ie].head),vr(this),!0)}has(e){if(!this[wt].has(e))return!1;let n=this[wt].get(e).value;return!si(this,n)}get(e){return co(this,e,!0)}peek(e){return co(this,e,!1)}pop(){let e=this[Ie].tail;return e?(Un(this,e),e.value):null}del(e){Un(this,this[wt].get(e))}load(e){this.reset();let n=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let c=s-n;c>0&&this.set(i.k,i.v,c)}}}prune(){this[wt].forEach((e,n)=>co(this,n,!1))}},co=(t,e,n)=>{let r=t[wt].get(e);if(r){let i=r.value;if(si(t,i)){if(Un(t,r),!t[yr])return}else n&&(t[xu]&&(r.value.now=Date.now()),t[Ie].unshiftNode(r));return i.value}},si=(t,e)=>{if(!e||!e.maxAge&&!t[Pn])return!1;let n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[Pn]&&n>t[Pn]},vr=t=>{if(t[Wt]>t[bn])for(let e=t[Ie].tail;t[Wt]>t[bn]&&e!==null;){let n=e.prev;Un(t,e),e=n}},Un=(t,e)=>{if(e){let n=e.value;t[$t]&&t[$t](n.key,n.value),t[Wt]-=n.length,t[wt].delete(n.key),t[Ie].removeNode(e)}},lo=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}},Ou=(t,e,n,r)=>{let i=n.value;si(t,i)&&(Un(t,n),t[yr]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};ku.exports=uo});var gt=E((v_,Au)=>{var En=class{constructor(e,n){if(n=Ip(n),e instanceof En)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new En(e.raw,n);if(e instanceof fo)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!Fu(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Mp(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=Nu.get(r);if(i)return i;let s=this.options.loose,c=s?Ke[Me.HYPHENRANGELOOSE]:Ke[Me.HYPHENRANGE];e=e.replace(c,Xp(this.options.includePrerelease)),_e("hyphen replace",e),e=e.replace(Ke[Me.COMPARATORTRIM],Fp),_e("comparator trim",e,Ke[Me.COMPARATORTRIM]),e=e.replace(Ke[Me.TILDETRIM],Lp),e=e.replace(Ke[Me.CARETTRIM],Ap),e=e.split(/\s+/).join(" ");let f=s?Ke[Me.COMPARATORLOOSE]:Ke[Me.COMPARATOR],d=e.split(" ").map(T=>jp(T,this.options)).join(" ").split(/\s+/).map(T=>Gp(T,this.options)).filter(this.options.loose?T=>!!T.match(f):()=>!0).map(T=>new fo(T,this.options)),v=d.length,R=new Map;for(let T of d){if(Fu(T))return[T];R.set(T.value,T)}R.size>1&&R.has("")&&R.delete("");let w=[...R.values()];return Nu.set(r,w),w}intersects(e,n){if(!(e instanceof En))throw new TypeError("a Range is required");return this.set.some(r=>Lu(r,n)&&e.set.some(i=>Lu(i,n)&&r.every(s=>i.every(c=>s.intersects(c,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Np(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(Vp(this.set[n],e,this.options))return!0;return!1}};Au.exports=En;var kp=Iu(),Nu=new kp({max:1e3}),Ip=pr(),fo=Rr(),_e=hr(),Np=He(),{re:Ke,t:Me,comparatorTrimReplace:Fp,tildeTrimReplace:Lp,caretTrimReplace:Ap}=wn(),Fu=t=>t.value==="<0.0.0-0",Mp=t=>t.value==="",Lu=(t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(s=>i.intersects(s,e)),i=r.pop();return n},jp=(t,e)=>(_e("comp",t,e),t=Hp(t,e),_e("caret",t),t=$p(t,e),_e("tildes",t),t=zp(t,e),_e("xrange",t),t=Bp(t,e),_e("stars",t),t),Ve=t=>!t||t.toLowerCase()==="x"||t==="*",$p=(t,e)=>t.trim().split(/\s+/).map(n=>Wp(n,e)).join(" "),Wp=(t,e)=>{let n=e.loose?Ke[Me.TILDELOOSE]:Ke[Me.TILDE];return t.replace(n,(r,i,s,c,f)=>{_e("tilde",t,r,i,s,c,f);let d;return Ve(i)?d="":Ve(s)?d=`>=${i}.0.0 <${+i+1}.0.0-0`:Ve(c)?d=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:f?(_e("replaceTilde pr",f),d=`>=${i}.${s}.${c}-${f} <${i}.${+s+1}.0-0`):d=`>=${i}.${s}.${c} <${i}.${+s+1}.0-0`,_e("tilde return",d),d})},Hp=(t,e)=>t.trim().split(/\s+/).map(n=>Kp(n,e)).join(" "),Kp=(t,e)=>{_e("caret",t,e);let n=e.loose?Ke[Me.CARETLOOSE]:Ke[Me.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,s,c,f,d)=>{_e("caret",t,i,s,c,f,d);let v;return Ve(s)?v="":Ve(c)?v=`>=${s}.0.0${r} <${+s+1}.0.0-0`:Ve(f)?s==="0"?v=`>=${s}.${c}.0${r} <${s}.${+c+1}.0-0`:v=`>=${s}.${c}.0${r} <${+s+1}.0.0-0`:d?(_e("replaceCaret pr",d),s==="0"?c==="0"?v=`>=${s}.${c}.${f}-${d} <${s}.${c}.${+f+1}-0`:v=`>=${s}.${c}.${f}-${d} <${s}.${+c+1}.0-0`:v=`>=${s}.${c}.${f}-${d} <${+s+1}.0.0-0`):(_e("no pr"),s==="0"?c==="0"?v=`>=${s}.${c}.${f}${r} <${s}.${c}.${+f+1}-0`:v=`>=${s}.${c}.${f}${r} <${s}.${+c+1}.0-0`:v=`>=${s}.${c}.${f} <${+s+1}.0.0-0`),_e("caret return",v),v})},zp=(t,e)=>(_e("replaceXRanges",t,e),t.split(/\s+/).map(n=>Up(n,e)).join(" ")),Up=(t,e)=>{t=t.trim();let n=e.loose?Ke[Me.XRANGELOOSE]:Ke[Me.XRANGE];return t.replace(n,(r,i,s,c,f,d)=>{_e("xRange",t,r,i,s,c,f,d);let v=Ve(s),R=v||Ve(c),w=R||Ve(f),T=w;return i==="="&&T&&(i=""),d=e.includePrerelease?"-0":"",v?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&T?(R&&(c=0),f=0,i===">"?(i=">=",R?(s=+s+1,c=0,f=0):(c=+c+1,f=0)):i==="<="&&(i="<",R?s=+s+1:c=+c+1),i==="<"&&(d="-0"),r=`${i+s}.${c}.${f}${d}`):R?r=`>=${s}.0.0${d} <${+s+1}.0.0-0`:w&&(r=`>=${s}.${c}.0${d} <${s}.${+c+1}.0-0`),_e("xRange return",r),r})},Bp=(t,e)=>(_e("replaceStars",t,e),t.trim().replace(Ke[Me.STAR],"")),Gp=(t,e)=>(_e("replaceGTE0",t,e),t.trim().replace(Ke[e.includePrerelease?Me.GTE0PRE:Me.GTE0],"")),Xp=t=>(e,n,r,i,s,c,f,d,v,R,w,T,b)=>(Ve(r)?n="":Ve(i)?n=`>=${r}.0.0${t?"-0":""}`:Ve(s)?n=`>=${r}.${i}.0${t?"-0":""}`:c?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,Ve(v)?d="":Ve(R)?d=`<${+v+1}.0.0-0`:Ve(w)?d=`<${v}.${+R+1}.0-0`:T?d=`<=${v}.${R}.${w}-${T}`:t?d=`<${v}.${R}.${+w+1}-0`:d=`<=${d}`,`${n} ${d}`.trim()),Vp=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(_e(t[r].semver),t[r].semver!==fo.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Rr=E((y_,Hu)=>{var Cr=Symbol("SemVer ANY"),Bn=class{static get ANY(){return Cr}constructor(e,n){if(n=Jp(n),e instanceof Bn){if(e.loose===!!n.loose)return e;e=e.value}po("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===Cr?this.value="":this.value=this.operator+this.semver.version,po("comp",this)}parse(e){let n=this.options.loose?Mu[ju.COMPARATORLOOSE]:Mu[ju.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new $u(r[2],this.options.loose):this.semver=Cr}toString(){return this.value}test(e){if(po("Comparator.test",e,this.options.loose),this.semver===Cr||e===Cr)return!0;if(typeof e=="string")try{e=new $u(e,this.options)}catch{return!1}return ho(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof Bn))throw new TypeError("a Comparator is required");if((!n||typeof n!="object")&&(n={loose:!!n,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Wu(e.value,n).test(this.value);if(e.operator==="")return e.value===""?!0:new Wu(this.value,n).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,c=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),f=ho(this.semver,"<",e.semver,n)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),d=ho(this.semver,">",e.semver,n)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||s&&c||f||d}};Hu.exports=Bn;var Jp=pr(),{re:Mu,t:ju}=wn(),ho=so(),po=hr(),$u=He(),Wu=gt()});var _r=E((R_,Ku)=>{var Qp=gt(),Yp=(t,e,n)=>{try{e=new Qp(e,n)}catch{return!1}return e.test(t)};Ku.exports=Yp});var Uu=E((C_,zu)=>{var Zp=gt(),eg=(t,e)=>new Zp(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));zu.exports=eg});var Gu=E((__,Bu)=>{var tg=He(),ng=gt(),rg=(t,e,n)=>{let r=null,i=null,s=null;try{s=new ng(e,n)}catch{return null}return t.forEach(c=>{s.test(c)&&(!r||i.compare(c)===-1)&&(r=c,i=new tg(r,n))}),r};Bu.exports=rg});var Vu=E((w_,Xu)=>{var ig=He(),og=gt(),sg=(t,e,n)=>{let r=null,i=null,s=null;try{s=new og(e,n)}catch{return null}return t.forEach(c=>{s.test(c)&&(!r||i.compare(c)===1)&&(r=c,i=new ig(r,n))}),r};Xu.exports=sg});var Yu=E((T_,Qu)=>{var go=He(),ag=gt(),Ju=mr(),cg=(t,e)=>{t=new ag(t,e);let n=new go("0.0.0");if(t.test(n)||(n=new go("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let i=t.set[r],s=null;i.forEach(c=>{let f=new go(c.semver.version);switch(c.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!s||Ju(f,s))&&(s=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),s&&(!n||Ju(n,s))&&(n=s)}return n&&t.test(n)?n:null};Qu.exports=cg});var el=E((S_,Zu)=>{var ug=gt(),lg=(t,e)=>{try{return new ug(t,e).range||"*"}catch{return null}};Zu.exports=lg});var ai=E((b_,il)=>{var dg=He(),rl=Rr(),{ANY:fg}=rl,hg=gt(),pg=_r(),tl=mr(),nl=ti(),gg=ri(),mg=ni(),vg=(t,e,n,r)=>{t=new dg(t,r),e=new hg(e,r);let i,s,c,f,d;switch(n){case">":i=tl,s=gg,c=nl,f=">",d=">=";break;case"<":i=nl,s=mg,c=tl,f="<",d="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pg(t,e,r))return!1;for(let v=0;v<e.set.length;++v){let R=e.set[v],w=null,T=null;if(R.forEach(b=>{b.semver===fg&&(b=new rl(">=0.0.0")),w=w||b,T=T||b,i(b.semver,w.semver,r)?w=b:c(b.semver,T.semver,r)&&(T=b)}),w.operator===f||w.operator===d||(!T.operator||T.operator===f)&&s(t,T.semver))return!1;if(T.operator===d&&c(t,T.semver))return!1}return!0};il.exports=vg});var sl=E((P_,ol)=>{var yg=ai(),Rg=(t,e,n)=>yg(t,e,">",n);ol.exports=Rg});var cl=E((E_,al)=>{var Cg=ai(),_g=(t,e,n)=>Cg(t,e,"<",n);al.exports=_g});var dl=E((D_,ll)=>{var ul=gt(),wg=(t,e,n)=>(t=new ul(t,n),e=new ul(e,n),t.intersects(e));ll.exports=wg});var hl=E((q_,fl)=>{var Tg=_r(),Sg=pt();fl.exports=(t,e,n)=>{let r=[],i=null,s=null,c=t.sort((R,w)=>Sg(R,w,n));for(let R of c)Tg(R,e,n)?(s=R,i||(i=R)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);let f=[];for(let[R,w]of r)R===w?f.push(R):!w&&R===c[0]?f.push("*"):w?R===c[0]?f.push(`<=${w}`):f.push(`${R} - ${w}`):f.push(`>=${R}`);let d=f.join(" || "),v=typeof e.raw=="string"?e.raw:String(e);return d.length<v.length?d:e}});var yl=E((O_,vl)=>{var pl=gt(),ci=Rr(),{ANY:mo}=ci,wr=_r(),vo=pt(),bg=(t,e,n={})=>{if(t===e)return!0;t=new pl(t,n),e=new pl(e,n);let r=!1;e:for(let i of t.set){for(let s of e.set){let c=Pg(i,s,n);if(r=r||c!==null,c)continue e}if(r)return!1}return!0},Pg=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===mo){if(e.length===1&&e[0].semver===mo)return!0;n.includePrerelease?t=[new ci(">=0.0.0-0")]:t=[new ci(">=0.0.0")]}if(e.length===1&&e[0].semver===mo){if(n.includePrerelease)return!0;e=[new ci(">=0.0.0")]}let r=new Set,i,s;for(let b of t)b.operator===">"||b.operator===">="?i=gl(i,b,n):b.operator==="<"||b.operator==="<="?s=ml(s,b,n):r.add(b.semver);if(r.size>1)return null;let c;if(i&&s){if(c=vo(i.semver,s.semver,n),c>0)return null;if(c===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let b of r){if(i&&!wr(b,String(i),n)||s&&!wr(b,String(s),n))return null;for(let F of e)if(!wr(b,String(F),n))return!1;return!0}let f,d,v,R,w=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,T=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;w&&w.prerelease.length===1&&s.operator==="<"&&w.prerelease[0]===0&&(w=!1);for(let b of e){if(R=R||b.operator===">"||b.operator===">=",v=v||b.operator==="<"||b.operator==="<=",i){if(T&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===T.major&&b.semver.minor===T.minor&&b.semver.patch===T.patch&&(T=!1),b.operator===">"||b.operator===">="){if(f=gl(i,b,n),f===b&&f!==i)return!1}else if(i.operator===">="&&!wr(i.semver,String(b),n))return!1}if(s){if(w&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===w.major&&b.semver.minor===w.minor&&b.semver.patch===w.patch&&(w=!1),b.operator==="<"||b.operator==="<="){if(d=ml(s,b,n),d===b&&d!==s)return!1}else if(s.operator==="<="&&!wr(s.semver,String(b),n))return!1}if(!b.operator&&(s||i)&&c!==0)return!1}return!(i&&v&&!s&&c!==0||s&&R&&!i&&c!==0||T||w)},gl=(t,e,n)=>{if(!t)return e;let r=vo(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},ml=(t,e,n)=>{if(!t)return e;let r=vo(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};vl.exports=bg});var Cl=E((x_,Rl)=>{var yo=wn();Rl.exports={re:yo.re,src:yo.src,tokens:yo.t,SEMVER_SPEC_VERSION:fr().SEMVER_SPEC_VERSION,SemVer:He(),compareIdentifiers:Jr().compareIdentifiers,rcompareIdentifiers:Jr().rcompareIdentifiers,parse:Tn(),valid:Hc(),clean:zc(),inc:Bc(),diff:Yc(),major:eu(),minor:nu(),patch:iu(),prerelease:su(),compare:pt(),rcompare:cu(),compareLoose:lu(),compareBuild:ei(),sort:pu(),rsort:mu(),gt:mr(),lt:ti(),eq:Zr(),neq:oo(),gte:ni(),lte:ri(),cmp:so(),coerce:Su(),Comparator:Rr(),Range:gt(),satisfies:_r(),toComparators:Uu(),maxSatisfying:Gu(),minSatisfying:Vu(),minVersion:Yu(),validRange:el(),outside:ai(),gtr:sl(),ltr:cl(),intersects:dl(),simplifyRange:hl(),subset:yl()}});var an=E(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.asPromise=ve.thenable=ve.typedArray=ve.stringArray=ve.array=ve.func=ve.error=ve.number=ve.string=ve.boolean=void 0;function Eg(t){return t===!0||t===!1}ve.boolean=Eg;function _l(t){return typeof t=="string"||t instanceof String}ve.string=_l;function Dg(t){return typeof t=="number"||t instanceof Number}ve.number=Dg;function qg(t){return t instanceof Error}ve.error=qg;function wl(t){return typeof t=="function"}ve.func=wl;function Tl(t){return Array.isArray(t)}ve.array=Tl;function Og(t){return Tl(t)&&t.every(e=>_l(e))}ve.stringArray=Og;function xg(t,e){return Array.isArray(t)&&t.every(e)}ve.typedArray=xg;function Sl(t){return t&&wl(t.then)}ve.thenable=Sl;function kg(t){return t instanceof Promise?t:Sl(t)?new Promise((e,n)=>{t.then(r=>e(r),r=>n(r))}):Promise.resolve(t)}ve.asPromise=kg});var Ht=E(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});var Ro;function Co(){if(Ro===void 0)throw new Error("No runtime abstraction layer installed");return Ro}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Ro=n}t.install=e})(Co||(Co={}));_o.default=Co});var wo=E(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.Disposable=void 0;var Ig;(function(t){function e(n){return{dispose:n}}t.create=e})(Ig=Tr.Disposable||(Tr.Disposable={}))});var bl=E(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.AbstractMessageBuffer=void 0;var Ng=13,Fg=10,Lg=`\r
`,To=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let d=this._chunks[n];r=0;t:for(;r<d.length;){switch(d[r]){case Ng:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case Fg:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=d.byteLength,n++}if(e!==4)return;let s=this._read(i+r),c=new Map,f=this.toString(s,"ascii").split(Lg);if(f.length<2)return c;for(let d=0;d<f.length-2;d++){let v=f[d],R=v.indexOf(":");if(R===-1)throw new Error("Message header must separate key and value using :");let w=v.substr(0,R),T=v.substr(R+1).trim();c.set(w,T)}return c}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],c=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,c}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let c=s.slice(0,e);n.set(c,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return n}};ui.AbstractMessageBuffer=To});var Dl=E(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});var Ag=Ht(),Pl=require("util"),Dn=wo(),Mg=bl(),Gn=class extends Mg.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Gn.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new Pl.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};Gn.emptyBuffer=Buffer.allocUnsafe(0);var So=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Dn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Dn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Dn.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Dn.Disposable.create(()=>this.stream.off("data",e))}},bo=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Dn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Dn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Dn.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let s=c=>{c==null?r():i(c)};typeof e=="string"?this.stream.write(e,n,s):this.stream.write(e,s)})}end(){this.stream.end()}},El=Object.freeze({messageBuffer:Object.freeze({create:t=>new Gn(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Pl.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new So(t),asWritableStream:t=>new bo(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){return setTimeout(t,e,...n)},clearTimeout(t){clearTimeout(t)},setImmediate(t,...e){return setImmediate(t,...e)},clearImmediate(t){clearImmediate(t)}})});function Po(){return El}(function(t){function e(){Ag.default.install(El)}t.install=e})(Po||(Po={}));Eo.default=Po});var Xn=E(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.stringArray=ze.array=ze.func=ze.error=ze.number=ze.string=ze.boolean=void 0;function jg(t){return t===!0||t===!1}ze.boolean=jg;function ql(t){return typeof t=="string"||t instanceof String}ze.string=ql;function $g(t){return typeof t=="number"||t instanceof Number}ze.number=$g;function Wg(t){return t instanceof Error}ze.error=Wg;function Hg(t){return typeof t=="function"}ze.func=Hg;function Ol(t){return Array.isArray(t)}ze.array=Ol;function Kg(t){return Ol(t)&&t.every(e=>ql(e))}ze.stringArray=Kg});var Jo=E(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.isResponseMessage=j.isNotificationMessage=j.isRequestMessage=j.NotificationType9=j.NotificationType8=j.NotificationType7=j.NotificationType6=j.NotificationType5=j.NotificationType4=j.NotificationType3=j.NotificationType2=j.NotificationType1=j.NotificationType0=j.NotificationType=j.RequestType9=j.RequestType8=j.RequestType7=j.RequestType6=j.RequestType5=j.RequestType4=j.RequestType3=j.RequestType2=j.RequestType1=j.RequestType=j.RequestType0=j.AbstractMessageSignature=j.ParameterStructures=j.ResponseError=j.ErrorCodes=void 0;var qn=Xn(),xl;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=t.jsonrpcReservedErrorRangeStart,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=t.jsonrpcReservedErrorRangeEnd})(xl=j.ErrorCodes||(j.ErrorCodes={}));var Sr=class extends Error{constructor(e,n,r){super(n),this.code=qn.number(e)?e:xl.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,Sr.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};j.ResponseError=Sr;var Ne=class{constructor(e){this.kind=e}static is(e){return e===Ne.auto||e===Ne.byName||e===Ne.byPosition}toString(){return this.kind}};j.ParameterStructures=Ne;Ne.auto=new Ne("auto");Ne.byPosition=new Ne("byPosition");Ne.byName=new Ne("byName");var de=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return Ne.auto}};j.AbstractMessageSignature=de;var Do=class extends de{constructor(e){super(e,0)}};j.RequestType0=Do;var qo=class extends de{constructor(e,n=Ne.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};j.RequestType=qo;var Oo=class extends de{constructor(e,n=Ne.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};j.RequestType1=Oo;var xo=class extends de{constructor(e){super(e,2)}};j.RequestType2=xo;var ko=class extends de{constructor(e){super(e,3)}};j.RequestType3=ko;var Io=class extends de{constructor(e){super(e,4)}};j.RequestType4=Io;var No=class extends de{constructor(e){super(e,5)}};j.RequestType5=No;var Fo=class extends de{constructor(e){super(e,6)}};j.RequestType6=Fo;var Lo=class extends de{constructor(e){super(e,7)}};j.RequestType7=Lo;var Ao=class extends de{constructor(e){super(e,8)}};j.RequestType8=Ao;var Mo=class extends de{constructor(e){super(e,9)}};j.RequestType9=Mo;var jo=class extends de{constructor(e,n=Ne.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};j.NotificationType=jo;var $o=class extends de{constructor(e){super(e,0)}};j.NotificationType0=$o;var Wo=class extends de{constructor(e,n=Ne.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};j.NotificationType1=Wo;var Ho=class extends de{constructor(e){super(e,2)}};j.NotificationType2=Ho;var Ko=class extends de{constructor(e){super(e,3)}};j.NotificationType3=Ko;var zo=class extends de{constructor(e){super(e,4)}};j.NotificationType4=zo;var Uo=class extends de{constructor(e){super(e,5)}};j.NotificationType5=Uo;var Bo=class extends de{constructor(e){super(e,6)}};j.NotificationType6=Bo;var Go=class extends de{constructor(e){super(e,7)}};j.NotificationType7=Go;var Xo=class extends de{constructor(e){super(e,8)}};j.NotificationType8=Xo;var Vo=class extends de{constructor(e){super(e,9)}};j.NotificationType9=Vo;function zg(t){let e=t;return e&&qn.string(e.method)&&(qn.string(e.id)||qn.number(e.id))}j.isRequestMessage=zg;function Ug(t){let e=t;return e&&qn.string(e.method)&&t.id===void 0}j.isNotificationMessage=Ug;function Bg(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(qn.string(e.id)||qn.number(e.id)||e.id===null)}j.isResponseMessage=Bg});var Jn=E(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.Emitter=On.Event=void 0;var Gg=Ht(),Xg;(function(t){let e={dispose(){}};t.None=function(){return e}})(Xg=On.Event||(On.Event={}));var Qo=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,c=r.length;s<c;s++)try{n.push(r[s].apply(i[s],e))}catch(f){Gg.default().console.error(f)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Vn=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Qo),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=Vn._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};On.Emitter=Vn;Vn._noop=function(){}});var ts=E(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.CancellationTokenSource=xn.CancellationToken=void 0;var kl=Ht(),Vg=Xn(),Yo=Jn(),Zo;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Yo.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Yo.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Vg.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(Zo=xn.CancellationToken||(xn.CancellationToken={}));var Jg=Object.freeze(function(t,e){let n=kl.default().timer.setTimeout(t.bind(e),0);return{dispose(){kl.default().timer.clearTimeout(n)}}}),li=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Jg:(this._emitter||(this._emitter=new Yo.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},es=class{get token(){return this._token||(this._token=new li),this._token}cancel(){this._token?this._token.cancel():this._token=Zo.Cancelled}dispose(){this._token?this._token instanceof li&&this._token.dispose():this._token=Zo.None}};xn.CancellationTokenSource=es});var Il=E(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.ReadableStreamMessageReader=Kt.AbstractMessageReader=Kt.MessageReader=void 0;var di=Ht(),Qn=Xn(),ns=Jn(),Qg;(function(t){function e(n){let r=n;return r&&Qn.func(r.listen)&&Qn.func(r.dispose)&&Qn.func(r.onError)&&Qn.func(r.onClose)&&Qn.func(r.onPartialMessage)}t.is=e})(Qg=Kt.MessageReader||(Kt.MessageReader={}));var fi=class{constructor(){this.errorEmitter=new ns.Emitter,this.closeEmitter=new ns.Emitter,this.partialMessageEmitter=new ns.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Qn.string(e.message)?e.message:"unknown"}`)}};Kt.AbstractMessageReader=fi;var rs;(function(t){function e(n){var r;let i,s,c,f=new Map,d,v=new Map;if(n===void 0||typeof n=="string")i=n??"utf-8";else{if(i=(r=n.charset)!==null&&r!==void 0?r:"utf-8",n.contentDecoder!==void 0&&(c=n.contentDecoder,f.set(c.name,c)),n.contentDecoders!==void 0)for(let R of n.contentDecoders)f.set(R.name,R);if(n.contentTypeDecoder!==void 0&&(d=n.contentTypeDecoder,v.set(d.name,d)),n.contentTypeDecoders!==void 0)for(let R of n.contentTypeDecoders)v.set(R.name,R)}return d===void 0&&(d=di.default().applicationJson.decoder,v.set(d.name,d)),{charset:i,contentDecoder:c,contentDecoders:f,contentTypeDecoder:d,contentTypeDecoders:v}}t.fromOptions=e})(rs||(rs={}));var is=class extends fi{constructor(e,n){super(),this.readable=e,this.options=rs.fromOptions(n),this.buffer=di.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let c=parseInt(s);if(isNaN(c))throw new Error("Content-Length value must be a number.");this.nextMessageLength=c}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(di.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=di.default().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Kt.ReadableStreamMessageReader=is});var Nl=E(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.Semaphore=void 0;var Yg=Ht(),os=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||Yg.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};hi.Semaphore=os});var Ml=E(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.WriteableStreamMessageWriter=zt.AbstractMessageWriter=zt.MessageWriter=void 0;var Fl=Ht(),br=Xn(),Zg=Nl(),Ll=Jn(),em="Content-Length: ",Al=`\r
`,tm;(function(t){function e(n){let r=n;return r&&br.func(r.dispose)&&br.func(r.onClose)&&br.func(r.onError)&&br.func(r.write)}t.is=e})(tm=zt.MessageWriter||(zt.MessageWriter={}));var pi=class{constructor(){this.errorEmitter=new Ll.Emitter,this.closeEmitter=new Ll.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${br.string(e.message)?e.message:"unknown"}`)}};zt.AbstractMessageWriter=pi;var ss;(function(t){function e(n){var r,i;return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:Fl.default().applicationJson.encoder}:{charset:(r=n.charset)!==null&&r!==void 0?r:"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:(i=n.contentTypeEncoder)!==null&&i!==void 0?i:Fl.default().applicationJson.encoder}}t.fromOptions=e})(ss||(ss={}));var as=class extends pi{constructor(e,n){super(),this.writable=e,this.options=ss.fromOptions(n),this.errorCount=0,this.writeSemaphore=new Zg.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(em,r.byteLength.toString(),Al),i.push(Al),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};zt.WriteableStreamMessageWriter=as});var jl=E(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.LRUCache=Ut.LinkedMap=Ut.Touch=void 0;var Je;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Je=Ut.Touch||(Ut.Touch={}));var gi=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,n=Je.None){let r=this._map.get(e);if(r)return n!==Je.None&&this.touch(r,n),r.value}set(e,n,r=Je.None){let i=this._map.get(e);if(i)i.value=n,r!==Je.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Je.None:this.addItemLast(i);break;case Je.First:this.addItemFirst(i);break;case Je.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}values(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}entries(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Je.First&&n!==Je.Last)){if(n===Je.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Je.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Ut.LinkedMap=gi;var cs=class extends gi{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Je.AsNew){return super.get(e,n)}peek(e){return super.get(e,Je.None)}set(e,n){return super.set(e,n,Je.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Ut.LRUCache=cs});var zl=E(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.createMessageConnection=G.ConnectionOptions=G.CancellationStrategy=G.CancellationSenderStrategy=G.CancellationReceiverStrategy=G.ConnectionStrategy=G.ConnectionError=G.ConnectionErrors=G.LogTraceNotification=G.SetTraceNotification=G.TraceFormat=G.Trace=G.NullLogger=G.ProgressType=void 0;var $l=Ht(),Fe=Xn(),B=Jo(),Wl=jl(),Pr=Jn(),us=ts(),Er;(function(t){t.type=new B.NotificationType("$/cancelRequest")})(Er||(Er={}));var vi;(function(t){t.type=new B.NotificationType("$/progress")})(vi||(vi={}));var ls=class{constructor(){}};G.ProgressType=ls;var ds;(function(t){function e(n){return Fe.func(n)}t.is=e})(ds||(ds={}));G.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Se;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(Se=G.Trace||(G.Trace={}));(function(t){function e(r){if(!Fe.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(Se=G.Trace||(G.Trace={}));var Tt;(function(t){t.Text="text",t.JSON="json"})(Tt=G.TraceFormat||(G.TraceFormat={}));(function(t){function e(n){return n=n.toLowerCase(),n==="json"?t.JSON:t.Text}t.fromString=e})(Tt=G.TraceFormat||(G.TraceFormat={}));var Hl;(function(t){t.type=new B.NotificationType("$/setTrace")})(Hl=G.SetTraceNotification||(G.SetTraceNotification={}));var fs;(function(t){t.type=new B.NotificationType("$/logTrace")})(fs=G.LogTraceNotification||(G.LogTraceNotification={}));var mi;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(mi=G.ConnectionErrors||(G.ConnectionErrors={}));var cn=class extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,cn.prototype)}};G.ConnectionError=cn;var Kl;(function(t){function e(n){let r=n;return r&&Fe.func(r.cancelUndispatched)}t.is=e})(Kl=G.ConnectionStrategy||(G.ConnectionStrategy={}));var hs;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new us.CancellationTokenSource}});function e(n){let r=n;return r&&Fe.func(r.createCancellationTokenSource)}t.is=e})(hs=G.CancellationReceiverStrategy||(G.CancellationReceiverStrategy={}));var ps;(function(t){t.Message=Object.freeze({sendCancellation(n,r){n.sendNotification(Er.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Fe.func(r.sendCancellation)&&Fe.func(r.cleanup)}t.is=e})(ps=G.CancellationSenderStrategy||(G.CancellationSenderStrategy={}));var gs;(function(t){t.Message=Object.freeze({receiver:hs.Message,sender:ps.Message});function e(n){let r=n;return r&&hs.is(r.receiver)&&ps.is(r.sender)}t.is=e})(gs=G.CancellationStrategy||(G.CancellationStrategy={}));var nm;(function(t){function e(n){let r=n;return r&&(gs.is(r.cancellationStrategy)||Kl.is(r.connectionStrategy))}t.is=e})(nm=G.ConnectionOptions||(G.ConnectionOptions={}));var St;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(St||(St={}));function rm(t,e,n,r){let i=n!==void 0?n:G.NullLogger,s=0,c=0,f=0,d="2.0",v,R=Object.create(null),w,T=Object.create(null),b=new Map,F,N=new Wl.LinkedMap,z=Object.create(null),x=Object.create(null),k=Se.Off,O=Tt.Text,q,U=St.New,Te=new Pr.Emitter,De=new Pr.Emitter,qe=new Pr.Emitter,me=new Pr.Emitter,xe=new Pr.Emitter,ke=r&&r.cancellationStrategy?r.cancellationStrategy:gs.Message;function Ze(C){if(C===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+C.toString()}function Ge(C){return C===null?"res-unknown-"+(++f).toString():"res-"+C.toString()}function et(){return"not-"+(++c).toString()}function Xe(C,p){B.isRequestMessage(p)?C.set(Ze(p.id),p):B.isResponseMessage(p)?C.set(Ge(p.id),p):C.set(et(),p)}function Rt(C){}function le(){return U===St.Listening}function Ct(){return U===St.Closed}function Oe(){return U===St.Disposed}function it(){(U===St.New||U===St.Listening)&&(U=St.Closed,De.fire(void 0))}function ct(C){Te.fire([C,void 0,void 0])}function _t(C){Te.fire(C)}t.onClose(it),t.onError(ct),e.onClose(it),e.onError(_t);function Qt(){F||N.size===0||(F=$l.default().timer.setImmediate(()=>{F=void 0,Yt()}))}function Yt(){if(N.size===0)return;let C=N.shift();try{B.isRequestMessage(C)?Lt(C):B.isNotificationMessage(C)?xt(C):B.isResponseMessage(C)?Ot(C):At(C)}finally{Qt()}}let Ft=C=>{try{if(B.isNotificationMessage(C)&&C.method===Er.type.method){let p=Ze(C.params.id),l=N.get(p);if(B.isRequestMessage(l)){let g=r==null?void 0:r.connectionStrategy,_=g&&g.cancelUndispatched?g.cancelUndispatched(l,Rt):void 0;if(_&&(_.error!==void 0||_.result!==void 0)){N.delete(p),_.id=l.id,ut(_,C.method,Date.now()),e.write(_);return}}}Xe(N,C)}finally{Qt()}};function Lt(C){if(Oe())return;function p(S,I,W){let X={jsonrpc:d,id:C.id};S instanceof B.ResponseError?X.error=S.toJson():X.result=S===void 0?null:S,ut(X,I,W),e.write(X)}function l(S,I,W){let X={jsonrpc:d,id:C.id,error:S.toJson()};ut(X,I,W),e.write(X)}function g(S,I,W){S===void 0&&(S=null);let X={jsonrpc:d,id:C.id,result:S};ut(X,I,W),e.write(X)}en(C);let _=R[C.method],o,a;_&&(o=_.type,a=_.handler);let y=Date.now();if(a||v){let S=String(C.id),I=ke.receiver.createCancellationTokenSource(S);x[S]=I;try{let W;if(a)if(C.params===void 0){if(o!==void 0&&o.numberOfParams!==0){l(new B.ResponseError(B.ErrorCodes.InvalidParams,`Request ${C.method} defines ${o.numberOfParams} params but recevied none.`),C.method,y);return}W=a(I.token)}else if(Array.isArray(C.params)){if(o!==void 0&&o.parameterStructures===B.ParameterStructures.byName){l(new B.ResponseError(B.ErrorCodes.InvalidParams,`Request ${C.method} defines parameters by name but received parameters by position`),C.method,y);return}W=a(...C.params,I.token)}else{if(o!==void 0&&o.parameterStructures===B.ParameterStructures.byPosition){l(new B.ResponseError(B.ErrorCodes.InvalidParams,`Request ${C.method} defines parameters by position but received parameters by name`),C.method,y);return}W=a(C.params,I.token)}else v&&(W=v(C.method,C.params,I.token));let X=W;W?X.then?X.then(oe=>{delete x[S],p(oe,C.method,y)},oe=>{delete x[S],oe instanceof B.ResponseError?l(oe,C.method,y):oe&&Fe.string(oe.message)?l(new B.ResponseError(B.ErrorCodes.InternalError,`Request ${C.method} failed with message: ${oe.message}`),C.method,y):l(new B.ResponseError(B.ErrorCodes.InternalError,`Request ${C.method} failed unexpectedly without providing any details.`),C.method,y)}):(delete x[S],p(W,C.method,y)):(delete x[S],g(W,C.method,y))}catch(W){delete x[S],W instanceof B.ResponseError?p(W,C.method,y):W&&Fe.string(W.message)?l(new B.ResponseError(B.ErrorCodes.InternalError,`Request ${C.method} failed with message: ${W.message}`),C.method,y):l(new B.ResponseError(B.ErrorCodes.InternalError,`Request ${C.method} failed unexpectedly without providing any details.`),C.method,y)}}else l(new B.ResponseError(B.ErrorCodes.MethodNotFound,`Unhandled method ${C.method}`),C.method,y)}function Ot(C){if(!Oe())if(C.id===null)C.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(C.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let p=String(C.id),l=z[p];if(yn(C,l),l){delete z[p];try{if(C.error){let g=C.error;l.reject(new B.ResponseError(g.code,g.message,g.data))}else if(C.result!==void 0)l.resolve(C.result);else throw new Error("Should never happen.")}catch(g){g.message?i.error(`Response handler '${l.method}' failed with message: ${g.message}`):i.error(`Response handler '${l.method}' failed unexpectedly.`)}}}}function xt(C){if(Oe())return;let p,l;if(C.method===Er.type.method)l=g=>{let _=g.id,o=x[String(_)];o&&o.cancel()};else{let g=T[C.method];g&&(l=g.handler,p=g.type)}if(l||w)try{lt(C),l?C.params===void 0?(p!==void 0&&p.numberOfParams!==0&&p.parameterStructures!==B.ParameterStructures.byName&&i.error(`Notification ${C.method} defines ${p.numberOfParams} params but recevied none.`),l()):Array.isArray(C.params)?(p!==void 0&&(p.parameterStructures===B.ParameterStructures.byName&&i.error(`Notification ${C.method} defines parameters by name but received parameters by position`),p.numberOfParams!==C.params.length&&i.error(`Notification ${C.method} defines ${p.numberOfParams} params but received ${C.params.length} argumennts`)),l(...C.params)):(p!==void 0&&p.parameterStructures===B.ParameterStructures.byPosition&&i.error(`Notification ${C.method} defines parameters by position but received parameters by name`),l(C.params)):w&&w(C.method,C.params)}catch(g){g.message?i.error(`Notification handler '${C.method}' failed with message: ${g.message}`):i.error(`Notification handler '${C.method}' failed unexpectedly.`)}else qe.fire(C)}function At(C){if(!C){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(C,null,4)}`);let p=C;if(Fe.string(p.id)||Fe.number(p.id)){let l=String(p.id),g=z[l];g&&g.reject(new Error("The received response has neither a result nor an error property."))}}function Zt(C){if(!(k===Se.Off||!q))if(O===Tt.Text){let p;k===Se.Verbose&&C.params&&(p=`Params: ${JSON.stringify(C.params,null,4)}

`),q.log(`Sending request '${C.method} - (${C.id})'.`,p)}else ye("send-request",C)}function vn(C){if(!(k===Se.Off||!q))if(O===Tt.Text){let p;k===Se.Verbose&&(C.params?p=`Params: ${JSON.stringify(C.params,null,4)}

`:p=`No parameters provided.

`),q.log(`Sending notification '${C.method}'.`,p)}else ye("send-notification",C)}function ut(C,p,l){if(!(k===Se.Off||!q))if(O===Tt.Text){let g;k===Se.Verbose&&(C.error&&C.error.data?g=`Error data: ${JSON.stringify(C.error.data,null,4)}

`:C.result?g=`Result: ${JSON.stringify(C.result,null,4)}

`:C.error===void 0&&(g=`No result returned.

`)),q.log(`Sending response '${p} - (${C.id})'. Processing request took ${Date.now()-l}ms`,g)}else ye("send-response",C)}function en(C){if(!(k===Se.Off||!q))if(O===Tt.Text){let p;k===Se.Verbose&&C.params&&(p=`Params: ${JSON.stringify(C.params,null,4)}

`),q.log(`Received request '${C.method} - (${C.id})'.`,p)}else ye("receive-request",C)}function lt(C){if(!(k===Se.Off||!q||C.method===fs.type.method))if(O===Tt.Text){let p;k===Se.Verbose&&(C.params?p=`Params: ${JSON.stringify(C.params,null,4)}

`:p=`No parameters provided.

`),q.log(`Received notification '${C.method}'.`,p)}else ye("receive-notification",C)}function yn(C,p){if(!(k===Se.Off||!q))if(O===Tt.Text){let l;if(k===Se.Verbose&&(C.error&&C.error.data?l=`Error data: ${JSON.stringify(C.error.data,null,4)}

`:C.result?l=`Result: ${JSON.stringify(C.result,null,4)}

`:C.error===void 0&&(l=`No result returned.

`)),p){let g=C.error?` Request failed: ${C.error.message} (${C.error.code}).`:"";q.log(`Received response '${p.method} - (${C.id})' in ${Date.now()-p.timerStart}ms.${g}`,l)}else q.log(`Received response ${C.id} without active response promise.`,l)}else ye("receive-response",C)}function ye(C,p){if(!q||k===Se.Off)return;let l={isLSPMessage:!0,type:C,message:p,timestamp:Date.now()};q.log(l)}function tt(){if(Ct())throw new cn(mi.Closed,"Connection is closed.");if(Oe())throw new cn(mi.Disposed,"Connection is disposed.")}function tn(){if(le())throw new cn(mi.AlreadyListening,"Connection is already listening")}function Rn(){if(!le())throw new Error("Call listen() first.")}function dt(C){return C===void 0?null:C}function nn(C){if(C!==null)return C}function Mt(C){return C!=null&&!Array.isArray(C)&&typeof C=="object"}function ft(C,p){switch(C){case B.ParameterStructures.auto:return Mt(p)?nn(p):[dt(p)];case B.ParameterStructures.byName:if(!Mt(p))throw new Error("Recevied parameters by name but param is not an object literal.");return nn(p);case B.ParameterStructures.byPosition:return[dt(p)];default:throw new Error(`Unknown parameter structure ${C.toString()}`)}}function jt(C,p){let l,g=C.numberOfParams;switch(g){case 0:l=void 0;break;case 1:l=ft(C.parameterStructures,p[0]);break;default:l=[];for(let _=0;_<p.length&&_<g;_++)l.push(dt(p[_]));if(p.length<g)for(let _=p.length;_<g;_++)l.push(null);break}return l}let ht={sendNotification:(C,...p)=>{tt();let l,g;if(Fe.string(C)){l=C;let o=p[0],a=0,y=B.ParameterStructures.auto;B.ParameterStructures.is(o)&&(a=1,y=o);let S=p.length,I=S-a;switch(I){case 0:g=void 0;break;case 1:g=ft(y,p[a]);break;default:if(y===B.ParameterStructures.byName)throw new Error(`Recevied ${I} parameters for 'by Name' notification parameter structure.`);g=p.slice(a,S).map(W=>dt(W));break}}else{let o=p;l=C.method,g=jt(C,o)}let _={jsonrpc:d,method:l,params:g};vn(_),e.write(_)},onNotification:(C,p)=>{tt();let l;return Fe.func(C)?w=C:p&&(Fe.string(C)?(l=C,T[C]={type:void 0,handler:p}):(l=C.method,T[C.method]={type:C,handler:p})),{dispose:()=>{l!==void 0?delete T[l]:w=void 0}}},onProgress:(C,p,l)=>{if(b.has(p))throw new Error(`Progress handler for token ${p} already registered`);return b.set(p,l),{dispose:()=>{b.delete(p)}}},sendProgress:(C,p,l)=>{ht.sendNotification(vi.type,{token:p,value:l})},onUnhandledProgress:me.event,sendRequest:(C,...p)=>{tt(),Rn();let l,g,_;if(Fe.string(C)){l=C;let S=p[0],I=p[p.length-1],W=0,X=B.ParameterStructures.auto;B.ParameterStructures.is(S)&&(W=1,X=S);let oe=p.length;us.CancellationToken.is(I)&&(oe=oe-1,_=I);let Re=oe-W;switch(Re){case 0:g=void 0;break;case 1:g=ft(X,p[W]);break;default:if(X===B.ParameterStructures.byName)throw new Error(`Recevied ${Re} parameters for 'by Name' request parameter structure.`);g=p.slice(W,oe).map(Ce=>dt(Ce));break}}else{let S=p;l=C.method,g=jt(C,S);let I=C.numberOfParams;_=us.CancellationToken.is(S[I])?S[I]:void 0}let o=s++,a;return _&&(a=_.onCancellationRequested(()=>{ke.sender.sendCancellation(ht,o)})),new Promise((S,I)=>{let W={jsonrpc:d,id:o,method:l,params:g},X=Ce=>{S(Ce),ke.sender.cleanup(o),a==null||a.dispose()},oe=Ce=>{I(Ce),ke.sender.cleanup(o),a==null||a.dispose()},Re={method:l,timerStart:Date.now(),resolve:X,reject:oe};Zt(W);try{e.write(W)}catch(Ce){Re.reject(new B.ResponseError(B.ErrorCodes.MessageWriteError,Ce.message?Ce.message:"Unknown reason")),Re=null}Re&&(z[String(o)]=Re)})},onRequest:(C,p)=>{tt();let l=null;return ds.is(C)?(l=void 0,v=C):Fe.string(C)?(l=null,p!==void 0&&(l=C,R[C]={handler:p,type:void 0})):p!==void 0&&(l=C.method,R[C.method]={type:C,handler:p}),{dispose:()=>{l!==null&&(l!==void 0?delete R[l]:v=void 0)}}},trace:(C,p,l)=>{let g=!1,_=Tt.Text;l!==void 0&&(Fe.boolean(l)?g=l:(g=l.sendNotification||!1,_=l.traceFormat||Tt.Text)),k=C,O=_,k===Se.Off?q=void 0:q=p,g&&!Ct()&&!Oe()&&ht.sendNotification(Hl.type,{value:Se.toString(C)})},onError:Te.event,onClose:De.event,onUnhandledNotification:qe.event,onDispose:xe.event,end:()=>{e.end()},dispose:()=>{if(Oe())return;U=St.Disposed,xe.fire(void 0);let C=new Error("Connection got disposed.");Object.keys(z).forEach(p=>{z[p].reject(C)}),z=Object.create(null),x=Object.create(null),N=new Wl.LinkedMap,Fe.func(e.dispose)&&e.dispose(),Fe.func(t.dispose)&&t.dispose()},listen:()=>{tt(),tn(),U=St.Listening,t.listen(Ft)},inspect:()=>{$l.default().console.log("inspect")}};return ht.onNotification(fs.type,C=>{k===Se.Off||!q||q.log(C.message,k===Se.Verbose?C.verbose:void 0)}),ht.onNotification(vi.type,C=>{let p=b.get(C.token);p?p(C.value):me.fire(C)}),ht}G.createMessageConnection=rm});var ys=E(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.CancellationSenderStrategy=D.CancellationReceiverStrategy=D.ConnectionError=D.ConnectionErrors=D.LogTraceNotification=D.SetTraceNotification=D.TraceFormat=D.Trace=D.ProgressType=D.createMessageConnection=D.NullLogger=D.ConnectionOptions=D.ConnectionStrategy=D.WriteableStreamMessageWriter=D.AbstractMessageWriter=D.MessageWriter=D.ReadableStreamMessageReader=D.AbstractMessageReader=D.MessageReader=D.CancellationToken=D.CancellationTokenSource=D.Emitter=D.Event=D.Disposable=D.ParameterStructures=D.NotificationType9=D.NotificationType8=D.NotificationType7=D.NotificationType6=D.NotificationType5=D.NotificationType4=D.NotificationType3=D.NotificationType2=D.NotificationType1=D.NotificationType0=D.NotificationType=D.ErrorCodes=D.ResponseError=D.RequestType9=D.RequestType8=D.RequestType7=D.RequestType6=D.RequestType5=D.RequestType4=D.RequestType3=D.RequestType2=D.RequestType1=D.RequestType0=D.RequestType=D.RAL=void 0;D.CancellationStrategy=void 0;var fe=Jo();Object.defineProperty(D,"RequestType",{enumerable:!0,get:function(){return fe.RequestType}});Object.defineProperty(D,"RequestType0",{enumerable:!0,get:function(){return fe.RequestType0}});Object.defineProperty(D,"RequestType1",{enumerable:!0,get:function(){return fe.RequestType1}});Object.defineProperty(D,"RequestType2",{enumerable:!0,get:function(){return fe.RequestType2}});Object.defineProperty(D,"RequestType3",{enumerable:!0,get:function(){return fe.RequestType3}});Object.defineProperty(D,"RequestType4",{enumerable:!0,get:function(){return fe.RequestType4}});Object.defineProperty(D,"RequestType5",{enumerable:!0,get:function(){return fe.RequestType5}});Object.defineProperty(D,"RequestType6",{enumerable:!0,get:function(){return fe.RequestType6}});Object.defineProperty(D,"RequestType7",{enumerable:!0,get:function(){return fe.RequestType7}});Object.defineProperty(D,"RequestType8",{enumerable:!0,get:function(){return fe.RequestType8}});Object.defineProperty(D,"RequestType9",{enumerable:!0,get:function(){return fe.RequestType9}});Object.defineProperty(D,"ResponseError",{enumerable:!0,get:function(){return fe.ResponseError}});Object.defineProperty(D,"ErrorCodes",{enumerable:!0,get:function(){return fe.ErrorCodes}});Object.defineProperty(D,"NotificationType",{enumerable:!0,get:function(){return fe.NotificationType}});Object.defineProperty(D,"NotificationType0",{enumerable:!0,get:function(){return fe.NotificationType0}});Object.defineProperty(D,"NotificationType1",{enumerable:!0,get:function(){return fe.NotificationType1}});Object.defineProperty(D,"NotificationType2",{enumerable:!0,get:function(){return fe.NotificationType2}});Object.defineProperty(D,"NotificationType3",{enumerable:!0,get:function(){return fe.NotificationType3}});Object.defineProperty(D,"NotificationType4",{enumerable:!0,get:function(){return fe.NotificationType4}});Object.defineProperty(D,"NotificationType5",{enumerable:!0,get:function(){return fe.NotificationType5}});Object.defineProperty(D,"NotificationType6",{enumerable:!0,get:function(){return fe.NotificationType6}});Object.defineProperty(D,"NotificationType7",{enumerable:!0,get:function(){return fe.NotificationType7}});Object.defineProperty(D,"NotificationType8",{enumerable:!0,get:function(){return fe.NotificationType8}});Object.defineProperty(D,"NotificationType9",{enumerable:!0,get:function(){return fe.NotificationType9}});Object.defineProperty(D,"ParameterStructures",{enumerable:!0,get:function(){return fe.ParameterStructures}});var im=wo();Object.defineProperty(D,"Disposable",{enumerable:!0,get:function(){return im.Disposable}});var Ul=Jn();Object.defineProperty(D,"Event",{enumerable:!0,get:function(){return Ul.Event}});Object.defineProperty(D,"Emitter",{enumerable:!0,get:function(){return Ul.Emitter}});var Bl=ts();Object.defineProperty(D,"CancellationTokenSource",{enumerable:!0,get:function(){return Bl.CancellationTokenSource}});Object.defineProperty(D,"CancellationToken",{enumerable:!0,get:function(){return Bl.CancellationToken}});var ms=Il();Object.defineProperty(D,"MessageReader",{enumerable:!0,get:function(){return ms.MessageReader}});Object.defineProperty(D,"AbstractMessageReader",{enumerable:!0,get:function(){return ms.AbstractMessageReader}});Object.defineProperty(D,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return ms.ReadableStreamMessageReader}});var vs=Ml();Object.defineProperty(D,"MessageWriter",{enumerable:!0,get:function(){return vs.MessageWriter}});Object.defineProperty(D,"AbstractMessageWriter",{enumerable:!0,get:function(){return vs.AbstractMessageWriter}});Object.defineProperty(D,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return vs.WriteableStreamMessageWriter}});var nt=zl();Object.defineProperty(D,"ConnectionStrategy",{enumerable:!0,get:function(){return nt.ConnectionStrategy}});Object.defineProperty(D,"ConnectionOptions",{enumerable:!0,get:function(){return nt.ConnectionOptions}});Object.defineProperty(D,"NullLogger",{enumerable:!0,get:function(){return nt.NullLogger}});Object.defineProperty(D,"createMessageConnection",{enumerable:!0,get:function(){return nt.createMessageConnection}});Object.defineProperty(D,"ProgressType",{enumerable:!0,get:function(){return nt.ProgressType}});Object.defineProperty(D,"Trace",{enumerable:!0,get:function(){return nt.Trace}});Object.defineProperty(D,"TraceFormat",{enumerable:!0,get:function(){return nt.TraceFormat}});Object.defineProperty(D,"SetTraceNotification",{enumerable:!0,get:function(){return nt.SetTraceNotification}});Object.defineProperty(D,"LogTraceNotification",{enumerable:!0,get:function(){return nt.LogTraceNotification}});Object.defineProperty(D,"ConnectionErrors",{enumerable:!0,get:function(){return nt.ConnectionErrors}});Object.defineProperty(D,"ConnectionError",{enumerable:!0,get:function(){return nt.ConnectionError}});Object.defineProperty(D,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return nt.CancellationReceiverStrategy}});Object.defineProperty(D,"CancellationSenderStrategy",{enumerable:!0,get:function(){return nt.CancellationSenderStrategy}});Object.defineProperty(D,"CancellationStrategy",{enumerable:!0,get:function(){return nt.CancellationStrategy}});var om=Ht();D.RAL=om.default});var Zn=E(re=>{"use strict";var sm=re&&re.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),am=re&&re.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&sm(e,t,n)};Object.defineProperty(re,"__esModule",{value:!0});re.createMessageConnection=re.createServerSocketTransport=re.createClientSocketTransport=re.createServerPipeTransport=re.createClientPipeTransport=re.generateRandomPipeName=re.StreamMessageWriter=re.StreamMessageReader=re.SocketMessageWriter=re.SocketMessageReader=re.IPCMessageWriter=re.IPCMessageReader=void 0;var Yn=Dl();Yn.default.install();var kt=ys(),Gl=require("path"),cm=require("os"),um=require("crypto"),Ci=require("net");am(ys(),re);var Rs=class extends kt.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),kt.Disposable.create(()=>this.process.off("message",e))}};re.IPCMessageReader=Rs;var Cs=class extends kt.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};re.IPCMessageWriter=Cs;var kn=class extends kt.ReadableStreamMessageReader{constructor(e,n="utf-8"){super(Yn.default().stream.asReadableStream(e),n)}};re.SocketMessageReader=kn;var In=class extends kt.WriteableStreamMessageWriter{constructor(e,n){super(Yn.default().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};re.SocketMessageWriter=In;var yi=class extends kt.ReadableStreamMessageReader{constructor(e,n){super(Yn.default().stream.asReadableStream(e),n)}};re.StreamMessageReader=yi;var Ri=class extends kt.WriteableStreamMessageWriter{constructor(e,n){super(Yn.default().stream.asWritableStream(e),n)}};re.StreamMessageWriter=Ri;var Xl=process.env.XDG_RUNTIME_DIR,lm=new Map([["linux",107],["darwin",103]]);function dm(){let t=um.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Xl?e=Gl.join(Xl,`vscode-ipc-${t}.sock`):e=Gl.join(cm.tmpdir(),`vscode-${t}.sock`);let n=lm.get(process.platform);return n!==void 0&&e.length>=n&&Yn.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}re.generateRandomPipeName=dm;function fm(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let c=Ci.createServer(f=>{c.close(),n([new kn(f,e),new In(f,e)])});c.on("error",s),c.listen(t,()=>{c.removeListener("error",s),i({onConnected:()=>r})})})}re.createClientPipeTransport=fm;function hm(t,e="utf-8"){let n=Ci.createConnection(t);return[new kn(n,e),new In(n,e)]}re.createServerPipeTransport=hm;function pm(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let c=Ci.createServer(f=>{c.close(),n([new kn(f,e),new In(f,e)])});c.on("error",s),c.listen(t,"127.0.0.1",()=>{c.removeListener("error",s),i({onConnected:()=>r})})})}re.createClientSocketTransport=pm;function gm(t,e="utf-8"){let n=Ci.createConnection(t,"127.0.0.1");return[new kn(n,e),new In(n,e)]}re.createServerSocketTransport=gm;function mm(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function vm(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function ym(t,e,n,r){n||(n=kt.NullLogger);let i=mm(t)?new yi(t):t,s=vm(e)?new Ri(e):e;return kt.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),kt.createMessageConnection(i,s,n,r)}re.createMessageConnection=ym});var _s=E((X_,Vl)=>{"use strict";Vl.exports=Zn()});var Ql=E((Jl,_i)=>{(function(t){if(typeof _i=="object"&&typeof _i.exports=="object"){var e=t(require,Jl);e!==void 0&&(_i.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var n;(function(l){l.MIN_VALUE=-2147483648,l.MAX_VALUE=2147483647})(n=e.integer||(e.integer={}));var r;(function(l){l.MIN_VALUE=0,l.MAX_VALUE=2147483647})(r=e.uinteger||(e.uinteger={}));var i;(function(l){function g(o,a){return o===Number.MAX_VALUE&&(o=r.MAX_VALUE),a===Number.MAX_VALUE&&(a=r.MAX_VALUE),{line:o,character:a}}l.create=g;function _(o){var a=o;return p.objectLiteral(a)&&p.uinteger(a.line)&&p.uinteger(a.character)}l.is=_})(i=e.Position||(e.Position={}));var s;(function(l){function g(o,a,y,S){if(p.uinteger(o)&&p.uinteger(a)&&p.uinteger(y)&&p.uinteger(S))return{start:i.create(o,a),end:i.create(y,S)};if(i.is(o)&&i.is(a))return{start:o,end:a};throw new Error("Range#create called with invalid arguments["+o+", "+a+", "+y+", "+S+"]")}l.create=g;function _(o){var a=o;return p.objectLiteral(a)&&i.is(a.start)&&i.is(a.end)}l.is=_})(s=e.Range||(e.Range={}));var c;(function(l){function g(o,a){return{uri:o,range:a}}l.create=g;function _(o){var a=o;return p.defined(a)&&s.is(a.range)&&(p.string(a.uri)||p.undefined(a.uri))}l.is=_})(c=e.Location||(e.Location={}));var f;(function(l){function g(o,a,y,S){return{targetUri:o,targetRange:a,targetSelectionRange:y,originSelectionRange:S}}l.create=g;function _(o){var a=o;return p.defined(a)&&s.is(a.targetRange)&&p.string(a.targetUri)&&(s.is(a.targetSelectionRange)||p.undefined(a.targetSelectionRange))&&(s.is(a.originSelectionRange)||p.undefined(a.originSelectionRange))}l.is=_})(f=e.LocationLink||(e.LocationLink={}));var d;(function(l){function g(o,a,y,S){return{red:o,green:a,blue:y,alpha:S}}l.create=g;function _(o){var a=o;return p.numberRange(a.red,0,1)&&p.numberRange(a.green,0,1)&&p.numberRange(a.blue,0,1)&&p.numberRange(a.alpha,0,1)}l.is=_})(d=e.Color||(e.Color={}));var v;(function(l){function g(o,a){return{range:o,color:a}}l.create=g;function _(o){var a=o;return s.is(a.range)&&d.is(a.color)}l.is=_})(v=e.ColorInformation||(e.ColorInformation={}));var R;(function(l){function g(o,a,y){return{label:o,textEdit:a,additionalTextEdits:y}}l.create=g;function _(o){var a=o;return p.string(a.label)&&(p.undefined(a.textEdit)||O.is(a))&&(p.undefined(a.additionalTextEdits)||p.typedArray(a.additionalTextEdits,O.is))}l.is=_})(R=e.ColorPresentation||(e.ColorPresentation={}));var w;(function(l){l.Comment="comment",l.Imports="imports",l.Region="region"})(w=e.FoldingRangeKind||(e.FoldingRangeKind={}));var T;(function(l){function g(o,a,y,S,I){var W={startLine:o,endLine:a};return p.defined(y)&&(W.startCharacter=y),p.defined(S)&&(W.endCharacter=S),p.defined(I)&&(W.kind=I),W}l.create=g;function _(o){var a=o;return p.uinteger(a.startLine)&&p.uinteger(a.startLine)&&(p.undefined(a.startCharacter)||p.uinteger(a.startCharacter))&&(p.undefined(a.endCharacter)||p.uinteger(a.endCharacter))&&(p.undefined(a.kind)||p.string(a.kind))}l.is=_})(T=e.FoldingRange||(e.FoldingRange={}));var b;(function(l){function g(o,a){return{location:o,message:a}}l.create=g;function _(o){var a=o;return p.defined(a)&&c.is(a.location)&&p.string(a.message)}l.is=_})(b=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var F;(function(l){l.Error=1,l.Warning=2,l.Information=3,l.Hint=4})(F=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var N;(function(l){l.Unnecessary=1,l.Deprecated=2})(N=e.DiagnosticTag||(e.DiagnosticTag={}));var z;(function(l){function g(_){var o=_;return o!=null&&p.string(o.href)}l.is=g})(z=e.CodeDescription||(e.CodeDescription={}));var x;(function(l){function g(o,a,y,S,I,W){var X={range:o,message:a};return p.defined(y)&&(X.severity=y),p.defined(S)&&(X.code=S),p.defined(I)&&(X.source=I),p.defined(W)&&(X.relatedInformation=W),X}l.create=g;function _(o){var a,y=o;return p.defined(y)&&s.is(y.range)&&p.string(y.message)&&(p.number(y.severity)||p.undefined(y.severity))&&(p.integer(y.code)||p.string(y.code)||p.undefined(y.code))&&(p.undefined(y.codeDescription)||p.string((a=y.codeDescription)===null||a===void 0?void 0:a.href))&&(p.string(y.source)||p.undefined(y.source))&&(p.undefined(y.relatedInformation)||p.typedArray(y.relatedInformation,b.is))}l.is=_})(x=e.Diagnostic||(e.Diagnostic={}));var k;(function(l){function g(o,a){for(var y=[],S=2;S<arguments.length;S++)y[S-2]=arguments[S];var I={title:o,command:a};return p.defined(y)&&y.length>0&&(I.arguments=y),I}l.create=g;function _(o){var a=o;return p.defined(a)&&p.string(a.title)&&p.string(a.command)}l.is=_})(k=e.Command||(e.Command={}));var O;(function(l){function g(y,S){return{range:y,newText:S}}l.replace=g;function _(y,S){return{range:{start:y,end:y},newText:S}}l.insert=_;function o(y){return{range:y,newText:""}}l.del=o;function a(y){var S=y;return p.objectLiteral(S)&&p.string(S.newText)&&s.is(S.range)}l.is=a})(O=e.TextEdit||(e.TextEdit={}));var q;(function(l){function g(o,a,y){var S={label:o};return a!==void 0&&(S.needsConfirmation=a),y!==void 0&&(S.description=y),S}l.create=g;function _(o){var a=o;return a!==void 0&&p.objectLiteral(a)&&p.string(a.label)&&(p.boolean(a.needsConfirmation)||a.needsConfirmation===void 0)&&(p.string(a.description)||a.description===void 0)}l.is=_})(q=e.ChangeAnnotation||(e.ChangeAnnotation={}));var U;(function(l){function g(_){var o=_;return typeof o=="string"}l.is=g})(U=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var Te;(function(l){function g(y,S,I){return{range:y,newText:S,annotationId:I}}l.replace=g;function _(y,S,I){return{range:{start:y,end:y},newText:S,annotationId:I}}l.insert=_;function o(y,S){return{range:y,newText:"",annotationId:S}}l.del=o;function a(y){var S=y;return O.is(S)&&(q.is(S.annotationId)||U.is(S.annotationId))}l.is=a})(Te=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var De;(function(l){function g(o,a){return{textDocument:o,edits:a}}l.create=g;function _(o){var a=o;return p.defined(a)&&le.is(a.textDocument)&&Array.isArray(a.edits)}l.is=_})(De=e.TextDocumentEdit||(e.TextDocumentEdit={}));var qe;(function(l){function g(o,a,y){var S={kind:"create",uri:o};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(S.options=a),y!==void 0&&(S.annotationId=y),S}l.create=g;function _(o){var a=o;return a&&a.kind==="create"&&p.string(a.uri)&&(a.options===void 0||(a.options.overwrite===void 0||p.boolean(a.options.overwrite))&&(a.options.ignoreIfExists===void 0||p.boolean(a.options.ignoreIfExists)))&&(a.annotationId===void 0||U.is(a.annotationId))}l.is=_})(qe=e.CreateFile||(e.CreateFile={}));var me;(function(l){function g(o,a,y,S){var I={kind:"rename",oldUri:o,newUri:a};return y!==void 0&&(y.overwrite!==void 0||y.ignoreIfExists!==void 0)&&(I.options=y),S!==void 0&&(I.annotationId=S),I}l.create=g;function _(o){var a=o;return a&&a.kind==="rename"&&p.string(a.oldUri)&&p.string(a.newUri)&&(a.options===void 0||(a.options.overwrite===void 0||p.boolean(a.options.overwrite))&&(a.options.ignoreIfExists===void 0||p.boolean(a.options.ignoreIfExists)))&&(a.annotationId===void 0||U.is(a.annotationId))}l.is=_})(me=e.RenameFile||(e.RenameFile={}));var xe;(function(l){function g(o,a,y){var S={kind:"delete",uri:o};return a!==void 0&&(a.recursive!==void 0||a.ignoreIfNotExists!==void 0)&&(S.options=a),y!==void 0&&(S.annotationId=y),S}l.create=g;function _(o){var a=o;return a&&a.kind==="delete"&&p.string(a.uri)&&(a.options===void 0||(a.options.recursive===void 0||p.boolean(a.options.recursive))&&(a.options.ignoreIfNotExists===void 0||p.boolean(a.options.ignoreIfNotExists)))&&(a.annotationId===void 0||U.is(a.annotationId))}l.is=_})(xe=e.DeleteFile||(e.DeleteFile={}));var ke;(function(l){function g(_){var o=_;return o&&(o.changes!==void 0||o.documentChanges!==void 0)&&(o.documentChanges===void 0||o.documentChanges.every(function(a){return p.string(a.kind)?qe.is(a)||me.is(a)||xe.is(a):De.is(a)}))}l.is=g})(ke=e.WorkspaceEdit||(e.WorkspaceEdit={}));var Ze=function(){function l(g,_){this.edits=g,this.changeAnnotations=_}return l.prototype.insert=function(g,_,o){var a,y;if(o===void 0?a=O.insert(g,_):U.is(o)?(y=o,a=Te.insert(g,_,o)):(this.assertChangeAnnotations(this.changeAnnotations),y=this.changeAnnotations.manage(o),a=Te.insert(g,_,y)),this.edits.push(a),y!==void 0)return y},l.prototype.replace=function(g,_,o){var a,y;if(o===void 0?a=O.replace(g,_):U.is(o)?(y=o,a=Te.replace(g,_,o)):(this.assertChangeAnnotations(this.changeAnnotations),y=this.changeAnnotations.manage(o),a=Te.replace(g,_,y)),this.edits.push(a),y!==void 0)return y},l.prototype.delete=function(g,_){var o,a;if(_===void 0?o=O.del(g):U.is(_)?(a=_,o=Te.del(g,_)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(_),o=Te.del(g,a)),this.edits.push(o),a!==void 0)return a},l.prototype.add=function(g){this.edits.push(g)},l.prototype.all=function(){return this.edits},l.prototype.clear=function(){this.edits.splice(0,this.edits.length)},l.prototype.assertChangeAnnotations=function(g){if(g===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},l}(),Ge=function(){function l(g){this._annotations=g===void 0?Object.create(null):g,this._counter=0,this._size=0}return l.prototype.all=function(){return this._annotations},Object.defineProperty(l.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),l.prototype.manage=function(g,_){var o;if(U.is(g)?o=g:(o=this.nextId(),_=g),this._annotations[o]!==void 0)throw new Error("Id "+o+" is already in use.");if(_===void 0)throw new Error("No annotation provided for id "+o);return this._annotations[o]=_,this._size++,o},l.prototype.nextId=function(){return this._counter++,this._counter.toString()},l}(),et=function(){function l(g){var _=this;this._textEditChanges=Object.create(null),g!==void 0?(this._workspaceEdit=g,g.documentChanges?(this._changeAnnotations=new Ge(g.changeAnnotations),g.changeAnnotations=this._changeAnnotations.all(),g.documentChanges.forEach(function(o){if(De.is(o)){var a=new Ze(o.edits,_._changeAnnotations);_._textEditChanges[o.textDocument.uri]=a}})):g.changes&&Object.keys(g.changes).forEach(function(o){var a=new Ze(g.changes[o]);_._textEditChanges[o]=a})):this._workspaceEdit={}}return Object.defineProperty(l.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),l.prototype.getTextEditChange=function(g){if(le.is(g)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var _={uri:g.uri,version:g.version},o=this._textEditChanges[_.uri];if(!o){var a=[],y={textDocument:_,edits:a};this._workspaceEdit.documentChanges.push(y),o=new Ze(a,this._changeAnnotations),this._textEditChanges[_.uri]=o}return o}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var o=this._textEditChanges[g];if(!o){var a=[];this._workspaceEdit.changes[g]=a,o=new Ze(a),this._textEditChanges[g]=o}return o}},l.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Ge,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},l.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},l.prototype.createFile=function(g,_,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;q.is(_)||U.is(_)?a=_:o=_;var y,S;if(a===void 0?y=qe.create(g,o):(S=U.is(a)?a:this._changeAnnotations.manage(a),y=qe.create(g,o,S)),this._workspaceEdit.documentChanges.push(y),S!==void 0)return S},l.prototype.renameFile=function(g,_,o,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var y;q.is(o)||U.is(o)?y=o:a=o;var S,I;if(y===void 0?S=me.create(g,_,a):(I=U.is(y)?y:this._changeAnnotations.manage(y),S=me.create(g,_,a,I)),this._workspaceEdit.documentChanges.push(S),I!==void 0)return I},l.prototype.deleteFile=function(g,_,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;q.is(_)||U.is(_)?a=_:o=_;var y,S;if(a===void 0?y=xe.create(g,o):(S=U.is(a)?a:this._changeAnnotations.manage(a),y=xe.create(g,o,S)),this._workspaceEdit.documentChanges.push(y),S!==void 0)return S},l}();e.WorkspaceChange=et;var Xe;(function(l){function g(o){return{uri:o}}l.create=g;function _(o){var a=o;return p.defined(a)&&p.string(a.uri)}l.is=_})(Xe=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Rt;(function(l){function g(o,a){return{uri:o,version:a}}l.create=g;function _(o){var a=o;return p.defined(a)&&p.string(a.uri)&&p.integer(a.version)}l.is=_})(Rt=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var le;(function(l){function g(o,a){return{uri:o,version:a}}l.create=g;function _(o){var a=o;return p.defined(a)&&p.string(a.uri)&&(a.version===null||p.integer(a.version))}l.is=_})(le=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var Ct;(function(l){function g(o,a,y,S){return{uri:o,languageId:a,version:y,text:S}}l.create=g;function _(o){var a=o;return p.defined(a)&&p.string(a.uri)&&p.string(a.languageId)&&p.integer(a.version)&&p.string(a.text)}l.is=_})(Ct=e.TextDocumentItem||(e.TextDocumentItem={}));var Oe;(function(l){l.PlainText="plaintext",l.Markdown="markdown"})(Oe=e.MarkupKind||(e.MarkupKind={})),function(l){function g(_){var o=_;return o===l.PlainText||o===l.Markdown}l.is=g}(Oe=e.MarkupKind||(e.MarkupKind={}));var it;(function(l){function g(_){var o=_;return p.objectLiteral(_)&&Oe.is(o.kind)&&p.string(o.value)}l.is=g})(it=e.MarkupContent||(e.MarkupContent={}));var ct;(function(l){l.Text=1,l.Method=2,l.Function=3,l.Constructor=4,l.Field=5,l.Variable=6,l.Class=7,l.Interface=8,l.Module=9,l.Property=10,l.Unit=11,l.Value=12,l.Enum=13,l.Keyword=14,l.Snippet=15,l.Color=16,l.File=17,l.Reference=18,l.Folder=19,l.EnumMember=20,l.Constant=21,l.Struct=22,l.Event=23,l.Operator=24,l.TypeParameter=25})(ct=e.CompletionItemKind||(e.CompletionItemKind={}));var _t;(function(l){l.PlainText=1,l.Snippet=2})(_t=e.InsertTextFormat||(e.InsertTextFormat={}));var Qt;(function(l){l.Deprecated=1})(Qt=e.CompletionItemTag||(e.CompletionItemTag={}));var Yt;(function(l){function g(o,a,y){return{newText:o,insert:a,replace:y}}l.create=g;function _(o){var a=o;return a&&p.string(a.newText)&&s.is(a.insert)&&s.is(a.replace)}l.is=_})(Yt=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Ft;(function(l){l.asIs=1,l.adjustIndentation=2})(Ft=e.InsertTextMode||(e.InsertTextMode={}));var Lt;(function(l){function g(_){return{label:_}}l.create=g})(Lt=e.CompletionItem||(e.CompletionItem={}));var Ot;(function(l){function g(_,o){return{items:_||[],isIncomplete:!!o}}l.create=g})(Ot=e.CompletionList||(e.CompletionList={}));var xt;(function(l){function g(o){return o.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}l.fromPlainText=g;function _(o){var a=o;return p.string(a)||p.objectLiteral(a)&&p.string(a.language)&&p.string(a.value)}l.is=_})(xt=e.MarkedString||(e.MarkedString={}));var At;(function(l){function g(_){var o=_;return!!o&&p.objectLiteral(o)&&(it.is(o.contents)||xt.is(o.contents)||p.typedArray(o.contents,xt.is))&&(_.range===void 0||s.is(_.range))}l.is=g})(At=e.Hover||(e.Hover={}));var Zt;(function(l){function g(_,o){return o?{label:_,documentation:o}:{label:_}}l.create=g})(Zt=e.ParameterInformation||(e.ParameterInformation={}));var vn;(function(l){function g(_,o){for(var a=[],y=2;y<arguments.length;y++)a[y-2]=arguments[y];var S={label:_};return p.defined(o)&&(S.documentation=o),p.defined(a)?S.parameters=a:S.parameters=[],S}l.create=g})(vn=e.SignatureInformation||(e.SignatureInformation={}));var ut;(function(l){l.Text=1,l.Read=2,l.Write=3})(ut=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var en;(function(l){function g(_,o){var a={range:_};return p.number(o)&&(a.kind=o),a}l.create=g})(en=e.DocumentHighlight||(e.DocumentHighlight={}));var lt;(function(l){l.File=1,l.Module=2,l.Namespace=3,l.Package=4,l.Class=5,l.Method=6,l.Property=7,l.Field=8,l.Constructor=9,l.Enum=10,l.Interface=11,l.Function=12,l.Variable=13,l.Constant=14,l.String=15,l.Number=16,l.Boolean=17,l.Array=18,l.Object=19,l.Key=20,l.Null=21,l.EnumMember=22,l.Struct=23,l.Event=24,l.Operator=25,l.TypeParameter=26})(lt=e.SymbolKind||(e.SymbolKind={}));var yn;(function(l){l.Deprecated=1})(yn=e.SymbolTag||(e.SymbolTag={}));var ye;(function(l){function g(_,o,a,y,S){var I={name:_,kind:o,location:{uri:y,range:a}};return S&&(I.containerName=S),I}l.create=g})(ye=e.SymbolInformation||(e.SymbolInformation={}));var tt;(function(l){function g(o,a,y,S,I,W){var X={name:o,detail:a,kind:y,range:S,selectionRange:I};return W!==void 0&&(X.children=W),X}l.create=g;function _(o){var a=o;return a&&p.string(a.name)&&p.number(a.kind)&&s.is(a.range)&&s.is(a.selectionRange)&&(a.detail===void 0||p.string(a.detail))&&(a.deprecated===void 0||p.boolean(a.deprecated))&&(a.children===void 0||Array.isArray(a.children))&&(a.tags===void 0||Array.isArray(a.tags))}l.is=_})(tt=e.DocumentSymbol||(e.DocumentSymbol={}));var tn;(function(l){l.Empty="",l.QuickFix="quickfix",l.Refactor="refactor",l.RefactorExtract="refactor.extract",l.RefactorInline="refactor.inline",l.RefactorRewrite="refactor.rewrite",l.Source="source",l.SourceOrganizeImports="source.organizeImports",l.SourceFixAll="source.fixAll"})(tn=e.CodeActionKind||(e.CodeActionKind={}));var Rn;(function(l){function g(o,a){var y={diagnostics:o};return a!=null&&(y.only=a),y}l.create=g;function _(o){var a=o;return p.defined(a)&&p.typedArray(a.diagnostics,x.is)&&(a.only===void 0||p.typedArray(a.only,p.string))}l.is=_})(Rn=e.CodeActionContext||(e.CodeActionContext={}));var dt;(function(l){function g(o,a,y){var S={title:o},I=!0;return typeof a=="string"?(I=!1,S.kind=a):k.is(a)?S.command=a:S.edit=a,I&&y!==void 0&&(S.kind=y),S}l.create=g;function _(o){var a=o;return a&&p.string(a.title)&&(a.diagnostics===void 0||p.typedArray(a.diagnostics,x.is))&&(a.kind===void 0||p.string(a.kind))&&(a.edit!==void 0||a.command!==void 0)&&(a.command===void 0||k.is(a.command))&&(a.isPreferred===void 0||p.boolean(a.isPreferred))&&(a.edit===void 0||ke.is(a.edit))}l.is=_})(dt=e.CodeAction||(e.CodeAction={}));var nn;(function(l){function g(o,a){var y={range:o};return p.defined(a)&&(y.data=a),y}l.create=g;function _(o){var a=o;return p.defined(a)&&s.is(a.range)&&(p.undefined(a.command)||k.is(a.command))}l.is=_})(nn=e.CodeLens||(e.CodeLens={}));var Mt;(function(l){function g(o,a){return{tabSize:o,insertSpaces:a}}l.create=g;function _(o){var a=o;return p.defined(a)&&p.uinteger(a.tabSize)&&p.boolean(a.insertSpaces)}l.is=_})(Mt=e.FormattingOptions||(e.FormattingOptions={}));var ft;(function(l){function g(o,a,y){return{range:o,target:a,data:y}}l.create=g;function _(o){var a=o;return p.defined(a)&&s.is(a.range)&&(p.undefined(a.target)||p.string(a.target))}l.is=_})(ft=e.DocumentLink||(e.DocumentLink={}));var jt;(function(l){function g(o,a){return{range:o,parent:a}}l.create=g;function _(o){var a=o;return a!==void 0&&s.is(a.range)&&(a.parent===void 0||l.is(a.parent))}l.is=_})(jt=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var ht;(function(l){function g(y,S,I,W){return new C(y,S,I,W)}l.create=g;function _(y){var S=y;return!!(p.defined(S)&&p.string(S.uri)&&(p.undefined(S.languageId)||p.string(S.languageId))&&p.uinteger(S.lineCount)&&p.func(S.getText)&&p.func(S.positionAt)&&p.func(S.offsetAt))}l.is=_;function o(y,S){for(var I=y.getText(),W=a(S,function(rn,Cn){var Xr=rn.range.start.line-Cn.range.start.line;return Xr===0?rn.range.start.character-Cn.range.start.character:Xr}),X=I.length,oe=W.length-1;oe>=0;oe--){var Re=W[oe],Ce=y.offsetAt(Re.range.start),ee=y.offsetAt(Re.range.end);if(ee<=X)I=I.substring(0,Ce)+Re.newText+I.substring(ee,I.length);else throw new Error("Overlapping edit");X=Ce}return I}l.applyEdits=o;function a(y,S){if(y.length<=1)return y;var I=y.length/2|0,W=y.slice(0,I),X=y.slice(I);a(W,S),a(X,S);for(var oe=0,Re=0,Ce=0;oe<W.length&&Re<X.length;){var ee=S(W[oe],X[Re]);ee<=0?y[Ce++]=W[oe++]:y[Ce++]=X[Re++]}for(;oe<W.length;)y[Ce++]=W[oe++];for(;Re<X.length;)y[Ce++]=X[Re++];return y}})(ht=e.TextDocument||(e.TextDocument={}));var C=function(){function l(g,_,o,a){this._uri=g,this._languageId=_,this._version=o,this._content=a,this._lineOffsets=void 0}return Object.defineProperty(l.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),l.prototype.getText=function(g){if(g){var _=this.offsetAt(g.start),o=this.offsetAt(g.end);return this._content.substring(_,o)}return this._content},l.prototype.update=function(g,_){this._content=g.text,this._version=_,this._lineOffsets=void 0},l.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var g=[],_=this._content,o=!0,a=0;a<_.length;a++){o&&(g.push(a),o=!1);var y=_.charAt(a);o=y==="\r"||y===`
`,y==="\r"&&a+1<_.length&&_.charAt(a+1)===`
`&&a++}o&&_.length>0&&g.push(_.length),this._lineOffsets=g}return this._lineOffsets},l.prototype.positionAt=function(g){g=Math.max(Math.min(g,this._content.length),0);var _=this.getLineOffsets(),o=0,a=_.length;if(a===0)return i.create(0,g);for(;o<a;){var y=Math.floor((o+a)/2);_[y]>g?a=y:o=y+1}var S=o-1;return i.create(S,g-_[S])},l.prototype.offsetAt=function(g){var _=this.getLineOffsets();if(g.line>=_.length)return this._content.length;if(g.line<0)return 0;var o=_[g.line],a=g.line+1<_.length?_[g.line+1]:this._content.length;return Math.max(Math.min(o+g.character,a),o)},Object.defineProperty(l.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),l}(),p;(function(l){var g=Object.prototype.toString;function _(ee){return typeof ee<"u"}l.defined=_;function o(ee){return typeof ee>"u"}l.undefined=o;function a(ee){return ee===!0||ee===!1}l.boolean=a;function y(ee){return g.call(ee)==="[object String]"}l.string=y;function S(ee){return g.call(ee)==="[object Number]"}l.number=S;function I(ee,rn,Cn){return g.call(ee)==="[object Number]"&&rn<=ee&&ee<=Cn}l.numberRange=I;function W(ee){return g.call(ee)==="[object Number]"&&-2147483648<=ee&&ee<=2147483647}l.integer=W;function X(ee){return g.call(ee)==="[object Number]"&&0<=ee&&ee<=2147483647}l.uinteger=X;function oe(ee){return g.call(ee)==="[object Function]"}l.func=oe;function Re(ee){return ee!==null&&typeof ee=="object"}l.objectLiteral=Re;function Ce(ee,rn){return Array.isArray(ee)&&ee.every(rn)}l.typedArray=Ce})(p||(p={}))})});var Le=E(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.ProtocolNotificationType=mt.ProtocolNotificationType0=mt.ProtocolRequestType=mt.ProtocolRequestType0=mt.RegistrationType=void 0;var er=Zn(),ws=class{constructor(e){this.method=e}};mt.RegistrationType=ws;var Ts=class extends er.RequestType0{constructor(e){super(e)}};mt.ProtocolRequestType0=Ts;var Ss=class extends er.RequestType{constructor(e){super(e,er.ParameterStructures.byName)}};mt.ProtocolRequestType=Ss;var bs=class extends er.NotificationType0{constructor(e){super(e)}};mt.ProtocolNotificationType0=bs;var Ps=class extends er.NotificationType{constructor(e){super(e,er.ParameterStructures.byName)}};mt.ProtocolNotificationType=Ps});var ed=E(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.objectLiteral=be.typedArray=be.stringArray=be.array=be.func=be.error=be.number=be.string=be.boolean=void 0;function Rm(t){return t===!0||t===!1}be.boolean=Rm;function Yl(t){return typeof t=="string"||t instanceof String}be.string=Yl;function Cm(t){return typeof t=="number"||t instanceof Number}be.number=Cm;function _m(t){return t instanceof Error}be.error=_m;function wm(t){return typeof t=="function"}be.func=wm;function Zl(t){return Array.isArray(t)}be.array=Zl;function Tm(t){return Zl(t)&&t.every(e=>Yl(e))}be.stringArray=Tm;function Sm(t,e){return Array.isArray(t)&&t.every(e)}be.typedArray=Sm;function bm(t){return t!==null&&typeof t=="object"}be.objectLiteral=bm});var td=E(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.ImplementationRequest=void 0;var Pm=Le(),Em;(function(t){t.method="textDocument/implementation",t.type=new Pm.ProtocolRequestType(t.method)})(Em=Dr.ImplementationRequest||(Dr.ImplementationRequest={}))});var nd=E(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.TypeDefinitionRequest=void 0;var Dm=Le(),qm;(function(t){t.method="textDocument/typeDefinition",t.type=new Dm.ProtocolRequestType(t.method)})(qm=qr.TypeDefinitionRequest||(qr.TypeDefinitionRequest={}))});var id=E(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.DidChangeWorkspaceFoldersNotification=un.WorkspaceFoldersRequest=void 0;var rd=Le(),Om;(function(t){t.type=new rd.ProtocolRequestType0("workspace/workspaceFolders")})(Om=un.WorkspaceFoldersRequest||(un.WorkspaceFoldersRequest={}));var xm;(function(t){t.type=new rd.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(xm=un.DidChangeWorkspaceFoldersNotification||(un.DidChangeWorkspaceFoldersNotification={}))});var od=E(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.ConfigurationRequest=void 0;var km=Le(),Im;(function(t){t.type=new km.ProtocolRequestType("workspace/configuration")})(Im=Or.ConfigurationRequest||(Or.ConfigurationRequest={}))});var ad=E(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.ColorPresentationRequest=ln.DocumentColorRequest=void 0;var sd=Le(),Nm;(function(t){t.method="textDocument/documentColor",t.type=new sd.ProtocolRequestType(t.method)})(Nm=ln.DocumentColorRequest||(ln.DocumentColorRequest={}));var Fm;(function(t){t.type=new sd.ProtocolRequestType("textDocument/colorPresentation")})(Fm=ln.ColorPresentationRequest||(ln.ColorPresentationRequest={}))});var cd=E(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.FoldingRangeRequest=dn.FoldingRangeKind=void 0;var Lm=Le(),Am;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Am=dn.FoldingRangeKind||(dn.FoldingRangeKind={}));var Mm;(function(t){t.method="textDocument/foldingRange",t.type=new Lm.ProtocolRequestType(t.method)})(Mm=dn.FoldingRangeRequest||(dn.FoldingRangeRequest={}))});var ud=E(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.DeclarationRequest=void 0;var jm=Le(),$m;(function(t){t.method="textDocument/declaration",t.type=new jm.ProtocolRequestType(t.method)})($m=xr.DeclarationRequest||(xr.DeclarationRequest={}))});var ld=E(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.SelectionRangeRequest=void 0;var Wm=Le(),Hm;(function(t){t.method="textDocument/selectionRange",t.type=new Wm.ProtocolRequestType(t.method)})(Hm=kr.SelectionRangeRequest||(kr.SelectionRangeRequest={}))});var fd=E(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.WorkDoneProgressCancelNotification=bt.WorkDoneProgressCreateRequest=bt.WorkDoneProgress=void 0;var Km=Zn(),dd=Le(),zm;(function(t){t.type=new Km.ProgressType;function e(n){return n===t.type}t.is=e})(zm=bt.WorkDoneProgress||(bt.WorkDoneProgress={}));var Um;(function(t){t.type=new dd.ProtocolRequestType("window/workDoneProgress/create")})(Um=bt.WorkDoneProgressCreateRequest||(bt.WorkDoneProgressCreateRequest={}));var Bm;(function(t){t.type=new dd.ProtocolNotificationType("window/workDoneProgress/cancel")})(Bm=bt.WorkDoneProgressCancelNotification||(bt.WorkDoneProgressCancelNotification={}))});var hd=E(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.CallHierarchyOutgoingCallsRequest=Pt.CallHierarchyIncomingCallsRequest=Pt.CallHierarchyPrepareRequest=void 0;var Es=Le(),Gm;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new Es.ProtocolRequestType(t.method)})(Gm=Pt.CallHierarchyPrepareRequest||(Pt.CallHierarchyPrepareRequest={}));var Xm;(function(t){t.method="callHierarchy/incomingCalls",t.type=new Es.ProtocolRequestType(t.method)})(Xm=Pt.CallHierarchyIncomingCallsRequest||(Pt.CallHierarchyIncomingCallsRequest={}));var Vm;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new Es.ProtocolRequestType(t.method)})(Vm=Pt.CallHierarchyOutgoingCallsRequest||(Pt.CallHierarchyOutgoingCallsRequest={}))});var pd=E(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.SemanticTokensRefreshRequest=se.SemanticTokensRangeRequest=se.SemanticTokensDeltaRequest=se.SemanticTokensRequest=se.SemanticTokensRegistrationType=se.TokenFormat=se.SemanticTokens=se.SemanticTokenModifiers=se.SemanticTokenTypes=void 0;var Ir=Le(),Jm;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator"})(Jm=se.SemanticTokenTypes||(se.SemanticTokenTypes={}));var Qm;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Qm=se.SemanticTokenModifiers||(se.SemanticTokenModifiers={}));var Ym;(function(t){function e(n){let r=n;return r!==void 0&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=e})(Ym=se.SemanticTokens||(se.SemanticTokens={}));var Zm;(function(t){t.Relative="relative"})(Zm=se.TokenFormat||(se.TokenFormat={}));var ev;(function(t){t.method="textDocument/semanticTokens",t.type=new Ir.RegistrationType(t.method)})(ev=se.SemanticTokensRegistrationType||(se.SemanticTokensRegistrationType={}));var tv;(function(t){t.method="textDocument/semanticTokens/full",t.type=new Ir.ProtocolRequestType(t.method)})(tv=se.SemanticTokensRequest||(se.SemanticTokensRequest={}));var nv;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new Ir.ProtocolRequestType(t.method)})(nv=se.SemanticTokensDeltaRequest||(se.SemanticTokensDeltaRequest={}));var rv;(function(t){t.method="textDocument/semanticTokens/range",t.type=new Ir.ProtocolRequestType(t.method)})(rv=se.SemanticTokensRangeRequest||(se.SemanticTokensRangeRequest={}));var iv;(function(t){t.method="workspace/semanticTokens/refresh",t.type=new Ir.ProtocolRequestType0(t.method)})(iv=se.SemanticTokensRefreshRequest||(se.SemanticTokensRefreshRequest={}))});var gd=E(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.ShowDocumentRequest=void 0;var ov=Le(),sv;(function(t){t.method="window/showDocument",t.type=new ov.ProtocolRequestType(t.method)})(sv=Nr.ShowDocumentRequest||(Nr.ShowDocumentRequest={}))});var md=E(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.LinkedEditingRangeRequest=void 0;var av=Le(),cv;(function(t){t.method="textDocument/linkedEditingRange",t.type=new av.ProtocolRequestType(t.method)})(cv=Fr.LinkedEditingRangeRequest||(Fr.LinkedEditingRangeRequest={}))});var vd=E(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.WillDeleteFilesRequest=pe.DidDeleteFilesNotification=pe.DidRenameFilesNotification=pe.WillRenameFilesRequest=pe.DidCreateFilesNotification=pe.WillCreateFilesRequest=pe.FileOperationPatternKind=void 0;var tr=Le(),uv;(function(t){t.file="file",t.folder="folder"})(uv=pe.FileOperationPatternKind||(pe.FileOperationPatternKind={}));var lv;(function(t){t.method="workspace/willCreateFiles",t.type=new tr.ProtocolRequestType(t.method)})(lv=pe.WillCreateFilesRequest||(pe.WillCreateFilesRequest={}));var dv;(function(t){t.method="workspace/didCreateFiles",t.type=new tr.ProtocolNotificationType(t.method)})(dv=pe.DidCreateFilesNotification||(pe.DidCreateFilesNotification={}));var fv;(function(t){t.method="workspace/willRenameFiles",t.type=new tr.ProtocolRequestType(t.method)})(fv=pe.WillRenameFilesRequest||(pe.WillRenameFilesRequest={}));var hv;(function(t){t.method="workspace/didRenameFiles",t.type=new tr.ProtocolNotificationType(t.method)})(hv=pe.DidRenameFilesNotification||(pe.DidRenameFilesNotification={}));var pv;(function(t){t.method="workspace/didDeleteFiles",t.type=new tr.ProtocolNotificationType(t.method)})(pv=pe.DidDeleteFilesNotification||(pe.DidDeleteFilesNotification={}));var gv;(function(t){t.method="workspace/willDeleteFiles",t.type=new tr.ProtocolRequestType(t.method)})(gv=pe.WillDeleteFilesRequest||(pe.WillDeleteFilesRequest={}))});var yd=E(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.MonikerRequest=Et.MonikerKind=Et.UniquenessLevel=void 0;var mv=Le(),vv;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(vv=Et.UniquenessLevel||(Et.UniquenessLevel={}));var yv;(function(t){t.import="import",t.export="export",t.local="local"})(yv=Et.MonikerKind||(Et.MonikerKind={}));var Rv;(function(t){t.method="textDocument/moniker",t.type=new mv.ProtocolRequestType(t.method)})(Rv=Et.MonikerRequest||(Et.MonikerRequest={}))});var Td=E(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});h.DocumentLinkRequest=h.CodeLensRefreshRequest=h.CodeLensResolveRequest=h.CodeLensRequest=h.WorkspaceSymbolRequest=h.CodeActionResolveRequest=h.CodeActionRequest=h.DocumentSymbolRequest=h.DocumentHighlightRequest=h.ReferencesRequest=h.DefinitionRequest=h.SignatureHelpRequest=h.SignatureHelpTriggerKind=h.HoverRequest=h.CompletionResolveRequest=h.CompletionRequest=h.CompletionTriggerKind=h.PublishDiagnosticsNotification=h.WatchKind=h.FileChangeType=h.DidChangeWatchedFilesNotification=h.WillSaveTextDocumentWaitUntilRequest=h.WillSaveTextDocumentNotification=h.TextDocumentSaveReason=h.DidSaveTextDocumentNotification=h.DidCloseTextDocumentNotification=h.DidChangeTextDocumentNotification=h.TextDocumentContentChangeEvent=h.DidOpenTextDocumentNotification=h.TextDocumentSyncKind=h.TelemetryEventNotification=h.LogMessageNotification=h.ShowMessageRequest=h.ShowMessageNotification=h.MessageType=h.DidChangeConfigurationNotification=h.ExitNotification=h.ShutdownRequest=h.InitializedNotification=h.InitializeError=h.InitializeRequest=h.WorkDoneProgressOptions=h.TextDocumentRegistrationOptions=h.StaticRegistrationOptions=h.FailureHandlingKind=h.ResourceOperationKind=h.UnregistrationRequest=h.RegistrationRequest=h.DocumentSelector=h.DocumentFilter=void 0;h.MonikerRequest=h.MonikerKind=h.UniquenessLevel=h.WillDeleteFilesRequest=h.DidDeleteFilesNotification=h.WillRenameFilesRequest=h.DidRenameFilesNotification=h.WillCreateFilesRequest=h.DidCreateFilesNotification=h.FileOperationPatternKind=h.LinkedEditingRangeRequest=h.ShowDocumentRequest=h.SemanticTokensRegistrationType=h.SemanticTokensRefreshRequest=h.SemanticTokensRangeRequest=h.SemanticTokensDeltaRequest=h.SemanticTokensRequest=h.TokenFormat=h.SemanticTokens=h.SemanticTokenModifiers=h.SemanticTokenTypes=h.CallHierarchyPrepareRequest=h.CallHierarchyOutgoingCallsRequest=h.CallHierarchyIncomingCallsRequest=h.WorkDoneProgressCancelNotification=h.WorkDoneProgressCreateRequest=h.WorkDoneProgress=h.SelectionRangeRequest=h.DeclarationRequest=h.FoldingRangeRequest=h.ColorPresentationRequest=h.DocumentColorRequest=h.ConfigurationRequest=h.DidChangeWorkspaceFoldersNotification=h.WorkspaceFoldersRequest=h.TypeDefinitionRequest=h.ImplementationRequest=h.ApplyWorkspaceEditRequest=h.ExecuteCommandRequest=h.PrepareRenameRequest=h.RenameRequest=h.PrepareSupportDefaultBehavior=h.DocumentOnTypeFormattingRequest=h.DocumentRangeFormattingRequest=h.DocumentFormattingRequest=h.DocumentLinkResolveRequest=void 0;var fn=ed(),V=Le(),Cv=td();Object.defineProperty(h,"ImplementationRequest",{enumerable:!0,get:function(){return Cv.ImplementationRequest}});var _v=nd();Object.defineProperty(h,"TypeDefinitionRequest",{enumerable:!0,get:function(){return _v.TypeDefinitionRequest}});var Rd=id();Object.defineProperty(h,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Rd.WorkspaceFoldersRequest}});Object.defineProperty(h,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Rd.DidChangeWorkspaceFoldersNotification}});var wv=od();Object.defineProperty(h,"ConfigurationRequest",{enumerable:!0,get:function(){return wv.ConfigurationRequest}});var Cd=ad();Object.defineProperty(h,"DocumentColorRequest",{enumerable:!0,get:function(){return Cd.DocumentColorRequest}});Object.defineProperty(h,"ColorPresentationRequest",{enumerable:!0,get:function(){return Cd.ColorPresentationRequest}});var Tv=cd();Object.defineProperty(h,"FoldingRangeRequest",{enumerable:!0,get:function(){return Tv.FoldingRangeRequest}});var Sv=ud();Object.defineProperty(h,"DeclarationRequest",{enumerable:!0,get:function(){return Sv.DeclarationRequest}});var bv=ld();Object.defineProperty(h,"SelectionRangeRequest",{enumerable:!0,get:function(){return bv.SelectionRangeRequest}});var Ds=fd();Object.defineProperty(h,"WorkDoneProgress",{enumerable:!0,get:function(){return Ds.WorkDoneProgress}});Object.defineProperty(h,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Ds.WorkDoneProgressCreateRequest}});Object.defineProperty(h,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Ds.WorkDoneProgressCancelNotification}});var qs=hd();Object.defineProperty(h,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return qs.CallHierarchyIncomingCallsRequest}});Object.defineProperty(h,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return qs.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(h,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return qs.CallHierarchyPrepareRequest}});var Bt=pd();Object.defineProperty(h,"SemanticTokenTypes",{enumerable:!0,get:function(){return Bt.SemanticTokenTypes}});Object.defineProperty(h,"SemanticTokenModifiers",{enumerable:!0,get:function(){return Bt.SemanticTokenModifiers}});Object.defineProperty(h,"SemanticTokens",{enumerable:!0,get:function(){return Bt.SemanticTokens}});Object.defineProperty(h,"TokenFormat",{enumerable:!0,get:function(){return Bt.TokenFormat}});Object.defineProperty(h,"SemanticTokensRequest",{enumerable:!0,get:function(){return Bt.SemanticTokensRequest}});Object.defineProperty(h,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Bt.SemanticTokensDeltaRequest}});Object.defineProperty(h,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Bt.SemanticTokensRangeRequest}});Object.defineProperty(h,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Bt.SemanticTokensRefreshRequest}});Object.defineProperty(h,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Bt.SemanticTokensRegistrationType}});var Pv=gd();Object.defineProperty(h,"ShowDocumentRequest",{enumerable:!0,get:function(){return Pv.ShowDocumentRequest}});var Ev=md();Object.defineProperty(h,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return Ev.LinkedEditingRangeRequest}});var Nn=vd();Object.defineProperty(h,"FileOperationPatternKind",{enumerable:!0,get:function(){return Nn.FileOperationPatternKind}});Object.defineProperty(h,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Nn.DidCreateFilesNotification}});Object.defineProperty(h,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Nn.WillCreateFilesRequest}});Object.defineProperty(h,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Nn.DidRenameFilesNotification}});Object.defineProperty(h,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Nn.WillRenameFilesRequest}});Object.defineProperty(h,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Nn.DidDeleteFilesNotification}});Object.defineProperty(h,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Nn.WillDeleteFilesRequest}});var Os=yd();Object.defineProperty(h,"UniquenessLevel",{enumerable:!0,get:function(){return Os.UniquenessLevel}});Object.defineProperty(h,"MonikerKind",{enumerable:!0,get:function(){return Os.MonikerKind}});Object.defineProperty(h,"MonikerRequest",{enumerable:!0,get:function(){return Os.MonikerRequest}});var _d;(function(t){function e(n){let r=n;return fn.string(r.language)||fn.string(r.scheme)||fn.string(r.pattern)}t.is=e})(_d=h.DocumentFilter||(h.DocumentFilter={}));var wd;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!fn.string(r)&&!_d.is(r))return!1;return!0}t.is=e})(wd=h.DocumentSelector||(h.DocumentSelector={}));var Dv;(function(t){t.type=new V.ProtocolRequestType("client/registerCapability")})(Dv=h.RegistrationRequest||(h.RegistrationRequest={}));var qv;(function(t){t.type=new V.ProtocolRequestType("client/unregisterCapability")})(qv=h.UnregistrationRequest||(h.UnregistrationRequest={}));var Ov;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Ov=h.ResourceOperationKind||(h.ResourceOperationKind={}));var xv;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(xv=h.FailureHandlingKind||(h.FailureHandlingKind={}));var kv;(function(t){function e(n){let r=n;return r&&fn.string(r.id)&&r.id.length>0}t.hasId=e})(kv=h.StaticRegistrationOptions||(h.StaticRegistrationOptions={}));var Iv;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||wd.is(r.documentSelector))}t.is=e})(Iv=h.TextDocumentRegistrationOptions||(h.TextDocumentRegistrationOptions={}));var Nv;(function(t){function e(r){let i=r;return fn.objectLiteral(i)&&(i.workDoneProgress===void 0||fn.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&fn.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(Nv=h.WorkDoneProgressOptions||(h.WorkDoneProgressOptions={}));var Fv;(function(t){t.type=new V.ProtocolRequestType("initialize")})(Fv=h.InitializeRequest||(h.InitializeRequest={}));var Lv;(function(t){t.unknownProtocolVersion=1})(Lv=h.InitializeError||(h.InitializeError={}));var Av;(function(t){t.type=new V.ProtocolNotificationType("initialized")})(Av=h.InitializedNotification||(h.InitializedNotification={}));var Mv;(function(t){t.type=new V.ProtocolRequestType0("shutdown")})(Mv=h.ShutdownRequest||(h.ShutdownRequest={}));var jv;(function(t){t.type=new V.ProtocolNotificationType0("exit")})(jv=h.ExitNotification||(h.ExitNotification={}));var $v;(function(t){t.type=new V.ProtocolNotificationType("workspace/didChangeConfiguration")})($v=h.DidChangeConfigurationNotification||(h.DidChangeConfigurationNotification={}));var Wv;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(Wv=h.MessageType||(h.MessageType={}));var Hv;(function(t){t.type=new V.ProtocolNotificationType("window/showMessage")})(Hv=h.ShowMessageNotification||(h.ShowMessageNotification={}));var Kv;(function(t){t.type=new V.ProtocolRequestType("window/showMessageRequest")})(Kv=h.ShowMessageRequest||(h.ShowMessageRequest={}));var zv;(function(t){t.type=new V.ProtocolNotificationType("window/logMessage")})(zv=h.LogMessageNotification||(h.LogMessageNotification={}));var Uv;(function(t){t.type=new V.ProtocolNotificationType("telemetry/event")})(Uv=h.TelemetryEventNotification||(h.TelemetryEventNotification={}));var Bv;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Bv=h.TextDocumentSyncKind||(h.TextDocumentSyncKind={}));var Gv;(function(t){t.method="textDocument/didOpen",t.type=new V.ProtocolNotificationType(t.method)})(Gv=h.DidOpenTextDocumentNotification||(h.DidOpenTextDocumentNotification={}));var Xv;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(Xv=h.TextDocumentContentChangeEvent||(h.TextDocumentContentChangeEvent={}));var Vv;(function(t){t.method="textDocument/didChange",t.type=new V.ProtocolNotificationType(t.method)})(Vv=h.DidChangeTextDocumentNotification||(h.DidChangeTextDocumentNotification={}));var Jv;(function(t){t.method="textDocument/didClose",t.type=new V.ProtocolNotificationType(t.method)})(Jv=h.DidCloseTextDocumentNotification||(h.DidCloseTextDocumentNotification={}));var Qv;(function(t){t.method="textDocument/didSave",t.type=new V.ProtocolNotificationType(t.method)})(Qv=h.DidSaveTextDocumentNotification||(h.DidSaveTextDocumentNotification={}));var Yv;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Yv=h.TextDocumentSaveReason||(h.TextDocumentSaveReason={}));var Zv;(function(t){t.method="textDocument/willSave",t.type=new V.ProtocolNotificationType(t.method)})(Zv=h.WillSaveTextDocumentNotification||(h.WillSaveTextDocumentNotification={}));var ey;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new V.ProtocolRequestType(t.method)})(ey=h.WillSaveTextDocumentWaitUntilRequest||(h.WillSaveTextDocumentWaitUntilRequest={}));var ty;(function(t){t.type=new V.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(ty=h.DidChangeWatchedFilesNotification||(h.DidChangeWatchedFilesNotification={}));var ny;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(ny=h.FileChangeType||(h.FileChangeType={}));var ry;(function(t){t.Create=1,t.Change=2,t.Delete=4})(ry=h.WatchKind||(h.WatchKind={}));var iy;(function(t){t.type=new V.ProtocolNotificationType("textDocument/publishDiagnostics")})(iy=h.PublishDiagnosticsNotification||(h.PublishDiagnosticsNotification={}));var oy;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(oy=h.CompletionTriggerKind||(h.CompletionTriggerKind={}));var sy;(function(t){t.method="textDocument/completion",t.type=new V.ProtocolRequestType(t.method)})(sy=h.CompletionRequest||(h.CompletionRequest={}));var ay;(function(t){t.method="completionItem/resolve",t.type=new V.ProtocolRequestType(t.method)})(ay=h.CompletionResolveRequest||(h.CompletionResolveRequest={}));var cy;(function(t){t.method="textDocument/hover",t.type=new V.ProtocolRequestType(t.method)})(cy=h.HoverRequest||(h.HoverRequest={}));var uy;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(uy=h.SignatureHelpTriggerKind||(h.SignatureHelpTriggerKind={}));var ly;(function(t){t.method="textDocument/signatureHelp",t.type=new V.ProtocolRequestType(t.method)})(ly=h.SignatureHelpRequest||(h.SignatureHelpRequest={}));var dy;(function(t){t.method="textDocument/definition",t.type=new V.ProtocolRequestType(t.method)})(dy=h.DefinitionRequest||(h.DefinitionRequest={}));var fy;(function(t){t.method="textDocument/references",t.type=new V.ProtocolRequestType(t.method)})(fy=h.ReferencesRequest||(h.ReferencesRequest={}));var hy;(function(t){t.method="textDocument/documentHighlight",t.type=new V.ProtocolRequestType(t.method)})(hy=h.DocumentHighlightRequest||(h.DocumentHighlightRequest={}));var py;(function(t){t.method="textDocument/documentSymbol",t.type=new V.ProtocolRequestType(t.method)})(py=h.DocumentSymbolRequest||(h.DocumentSymbolRequest={}));var gy;(function(t){t.method="textDocument/codeAction",t.type=new V.ProtocolRequestType(t.method)})(gy=h.CodeActionRequest||(h.CodeActionRequest={}));var my;(function(t){t.method="codeAction/resolve",t.type=new V.ProtocolRequestType(t.method)})(my=h.CodeActionResolveRequest||(h.CodeActionResolveRequest={}));var vy;(function(t){t.method="workspace/symbol",t.type=new V.ProtocolRequestType(t.method)})(vy=h.WorkspaceSymbolRequest||(h.WorkspaceSymbolRequest={}));var yy;(function(t){t.method="textDocument/codeLens",t.type=new V.ProtocolRequestType(t.method)})(yy=h.CodeLensRequest||(h.CodeLensRequest={}));var Ry;(function(t){t.method="codeLens/resolve",t.type=new V.ProtocolRequestType(t.method)})(Ry=h.CodeLensResolveRequest||(h.CodeLensResolveRequest={}));var Cy;(function(t){t.method="workspace/codeLens/refresh",t.type=new V.ProtocolRequestType0(t.method)})(Cy=h.CodeLensRefreshRequest||(h.CodeLensRefreshRequest={}));var _y;(function(t){t.method="textDocument/documentLink",t.type=new V.ProtocolRequestType(t.method)})(_y=h.DocumentLinkRequest||(h.DocumentLinkRequest={}));var wy;(function(t){t.method="documentLink/resolve",t.type=new V.ProtocolRequestType(t.method)})(wy=h.DocumentLinkResolveRequest||(h.DocumentLinkResolveRequest={}));var Ty;(function(t){t.method="textDocument/formatting",t.type=new V.ProtocolRequestType(t.method)})(Ty=h.DocumentFormattingRequest||(h.DocumentFormattingRequest={}));var Sy;(function(t){t.method="textDocument/rangeFormatting",t.type=new V.ProtocolRequestType(t.method)})(Sy=h.DocumentRangeFormattingRequest||(h.DocumentRangeFormattingRequest={}));var by;(function(t){t.method="textDocument/onTypeFormatting",t.type=new V.ProtocolRequestType(t.method)})(by=h.DocumentOnTypeFormattingRequest||(h.DocumentOnTypeFormattingRequest={}));var Py;(function(t){t.Identifier=1})(Py=h.PrepareSupportDefaultBehavior||(h.PrepareSupportDefaultBehavior={}));var Ey;(function(t){t.method="textDocument/rename",t.type=new V.ProtocolRequestType(t.method)})(Ey=h.RenameRequest||(h.RenameRequest={}));var Dy;(function(t){t.method="textDocument/prepareRename",t.type=new V.ProtocolRequestType(t.method)})(Dy=h.PrepareRenameRequest||(h.PrepareRenameRequest={}));var qy;(function(t){t.type=new V.ProtocolRequestType("workspace/executeCommand")})(qy=h.ExecuteCommandRequest||(h.ExecuteCommandRequest={}));var Oy;(function(t){t.type=new V.ProtocolRequestType("workspace/applyEdit")})(Oy=h.ApplyWorkspaceEditRequest||(h.ApplyWorkspaceEditRequest={}))});var bd=E(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.createProtocolConnection=void 0;var Sd=Zn();function xy(t,e,n,r){return Sd.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),Sd.createMessageConnection(t,e,n,r)}wi.createProtocolConnection=xy});var Pd=E(Qe=>{"use strict";var ky=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ti=Qe&&Qe.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&ky(e,t,n)};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.LSPErrorCodes=Qe.createProtocolConnection=void 0;Ti(Zn(),Qe);Ti(Ql(),Qe);Ti(Le(),Qe);Ti(Td(),Qe);var Iy=bd();Object.defineProperty(Qe,"createProtocolConnection",{enumerable:!0,get:function(){return Iy.createProtocolConnection}});var Ny;(function(t){t.lspReservedErrorRangeStart=-32899,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(Ny=Qe.LSPErrorCodes||(Qe.LSPErrorCodes={}))});var ge=E(It=>{"use strict";var Fy=It&&It.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ed=It&&It.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Fy(e,t,n)};Object.defineProperty(It,"__esModule",{value:!0});It.createProtocolConnection=void 0;var Ly=_s();Ed(_s(),It);Ed(Pd(),It);function Ay(t,e,n,r){return Ly.createMessageConnection(t,e,n,r)}It.createProtocolConnection=Ay});var Is=E(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.toJSONObject=rr.ConfigurationFeature=void 0;var xs=require("vscode"),My=ge(),ks=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(My.ConfigurationRequest.type,(n,r)=>{let i=c=>{let f=[];for(let d of c.items){let v=d.scopeUri!==void 0&&d.scopeUri!==null?this._client.protocol2CodeConverter.asUri(d.scopeUri):void 0;f.push(this.getConfiguration(v,d.section!==null?d.section:void 0))}return f},s=e.clientOptions.middleware.workspace;return s&&s.configuration?s.configuration(n,r,i):i(n,r)})}getConfiguration(e,n){let r=null;if(n){let i=n.lastIndexOf(".");if(i===-1)r=nr(xs.workspace.getConfiguration(void 0,e).get(n));else{let s=xs.workspace.getConfiguration(n.substr(0,i),e);s&&(r=nr(s.get(n.substr(i+1))))}}else{let i=xs.workspace.getConfiguration(void 0,e);r={};for(let s of Object.keys(i))i.has(s)&&(r[s]=nr(i.get(s)))}return r===void 0&&(r=null),r}dispose(){}};rr.ConfigurationFeature=ks;function nr(t){if(t){if(Array.isArray(t))return t.map(nr);if(typeof t=="object"){let e=Object.create(null);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=nr(t[n]));return e}}return t}rr.toJSONObject=nr});var Ls=E(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});var jy=require("vscode"),Ns=class extends jy.CompletionItem{constructor(e){super(e)}};Fs.default=Ns});var js=E(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});var $y=require("vscode"),As=class extends $y.CodeLens{constructor(e){super(e)}};Ms.default=As});var Hs=E(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var Wy=require("vscode"),$s=class extends Wy.DocumentLink{constructor(e,n){super(e,n)}};Ws.default=$s});var Us=E(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});var Hy=require("vscode"),Ks=class extends Hy.CodeAction{constructor(e,n){super(e),this.data=n}};zs.default=Ks});var Xs=E(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.ProtocolDiagnostic=Fn.DiagnosticCode=void 0;var Ky=require("vscode"),Bs=an(),zy;(function(t){function e(n){let r=n;return r!=null&&(Bs.number(r.value)||Bs.string(r.value))&&Bs.string(r.target)}t.is=e})(zy=Fn.DiagnosticCode||(Fn.DiagnosticCode={}));var Gs=class extends Ky.Diagnostic{constructor(e,n,r,i){super(e,n,r),this.data=i,this.hasDiagnosticCode=!1}};Fn.ProtocolDiagnostic=Gs});var Qs=E(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var Uy=require("vscode"),Vs=class extends Uy.CallHierarchyItem{constructor(e,n,r,i,s,c,f){super(e,n,r,i,s,c),f!==void 0&&(this.data=f)}};Js.default=Vs});var qd=E(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.createConverter=void 0;var Ae=require("vscode"),ie=ge(),Lr=an(),By=Ls(),Gy=js(),Xy=Hs(),Vy=Us(),Dd=Xs(),Jy=Qs(),Qy=ge(),Ys;(function(t){function e(n){let r=n;return r&&!!r.inserting&&!!r.replacing}t.is=e})(Ys||(Ys={}));function Yy(t){let n=t||(o=>o.toString());function r(o){return n(o)}function i(o){return{uri:n(o.uri)}}function s(o){return{uri:n(o.uri),version:o.version}}function c(o){return{textDocument:{uri:n(o.uri),languageId:o.languageId,version:o.version,text:o.getText()}}}function f(o){let a=o;return!!a.document&&!!a.contentChanges}function d(o){let a=o;return!!a.uri&&!!a.version}function v(o){if(d(o))return{textDocument:{uri:n(o.uri),version:o.version},contentChanges:[{text:o.getText()}]};if(f(o)){let a=o.document;return{textDocument:{uri:n(a.uri),version:a.version},contentChanges:o.contentChanges.map(S=>{let I=S.range;return{range:{start:{line:I.start.line,character:I.start.character},end:{line:I.end.line,character:I.end.character}},rangeLength:S.rangeLength,text:S.text}})}}else throw Error("Unsupported text document change parameter")}function R(o){return{textDocument:i(o)}}function w(o,a=!1){let y={textDocument:i(o)};return a&&(y.text=o.getText()),y}function T(o){switch(o){case Ae.TextDocumentSaveReason.Manual:return ie.TextDocumentSaveReason.Manual;case Ae.TextDocumentSaveReason.AfterDelay:return ie.TextDocumentSaveReason.AfterDelay;case Ae.TextDocumentSaveReason.FocusOut:return ie.TextDocumentSaveReason.FocusOut}return ie.TextDocumentSaveReason.Manual}function b(o){return{textDocument:i(o.document),reason:T(o.reason)}}function F(o){return{files:o.files.map(a=>({uri:n(a)}))}}function N(o){return{files:o.files.map(a=>({oldUri:n(a.oldUri),newUri:n(a.newUri)}))}}function z(o){return{files:o.files.map(a=>({uri:n(a)}))}}function x(o){return{files:o.files.map(a=>({uri:n(a)}))}}function k(o){return{files:o.files.map(a=>({oldUri:n(a.oldUri),newUri:n(a.newUri)}))}}function O(o){return{files:o.files.map(a=>({uri:n(a)}))}}function q(o,a){return{textDocument:i(o),position:et(a)}}function U(o){switch(o){case Ae.CompletionTriggerKind.TriggerCharacter:return ie.CompletionTriggerKind.TriggerCharacter;case Ae.CompletionTriggerKind.TriggerForIncompleteCompletions:return ie.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ie.CompletionTriggerKind.Invoked}}function Te(o,a,y){return{textDocument:i(o),position:et(a),context:{triggerKind:U(y.triggerKind),triggerCharacter:y.triggerCharacter}}}function De(o){switch(o){case Ae.SignatureHelpTriggerKind.Invoke:return ie.SignatureHelpTriggerKind.Invoked;case Ae.SignatureHelpTriggerKind.TriggerCharacter:return ie.SignatureHelpTriggerKind.TriggerCharacter;case Ae.SignatureHelpTriggerKind.ContentChange:return ie.SignatureHelpTriggerKind.ContentChange}}function qe(o){return{label:o.label}}function me(o){return o.map(qe)}function xe(o){return{label:o.label,parameters:me(o.parameters)}}function ke(o){return o.map(xe)}function Ze(o){return o===void 0?o:{signatures:ke(o.signatures),activeSignature:o.activeSignature,activeParameter:o.activeParameter}}function Ge(o,a,y){return{textDocument:i(o),position:et(a),context:{isRetrigger:y.isRetrigger,triggerCharacter:y.triggerCharacter,triggerKind:De(y.triggerKind),activeSignatureHelp:Ze(y.activeSignatureHelp)}}}function et(o){return{line:o.line,character:o.character}}function Xe(o){return o==null?o:{line:o.line,character:o.character}}function Rt(o){let a=[];for(let y of o)a.push(Xe(y));return a}function le(o){return o==null?o:{start:Xe(o.start),end:Xe(o.end)}}function Ct(o){return o==null?o:ie.Location.create(r(o.uri),le(o.range))}function Oe(o){switch(o){case Ae.DiagnosticSeverity.Error:return ie.DiagnosticSeverity.Error;case Ae.DiagnosticSeverity.Warning:return ie.DiagnosticSeverity.Warning;case Ae.DiagnosticSeverity.Information:return ie.DiagnosticSeverity.Information;case Ae.DiagnosticSeverity.Hint:return ie.DiagnosticSeverity.Hint}}function it(o){if(!o)return;let a=[];for(let y of o){let S=ct(y);S!==void 0&&a.push(S)}return a.length>0?a:void 0}function ct(o){switch(o){case Ae.DiagnosticTag.Unnecessary:return ie.DiagnosticTag.Unnecessary;case Ae.DiagnosticTag.Deprecated:return ie.DiagnosticTag.Deprecated;default:return}}function _t(o){return{message:o.message,location:Ct(o.location)}}function Qt(o){return o.map(_t)}function Yt(o){if(o!=null)return Lr.number(o)||Lr.string(o)?o:{value:o.value,target:r(o.target)}}function Ft(o){let a=ie.Diagnostic.create(le(o.range),o.message),y=o instanceof Dd.ProtocolDiagnostic?o:void 0;y!==void 0&&y.data!==void 0&&(a.data=y.data);let S=Yt(o.code);return Dd.DiagnosticCode.is(S)?y!==void 0&&y.hasDiagnosticCode?a.code=S:(a.code=S.value,a.codeDescription={href:S.target}):a.code=S,Lr.number(o.severity)&&(a.severity=Oe(o.severity)),Array.isArray(o.tags)&&(a.tags=it(o.tags)),o.relatedInformation&&(a.relatedInformation=Qt(o.relatedInformation)),o.source&&(a.source=o.source),a}function Lt(o){return o==null?o:o.map(Ft)}function Ot(o,a){switch(o){case"$string":return a;case ie.MarkupKind.PlainText:return{kind:o,value:a};case ie.MarkupKind.Markdown:return{kind:o,value:a.value};default:return`Unsupported Markup content received. Kind is: ${o}`}}function xt(o){switch(o){case Ae.CompletionItemTag.Deprecated:return ie.CompletionItemTag.Deprecated}}function At(o){if(o===void 0)return o;let a=[];for(let y of o){let S=xt(y);S!==void 0&&a.push(S)}return a}function Zt(o,a){return a!==void 0?a:o+1}function vn(o){let a={label:o.label},y=o instanceof By.default?o:void 0;o.detail&&(a.detail=o.detail),o.documentation&&(!y||y.documentationFormat==="$string"?a.documentation=o.documentation:a.documentation=Ot(y.documentationFormat,o.documentation)),o.filterText&&(a.filterText=o.filterText),ut(a,o),Lr.number(o.kind)&&(a.kind=Zt(o.kind,y&&y.originalItemKind)),o.sortText&&(a.sortText=o.sortText),o.additionalTextEdits&&(a.additionalTextEdits=yn(o.additionalTextEdits)),o.commitCharacters&&(a.commitCharacters=o.commitCharacters.slice()),o.command&&(a.command=ft(o.command)),(o.preselect===!0||o.preselect===!1)&&(a.preselect=o.preselect);let S=At(o.tags);if(y){if(y.data!==void 0&&(a.data=y.data),y.deprecated===!0||y.deprecated===!1){if(y.deprecated===!0&&S!==void 0&&S.length>0){let I=S.indexOf(Ae.CompletionItemTag.Deprecated);I!==-1&&S.splice(I,1)}a.deprecated=y.deprecated}y.insertTextMode!==void 0&&(a.insertTextMode=y.insertTextMode)}return S!==void 0&&S.length>0&&(a.tags=S),a.insertTextMode===void 0&&o.keepWhitespace===!0&&(a.insertTextMode=Qy.InsertTextMode.adjustIndentation),a}function ut(o,a){let y=ie.InsertTextFormat.PlainText,S,I;a.textEdit?(S=a.textEdit.newText,I=a.textEdit.range):a.insertText instanceof Ae.SnippetString?(y=ie.InsertTextFormat.Snippet,S=a.insertText.value):S=a.insertText,a.range&&(I=a.range),o.insertTextFormat=y,a.fromEdit&&S!==void 0&&I!==void 0?o.textEdit=en(S,I):o.insertText=S}function en(o,a){return Ys.is(a)?ie.InsertReplaceEdit.create(o,le(a.inserting),le(a.replacing)):{newText:o,range:le(a)}}function lt(o){return{range:le(o.range),newText:o.newText}}function yn(o){return o==null?o:o.map(lt)}function ye(o){return o<=Ae.SymbolKind.TypeParameter?o+1:ie.SymbolKind.Property}function tt(o){return o}function tn(o){return o.map(tt)}function Rn(o,a,y){return{textDocument:i(o),position:et(a),context:{includeDeclaration:y.includeDeclaration}}}function dt(o){let a=ie.CodeAction.create(o.title);if(o instanceof Vy.default&&o.data!==void 0&&(a.data=o.data),o.kind!==void 0&&(a.kind=Mt(o.kind)),o.diagnostics!==void 0&&(a.diagnostics=Lt(o.diagnostics)),o.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return o.command!==void 0&&(a.command=ft(o.command)),o.isPreferred!==void 0&&(a.isPreferred=o.isPreferred),o.disabled!==void 0&&(a.disabled={reason:o.disabled.reason}),a}function nn(o){if(o==null)return o;let a;return o.only&&Lr.string(o.only.value)&&(a=[o.only.value]),ie.CodeActionContext.create(Lt(o.diagnostics),a)}function Mt(o){if(o!=null)return o.value}function ft(o){let a=ie.Command.create(o.title,o.command);return o.arguments&&(a.arguments=o.arguments),a}function jt(o){let a=ie.CodeLens.create(le(o.range));return o.command&&(a.command=ft(o.command)),o instanceof Gy.default&&o.data&&(a.data=o.data),a}function ht(o,a){let y={tabSize:o.tabSize,insertSpaces:o.insertSpaces};return a.trimTrailingWhitespace&&(y.trimTrailingWhitespace=!0),a.trimFinalNewlines&&(y.trimFinalNewlines=!0),a.insertFinalNewline&&(y.insertFinalNewline=!0),y}function C(o){return{textDocument:i(o)}}function p(o){return{textDocument:i(o)}}function l(o){let a=ie.DocumentLink.create(le(o.range));o.target&&(a.target=r(o.target)),o.tooltip!==void 0&&(a.tooltip=o.tooltip);let y=o instanceof Xy.default?o:void 0;return y&&y.data&&(a.data=y.data),a}function g(o){return{textDocument:i(o)}}function _(o){let a={name:o.name,kind:ye(o.kind),uri:r(o.uri),range:le(o.range),selectionRange:le(o.selectionRange)};return o.detail!==void 0&&o.detail.length>0&&(a.detail=o.detail),o.tags!==void 0&&(a.tags=tn(o.tags)),o instanceof Jy.default&&o.data!==void 0&&(a.data=o.data),a}return{asUri:r,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:c,asChangeTextDocumentParams:v,asCloseTextDocumentParams:R,asSaveTextDocumentParams:w,asWillSaveTextDocumentParams:b,asDidCreateFilesParams:F,asDidRenameFilesParams:N,asDidDeleteFilesParams:z,asWillCreateFilesParams:x,asWillRenameFilesParams:k,asWillDeleteFilesParams:O,asTextDocumentPositionParams:q,asCompletionParams:Te,asSignatureHelpParams:Ge,asWorkerPosition:et,asRange:le,asPosition:Xe,asPositions:Rt,asLocation:Ct,asDiagnosticSeverity:Oe,asDiagnosticTag:ct,asDiagnostic:Ft,asDiagnostics:Lt,asCompletionItem:vn,asTextEdit:lt,asSymbolKind:ye,asSymbolTag:tt,asSymbolTags:tn,asReferenceParams:Rn,asCodeAction:dt,asCodeActionContext:nn,asCommand:ft,asCodeLens:jt,asFormattingOptions:ht,asDocumentSymbolParams:C,asCodeLensParams:p,asDocumentLink:l,asDocumentLinkParams:g,asCallHierarchyItem:_}}Si.createConverter=Yy});var kd=E(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.createConverter=void 0;var $=require("vscode"),Z=ge(),Dt=an(),Zy=Ls(),eR=js(),tR=Hs(),nR=Us(),Od=Xs(),rR=Qs(),xd=ge(),bi;(function(t){function e(n){let r=n;return r&&Dt.string(r.language)&&Dt.string(r.value)}t.is=e})(bi||(bi={}));function iR(t,e){let r=t||(u=>$.Uri.parse(u));function i(u){return r(u)}function s(u){return u.map(c)}function c(u){let P=new Od.ProtocolDiagnostic(T(u.range),u.message,F(u.severity),u.data);return u.code!==void 0&&(Z.CodeDescription.is(u.codeDescription)?P.code={value:u.code,target:i(u.codeDescription.href)}:Od.DiagnosticCode.is(u.code)?(P.hasDiagnosticCode=!0,P.code={value:u.code.value,target:i(u.code.target)}):P.code=u.code),u.source&&(P.source=u.source),u.relatedInformation&&(P.relatedInformation=f(u.relatedInformation)),Array.isArray(u.tags)&&(P.tags=v(u.tags)),P}function f(u){return u.map(d)}function d(u){return new $.DiagnosticRelatedInformation(le(u.location),u.message)}function v(u){if(!u)return;let P=[];for(let K of u){let te=R(K);te!==void 0&&P.push(te)}return P.length>0?P:void 0}function R(u){switch(u){case Z.DiagnosticTag.Unnecessary:return $.DiagnosticTag.Unnecessary;case Z.DiagnosticTag.Deprecated:return $.DiagnosticTag.Deprecated;default:return}}function w(u){if(u)return new $.Position(u.line,u.character)}function T(u){if(u)return new $.Range(w(u.start),w(u.end))}function b(u){return u.map(P=>T(P))}function F(u){if(u==null)return $.DiagnosticSeverity.Error;switch(u){case Z.DiagnosticSeverity.Error:return $.DiagnosticSeverity.Error;case Z.DiagnosticSeverity.Warning:return $.DiagnosticSeverity.Warning;case Z.DiagnosticSeverity.Information:return $.DiagnosticSeverity.Information;case Z.DiagnosticSeverity.Hint:return $.DiagnosticSeverity.Hint}return $.DiagnosticSeverity.Error}function N(u){if(Dt.string(u))return x(u);if(bi.is(u))return x().appendCodeblock(u.value,u.language);if(Array.isArray(u)){let P=[];for(let K of u){let te=x();bi.is(K)?te.appendCodeblock(K.value,K.language):te.appendMarkdown(K),P.push(te)}return P}else{let P;switch(u.kind){case Z.MarkupKind.Markdown:return x(u.value);case Z.MarkupKind.PlainText:return P=x(),P.appendText(u.value),P;default:return P=x(),P.appendText(`Unsupported Markup content received. Kind is: ${u.kind}`),P}}}function z(u){if(Dt.string(u))return u;switch(u.kind){case Z.MarkupKind.Markdown:return x(u.value);case Z.MarkupKind.PlainText:return u.value;default:return`Unsupported Markup content received. Kind is: ${u.kind}`}}function x(u){let P=new $.MarkdownString(u);return e===!0&&(P.isTrusted=e),P}function k(u){if(u)return new $.Hover(N(u.contents),T(u.range))}function O(u){if(!u)return;if(Array.isArray(u))return u.map(De);let P=u;return new $.CompletionList(P.items.map(De),P.isIncomplete)}function q(u){return Z.CompletionItemKind.Text<=u&&u<=Z.CompletionItemKind.TypeParameter?[u-1,void 0]:[$.CompletionItemKind.Text,u]}function U(u){switch(u){case Z.CompletionItemTag.Deprecated:return $.CompletionItemTag.Deprecated}}function Te(u){if(u==null)return[];let P=[];for(let K of u){let te=U(K);te!==void 0&&P.push(te)}return P}function De(u){let P=Te(u.tags),K=new Zy.default(u.label);u.detail&&(K.detail=u.detail),u.documentation&&(K.documentation=z(u.documentation),K.documentationFormat=Dt.string(u.documentation)?"$string":u.documentation.kind),u.filterText&&(K.filterText=u.filterText);let te=qe(u);if(te&&(K.insertText=te.text,K.range=te.range,K.fromEdit=te.fromEdit),Dt.number(u.kind)){let[ae,_n]=q(u.kind);K.kind=ae,_n&&(K.originalItemKind=_n)}return u.sortText&&(K.sortText=u.sortText),u.additionalTextEdits&&(K.additionalTextEdits=ke(u.additionalTextEdits)),Dt.stringArray(u.commitCharacters)&&(K.commitCharacters=u.commitCharacters.slice()),u.command&&(K.command=lt(u.command)),(u.deprecated===!0||u.deprecated===!1)&&(K.deprecated=u.deprecated,u.deprecated===!0&&P.push($.CompletionItemTag.Deprecated)),(u.preselect===!0||u.preselect===!1)&&(K.preselect=u.preselect),u.data!==void 0&&(K.data=u.data),P.length>0&&(K.tags=P),u.insertTextMode!==void 0&&(K.insertTextMode=u.insertTextMode,u.insertTextMode===xd.InsertTextMode.asIs&&(K.keepWhitespace=!0)),K}function qe(u){return u.textEdit?u.insertTextFormat===Z.InsertTextFormat.Snippet?{text:new $.SnippetString(u.textEdit.newText),range:me(u.textEdit),fromEdit:!0}:{text:u.textEdit.newText,range:me(u.textEdit),fromEdit:!0}:u.insertText?u.insertTextFormat===Z.InsertTextFormat.Snippet?{text:new $.SnippetString(u.insertText),fromEdit:!1}:{text:u.insertText,fromEdit:!1}:void 0}function me(u){return Z.InsertReplaceEdit.is(u)?{inserting:T(u.insert),replacing:T(u.replace)}:T(u.range)}function xe(u){if(u)return new $.TextEdit(T(u.range),u.newText)}function ke(u){if(u)return u.map(xe)}function Ze(u){if(!u)return;let P=new $.SignatureHelp;return Dt.number(u.activeSignature)?P.activeSignature=u.activeSignature:P.activeSignature=0,Dt.number(u.activeParameter)?P.activeParameter=u.activeParameter:P.activeParameter=0,u.signatures&&(P.signatures=Ge(u.signatures)),P}function Ge(u){return u.map(et)}function et(u){let P=new $.SignatureInformation(u.label);return u.documentation!==void 0&&(P.documentation=z(u.documentation)),u.parameters!==void 0&&(P.parameters=Xe(u.parameters)),u.activeParameter!==void 0&&(P.activeParameter=u.activeParameter),P}function Xe(u){return u.map(Rt)}function Rt(u){let P=new $.ParameterInformation(u.label);return u.documentation&&(P.documentation=z(u.documentation)),P}function le(u){if(u)return new $.Location(r(u.uri),T(u.range))}function Ct(u){if(u)return ct(u)}function Oe(u){if(u)return ct(u)}function it(u){if(!u)return;let P={targetUri:r(u.targetUri),targetRange:T(u.targetRange),originSelectionRange:T(u.originSelectionRange),targetSelectionRange:T(u.targetSelectionRange)};if(!P.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return P}function ct(u){if(u)return Dt.array(u)?u.length===0?[]:Z.LocationLink.is(u[0])?u.map(K=>it(K)):u.map(K=>le(K)):Z.LocationLink.is(u)?[it(u)]:le(u)}function _t(u){if(u)return u.map(P=>le(P))}function Qt(u){if(u)return u.map(Yt)}function Yt(u){let P=new $.DocumentHighlight(T(u.range));return Dt.number(u.kind)&&(P.kind=Ft(u.kind)),P}function Ft(u){switch(u){case Z.DocumentHighlightKind.Text:return $.DocumentHighlightKind.Text;case Z.DocumentHighlightKind.Read:return $.DocumentHighlightKind.Read;case Z.DocumentHighlightKind.Write:return $.DocumentHighlightKind.Write}return $.DocumentHighlightKind.Text}function Lt(u,P){if(u)return u.map(K=>Zt(K,P))}function Ot(u){return u<=Z.SymbolKind.TypeParameter?u-1:$.SymbolKind.Property}function xt(u){switch(u){case Z.SymbolTag.Deprecated:return $.SymbolTag.Deprecated;default:return}}function At(u){if(u==null)return;let P=[];for(let K of u){let te=xt(K);te!==void 0&&P.push(te)}return P.length===0?void 0:P}function Zt(u,P){let K=new $.SymbolInformation(u.name,Ot(u.kind),T(u.location.range),u.location.uri?r(u.location.uri):P);return en(K,u),u.containerName&&(K.containerName=u.containerName),K}function vn(u){if(u!=null)return u.map(ut)}function ut(u){let P=new $.DocumentSymbol(u.name,u.detail||"",Ot(u.kind),T(u.range),T(u.selectionRange));if(en(P,u),u.children!==void 0&&u.children.length>0){let K=[];for(let te of u.children)K.push(ut(te));P.children=K}return P}function en(u,P){u.tags=At(P.tags),P.deprecated&&(u.tags?u.tags.includes($.SymbolTag.Deprecated)||(u.tags=u.tags.concat($.SymbolTag.Deprecated)):u.tags=[$.SymbolTag.Deprecated])}function lt(u){let P={title:u.title,command:u.command};return u.arguments&&(P.arguments=u.arguments),P}function yn(u){if(u)return u.map(lt)}let ye=new Map;ye.set(Z.CodeActionKind.Empty,$.CodeActionKind.Empty),ye.set(Z.CodeActionKind.QuickFix,$.CodeActionKind.QuickFix),ye.set(Z.CodeActionKind.Refactor,$.CodeActionKind.Refactor),ye.set(Z.CodeActionKind.RefactorExtract,$.CodeActionKind.RefactorExtract),ye.set(Z.CodeActionKind.RefactorInline,$.CodeActionKind.RefactorInline),ye.set(Z.CodeActionKind.RefactorRewrite,$.CodeActionKind.RefactorRewrite),ye.set(Z.CodeActionKind.Source,$.CodeActionKind.Source),ye.set(Z.CodeActionKind.SourceOrganizeImports,$.CodeActionKind.SourceOrganizeImports);function tt(u){if(u==null)return;let P=ye.get(u);if(P)return P;let K=u.split(".");P=$.CodeActionKind.Empty;for(let te of K)P=P.append(te);return P}function tn(u){if(u!=null)return u.map(P=>tt(P))}function Rn(u){if(u==null)return;let P=new nR.default(u.title,u.data);return u.kind!==void 0&&(P.kind=tt(u.kind)),u.diagnostics!==void 0&&(P.diagnostics=s(u.diagnostics)),u.edit!==void 0&&(P.edit=Mt(u.edit)),u.command!==void 0&&(P.command=lt(u.command)),u.isPreferred!==void 0&&(P.isPreferred=u.isPreferred),u.disabled!==void 0&&(P.disabled={reason:u.disabled.reason}),P}function dt(u){if(!u)return;let P=new eR.default(T(u.range));return u.command&&(P.command=lt(u.command)),u.data!==void 0&&u.data!==null&&(P.data=u.data),P}function nn(u){if(u)return u.map(P=>dt(P))}function Mt(u){if(!u)return;let P=new Map;if(u.changeAnnotations!==void 0)for(let ae of Object.keys(u.changeAnnotations)){let _n=ft(u.changeAnnotations[ae]);P.set(ae,_n)}let K=ae=>{if(ae!==void 0)return P.get(ae)},te=new $.WorkspaceEdit;if(u.documentChanges)for(let ae of u.documentChanges)if(Z.CreateFile.is(ae))te.createFile(r(ae.uri),ae.options,K(ae.annotationId));else if(Z.RenameFile.is(ae))te.renameFile(r(ae.oldUri),r(ae.newUri),ae.options,K(ae.annotationId));else if(Z.DeleteFile.is(ae))te.deleteFile(r(ae.uri),ae.options,K(ae.annotationId));else if(Z.TextDocumentEdit.is(ae)){let _n=r(ae.textDocument.uri);for(let Kn of ae.edits)xd.AnnotatedTextEdit.is(Kn)?te.replace(_n,T(Kn.range),Kn.newText,K(Kn.annotationId)):te.replace(_n,T(Kn.range),Kn.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(ae,void 0,4)}`);else u.changes&&Object.keys(u.changes).forEach(ae=>{te.set(r(ae),ke(u.changes[ae]))});return te}function ft(u){if(u!==void 0)return{label:u.label,needsConfirmation:!!u.needsConfirmation,description:u.description}}function jt(u){let P=T(u.range),K=u.target?i(u.target):void 0,te=new tR.default(P,K);return u.tooltip!==void 0&&(te.tooltip=u.tooltip),u.data!==void 0&&u.data!==null&&(te.data=u.data),te}function ht(u){if(u)return u.map(jt)}function C(u){return new $.Color(u.red,u.green,u.blue,u.alpha)}function p(u){return new $.ColorInformation(T(u.range),C(u.color))}function l(u){if(Array.isArray(u))return u.map(p)}function g(u){let P=new $.ColorPresentation(u.label);return P.additionalTextEdits=ke(u.additionalTextEdits),u.textEdit&&(P.textEdit=xe(u.textEdit)),P}function _(u){if(Array.isArray(u))return u.map(g)}function o(u){if(u)switch(u){case Z.FoldingRangeKind.Comment:return $.FoldingRangeKind.Comment;case Z.FoldingRangeKind.Imports:return $.FoldingRangeKind.Imports;case Z.FoldingRangeKind.Region:return $.FoldingRangeKind.Region}}function a(u){return new $.FoldingRange(u.startLine,u.endLine,o(u.kind))}function y(u){if(Array.isArray(u))return u.map(a)}function S(u){return new $.SelectionRange(T(u.range),u.parent?S(u.parent):void 0)}function I(u){if(!Array.isArray(u))return[];let P=[];for(let K of u)P.push(S(K));return P}function W(u){if(u===null)return;let P=new rR.default(Ot(u.kind),u.name,u.detail||"",i(u.uri),T(u.range),T(u.selectionRange),u.data);return u.tags!==void 0&&(P.tags=At(u.tags)),P}function X(u){if(u!==null)return u.map(P=>W(P))}function oe(u){return new $.CallHierarchyIncomingCall(W(u.from),b(u.fromRanges))}function Re(u){if(u!==null)return u.map(P=>oe(P))}function Ce(u){return new $.CallHierarchyOutgoingCall(W(u.to),b(u.fromRanges))}function ee(u){if(u!==null)return u.map(P=>Ce(P))}function rn(u){if(u!=null)return new $.SemanticTokens(new Uint32Array(u.data),u.resultId)}function Cn(u){return new $.SemanticTokensEdit(u.start,u.deleteCount,u.data!==void 0?new Uint32Array(u.data):void 0)}function Xr(u){if(u!=null)return new $.SemanticTokensEdits(u.edits.map(Cn),u.resultId)}function lh(u){return u}function dh(u){if(u!=null)return new $.LinkedEditingRanges(b(u.ranges),fh(u.wordPattern))}function fh(u){if(u!=null)return new RegExp(u)}return{asUri:i,asDiagnostics:s,asDiagnostic:c,asRange:T,asRanges:b,asPosition:w,asDiagnosticSeverity:F,asDiagnosticTag:R,asHover:k,asCompletionResult:O,asCompletionItem:De,asTextEdit:xe,asTextEdits:ke,asSignatureHelp:Ze,asSignatureInformations:Ge,asSignatureInformation:et,asParameterInformations:Xe,asParameterInformation:Rt,asDeclarationResult:Ct,asDefinitionResult:Oe,asLocation:le,asReferences:_t,asDocumentHighlights:Qt,asDocumentHighlight:Yt,asDocumentHighlightKind:Ft,asSymbolKind:Ot,asSymbolTag:xt,asSymbolTags:At,asSymbolInformations:Lt,asSymbolInformation:Zt,asDocumentSymbols:vn,asDocumentSymbol:ut,asCommand:lt,asCommands:yn,asCodeAction:Rn,asCodeActionKind:tt,asCodeActionKinds:tn,asCodeLens:dt,asCodeLenses:nn,asWorkspaceEdit:Mt,asDocumentLink:jt,asDocumentLinks:ht,asFoldingRangeKind:o,asFoldingRange:a,asFoldingRanges:y,asColor:C,asColorInformation:p,asColorInformations:l,asColorPresentation:g,asColorPresentations:_,asSelectionRange:S,asSelectionRanges:I,asSemanticTokensLegend:lh,asSemanticTokens:rn,asSemanticTokensEdit:Cn,asSemanticTokensEdits:Xr,asCallHierarchyItem:W,asCallHierarchyItems:X,asCallHierarchyIncomingCall:oe,asCallHierarchyIncomingCalls:Re,asCallHierarchyOutgoingCall:Ce,asCallHierarchyOutgoingCalls:ee,asLinkedEditingRanges:dh}}Pi.createConverter=iR});var Nd=E(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.Delayer=void 0;var Id=ge(),Zs=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,n=this.defaultDelay){return this.task=e,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(n>=0||this.timeout===void 0)&&(this.timeout=Id.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(Id.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};Ei.Delayer=Zs});var Di=E(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.generateUuid=vt.parse=vt.isUUID=vt.v4=vt.empty=void 0;var Ar=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Y=class extends Ar{constructor(){super([Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),"-",Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),"-","4",Y._randomHex(),Y._randomHex(),Y._randomHex(),"-",Y._oneOf(Y._timeHighBits),Y._randomHex(),Y._randomHex(),Y._randomHex(),"-",Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex(),Y._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Y._oneOf(Y._chars)}};Y._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Y._timeHighBits=["8","9","a","b"];vt.empty=new Ar("00000000-0000-0000-0000-000000000000");function Fd(){return new Y}vt.v4=Fd;var oR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ld(t){return oR.test(t)}vt.isUUID=Ld;function sR(t){if(!Ld(t))throw new Error("invalid uuid");return new Ar(t)}vt.parse=sR;function aR(){return Fd().asHex()}vt.generateUuid=aR});var ta=E(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.ProgressPart=void 0;var Ad=require("vscode"),Md=ge(),jd=an(),ea=class{constructor(e,n,r){this._client=e,this._token=n,this._reported=0,this._disposable=this._client.onProgress(Md.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){Ad.window.withProgress({location:Ad.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(n,r)=>(this._progress=n,this._infinite=e.percentage===void 0,this._cancellationToken=r,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Md.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})))}report(e){if(this._infinite&&jd.string(e.message))this._progress.report({message:e.message});else if(jd.number(e.percentage)){let n=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,n-this._reported);this._progress.report({message:e.message,increment:r}),this._reported+=r}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};qi.ProgressPart=ea});var st=E(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.BaseLanguageClient=we.MessageTransports=we.TextDocumentFeature=we.State=we.RevealOutputChannelOn=we.CloseAction=we.ErrorAction=void 0;var L=require("vscode"),m=ge(),cR=Is(),uR=qd(),lR=kd(),ce=an(),$d=Nd(),ue=Di(),dR=ta(),na=class{error(e){m.RAL().console.error(e)}warn(e){m.RAL().console.warn(e)}info(e){m.RAL().console.info(e)}log(e){m.RAL().console.log(e)}};function fR(t,e,n,r,i){let s=new na,c=m.createProtocolConnection(t,e,s,i);return c.onError(d=>{n(d[0],d[1],d[2])}),c.onClose(r),{listen:()=>c.listen(),sendRequest:(d,...v)=>c.sendRequest(ce.string(d)?d:d.method,...v),onRequest:(d,v)=>c.onRequest(ce.string(d)?d:d.method,v),sendNotification:(d,v)=>c.sendNotification(ce.string(d)?d:d.method,v),onNotification:(d,v)=>c.onNotification(ce.string(d)?d:d.method,v),onProgress:c.onProgress,sendProgress:c.sendProgress,trace:(d,v,R)=>{let w={sendNotification:!1,traceFormat:m.TraceFormat.Text};R===void 0?c.trace(d,v,w):(ce.boolean(R),c.trace(d,v,R))},initialize:d=>c.sendRequest(m.InitializeRequest.type,d),shutdown:()=>c.sendRequest(m.ShutdownRequest.type,void 0),exit:()=>c.sendNotification(m.ExitNotification.type),onLogMessage:d=>c.onNotification(m.LogMessageNotification.type,d),onShowMessage:d=>c.onNotification(m.ShowMessageNotification.type,d),onTelemetry:d=>c.onNotification(m.TelemetryEventNotification.type,d),didChangeConfiguration:d=>c.sendNotification(m.DidChangeConfigurationNotification.type,d),didChangeWatchedFiles:d=>c.sendNotification(m.DidChangeWatchedFilesNotification.type,d),didOpenTextDocument:d=>c.sendNotification(m.DidOpenTextDocumentNotification.type,d),didChangeTextDocument:d=>c.sendNotification(m.DidChangeTextDocumentNotification.type,d),didCloseTextDocument:d=>c.sendNotification(m.DidCloseTextDocumentNotification.type,d),didSaveTextDocument:d=>c.sendNotification(m.DidSaveTextDocumentNotification.type,d),onDiagnostics:d=>c.onNotification(m.PublishDiagnosticsNotification.type,d),end:()=>c.end(),dispose:()=>c.dispose()}}var xi;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(xi=we.ErrorAction||(we.ErrorAction={}));var Ln;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(Ln=we.CloseAction||(we.CloseAction={}));var ra=class{constructor(e,n){this.name=e,this.maxRestartCount=n,this.restarts=[]}error(e,n,r){return r&&r<=3?xi.Continue:xi.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?Ln.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(L.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),Ln.DoNotRestart):(this.restarts.shift(),Ln.Restart)}},Mr;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(Mr=we.RevealOutputChannelOn||(we.RevealOutputChannelOn={}));var Oi;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(Oi=we.State||(we.State={}));var he;(function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.StartFailed=2]="StartFailed",t[t.Running=3]="Running",t[t.Stopping=4]="Stopping",t[t.Stopped=5]="Stopped"})(he||(he={}));var Wd=[m.SymbolKind.File,m.SymbolKind.Module,m.SymbolKind.Namespace,m.SymbolKind.Package,m.SymbolKind.Class,m.SymbolKind.Method,m.SymbolKind.Property,m.SymbolKind.Field,m.SymbolKind.Constructor,m.SymbolKind.Enum,m.SymbolKind.Interface,m.SymbolKind.Function,m.SymbolKind.Variable,m.SymbolKind.Constant,m.SymbolKind.String,m.SymbolKind.Number,m.SymbolKind.Boolean,m.SymbolKind.Array,m.SymbolKind.Object,m.SymbolKind.Key,m.SymbolKind.Null,m.SymbolKind.EnumMember,m.SymbolKind.Struct,m.SymbolKind.Event,m.SymbolKind.Operator,m.SymbolKind.TypeParameter],hR=[m.CompletionItemKind.Text,m.CompletionItemKind.Method,m.CompletionItemKind.Function,m.CompletionItemKind.Constructor,m.CompletionItemKind.Field,m.CompletionItemKind.Variable,m.CompletionItemKind.Class,m.CompletionItemKind.Interface,m.CompletionItemKind.Module,m.CompletionItemKind.Property,m.CompletionItemKind.Unit,m.CompletionItemKind.Value,m.CompletionItemKind.Enum,m.CompletionItemKind.Keyword,m.CompletionItemKind.Snippet,m.CompletionItemKind.Color,m.CompletionItemKind.File,m.CompletionItemKind.Reference,m.CompletionItemKind.Folder,m.CompletionItemKind.EnumMember,m.CompletionItemKind.Constant,m.CompletionItemKind.Struct,m.CompletionItemKind.Event,m.CompletionItemKind.Operator,m.CompletionItemKind.TypeParameter],Hd=[m.SymbolTag.Deprecated];function H(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var jr;(function(t){function e(n){let r=L.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}t.fromConfiguration=e})(jr||(jr={}));var ia;(function(t){function e(n){let r=n;return r&&ce.func(r.register)&&ce.func(r.unregister)&&ce.func(r.dispose)&&r.registrationType!==void 0}t.is=e})(ia||(ia={}));var qt=class{constructor(e,n,r,i,s,c){this._client=e,this._event=n,this._type=r,this._middleware=i,this._createParams=s,this._selectorFilter=c,this._selectors=new Map}static textDocumentFilter(e,n){for(let r of e)if(L.languages.match(r,n))return!0;return!1}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,n=>this._client.sendNotification(this._type,this._createParams(n))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let n of this._selectors.values())if(L.languages.match(n,e))return{send:r=>{this.callback(r)}}}},oa=class extends qt{constructor(e,n){super(e,L.workspace.onDidOpenTextDocument,m.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),qt.textDocumentFilter),this._syncedDocuments=n}fillClientCapabilities(e){H(H(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:ue.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return m.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let n=e.registerOptions.documentSelector;L.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&L.languages.match(n,r)){let s=this._client.clientOptions.middleware,c=f=>{this._client.sendNotification(this._type,this._createParams(f))};s.didOpen?s.didOpen(r,c):c(r),this._syncedDocuments.set(i,r)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},sa=class extends qt{constructor(e,n){super(e,L.workspace.onDidCloseTextDocument,m.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,r=>e.code2ProtocolConverter.asCloseTextDocumentParams(r),qt.textDocumentFilter),this._syncedDocuments=n}get registrationType(){return m.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){H(H(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:ue.generateUuid(),registerOptions:{documentSelector:n}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let n=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(L.languages.match(n,i)&&!this._selectorFilter(r,i)){let s=this._client.clientOptions.middleware,c=f=>{this._client.sendNotification(this._type,this._createParams(f))};this._syncedDocuments.delete(i.uri.toString()),s.didClose?s.didClose(i,c):c(i)}})}},aa=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return m.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){H(H(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.change!==void 0&&r.change!==m.TextDocumentSyncKind.None&&this.register({id:ue.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:r.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=L.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let n of this._changeData.values())if(L.languages.match(n.documentSelector,e.document)){let r=this._client.clientOptions.middleware;if(n.syncKind===m.TextDocumentSyncKind.Incremental){let i=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);r.didChange?r.didChange(e,()=>this._client.sendNotification(m.DidChangeTextDocumentNotification.type,i)):this._client.sendNotification(m.DidChangeTextDocumentNotification.type,i)}else if(n.syncKind===m.TextDocumentSyncKind.Full){let i=s=>{this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(m.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))})):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new $d.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(m.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))},-1))};r.didChange?r.didChange(e,i):i(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let n of this._changeData.values())if(L.languages.match(n.documentSelector,e))return{send:r=>{this.callback(r)}}}},ca=class extends qt{constructor(e){super(e,L.workspace.onWillSaveTextDocument,m.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,n=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(n),(n,r)=>qt.textDocumentFilter(n,r.document))}get registrationType(){return m.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let n=H(H(e,"textDocument"),"synchronization");n.willSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSave&&this.register({id:ue.generateUuid(),registerOptions:{documentSelector:n}})}},ua=class{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return m.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let n=H(H(e,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSaveWaitUntil&&this.register({id:ue.generateUuid(),registerOptions:{documentSelector:n}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=L.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(qt.textDocumentFilter(this._selectors.values(),e.document)){let n=this._client.clientOptions.middleware,r=i=>this._client.sendRequest(m.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(s=>{let c=this._client.protocol2CodeConverter.asTextEdits(s);return c===void 0?[]:c});e.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},la=class extends qt{constructor(e){super(e,L.workspace.onDidSaveTextDocument,m.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,n=>e.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),qt.textDocumentFilter),this._includeText=!1}get registrationType(){return m.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){H(H(e,"textDocument"),"synchronization").didSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;if(n&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:ue.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}},da=class{constructor(e,n){this._client=e,this._notifyFileEvent=n,this._watchers=new Map}get registrationType(){return m.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){H(H(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,n){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let n=[];for(let r of e.registerOptions.watchers){if(!ce.string(r.globPattern))continue;let i=!0,s=!0,c=!0;r.kind!==void 0&&r.kind!==null&&(i=(r.kind&m.WatchKind.Create)!==0,s=(r.kind&m.WatchKind.Change)!==0,c=(r.kind&m.WatchKind.Delete)!==0);let f=L.workspace.createFileSystemWatcher(r.globPattern,!i,!s,!c);this.hookListeners(f,i,s,c),n.push(f)}this._watchers.set(e.id,n)}registerRaw(e,n){let r=[];for(let i of n)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,n,r,i,s){n&&e.onDidCreate(c=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(c),type:m.FileChangeType.Created}),null,s),r&&e.onDidChange(c=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(c),type:m.FileChangeType.Changed}),null,s),i&&e.onDidDelete(c=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(c),type:m.FileChangeType.Deleted}),null,s)}unregister(e){let n=this._watchers.get(e);if(n)for(let r of n)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let n of e)n.dispose()}),this._watchers.clear()}},je=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],data:e,provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,n){if(n){if(m.TextDocumentRegistrationOptions.is(n)){let r=m.StaticRegistrationOptions.hasId(n)?n.id:ue.generateUuid(),i=n.documentSelector||e;if(i)return[r,Object.assign({},n,{documentSelector:i})]}else if(ce.boolean(n)&&n===!0||m.WorkDoneProgressOptions.is(n)){if(!e)return[void 0,void 0];let r=ce.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e});return[ue.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,n){if(!(!e||!n))return ce.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e})}getProvider(e){for(let n of this._registrations.values()){let r=n.data.registerOptions.documentSelector;if(r!==null&&L.languages.match(r,e))return n.provider}}getAllProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};we.TextDocumentFeature=je;var fa=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}},ha=class extends je{constructor(e){super(e,m.CompletionRequest.type)}fillClientCapabilities(e){let n=H(H(e,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[m.MarkupKind.Markdown,m.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[m.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[m.InsertTextMode.asIs,m.InsertTextMode.adjustIndentation]}},n.completionItemKind={valueSet:hR}}initialize(e,n){let r=this.getRegistrationOptions(n,e.completionProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.triggerCharacters||[],r={provideCompletionItems:(i,s,c,f)=>{let d=this._client,v=this._client.clientOptions.middleware,R=(w,T,b,F)=>d.sendRequest(m.CompletionRequest.type,d.code2ProtocolConverter.asCompletionParams(w,T,b),F).then(d.protocol2CodeConverter.asCompletionResult,N=>d.handleFailedRequest(m.CompletionRequest.type,N,null));return v.provideCompletionItem?v.provideCompletionItem(i,s,f,c,R):R(i,s,f,c)},resolveCompletionItem:e.resolveProvider?(i,s)=>{let c=this._client,f=this._client.clientOptions.middleware,d=(v,R)=>c.sendRequest(m.CompletionResolveRequest.type,c.code2ProtocolConverter.asCompletionItem(v),R).then(c.protocol2CodeConverter.asCompletionItem,w=>c.handleFailedRequest(m.CompletionResolveRequest.type,w,v));return f.resolveCompletionItem?f.resolveCompletionItem(i,s,d):d(i,s)}:void 0};return[L.languages.registerCompletionItemProvider(e.documentSelector,r,...n),r]}},pa=class extends je{constructor(e){super(e,m.HoverRequest.type)}fillClientCapabilities(e){let n=H(H(e,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[m.MarkupKind.Markdown,m.MarkupKind.PlainText]}initialize(e,n){let r=this.getRegistrationOptions(n,e.hoverProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideHover:(r,i,s)=>{let c=this._client,f=(v,R,w)=>c.sendRequest(m.HoverRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(v,R),w).then(c.protocol2CodeConverter.asHover,T=>c.handleFailedRequest(m.HoverRequest.type,T,null)),d=c.clientOptions.middleware;return d.provideHover?d.provideHover(r,i,s,f):f(r,i,s)}};return[L.languages.registerHoverProvider(e.documentSelector,n),n]}},ga=class extends je{constructor(e){super(e,m.SignatureHelpRequest.type)}fillClientCapabilities(e){let n=H(H(e,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[m.MarkupKind.Markdown,m.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.signatureHelpProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideSignatureHelp:(i,s,c,f)=>{let d=this._client,v=(w,T,b,F)=>d.sendRequest(m.SignatureHelpRequest.type,d.code2ProtocolConverter.asSignatureHelpParams(w,T,b),F).then(d.protocol2CodeConverter.asSignatureHelp,N=>d.handleFailedRequest(m.SignatureHelpRequest.type,N,null)),R=d.clientOptions.middleware;return R.provideSignatureHelp?R.provideSignatureHelp(i,s,f,c,v):v(i,s,f,c)}},r;if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];r=L.languages.registerSignatureHelpProvider(e.documentSelector,n,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};r=L.languages.registerSignatureHelpProvider(e.documentSelector,n,i)}return[r,n]}},ma=class extends je{constructor(e){super(e,m.DefinitionRequest.type)}fillClientCapabilities(e){let n=H(H(e,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.definitionProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDefinition:(r,i,s)=>{let c=this._client,f=(v,R,w)=>c.sendRequest(m.DefinitionRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(v,R),w).then(c.protocol2CodeConverter.asDefinitionResult,T=>c.handleFailedRequest(m.DefinitionRequest.type,T,null)),d=c.clientOptions.middleware;return d.provideDefinition?d.provideDefinition(r,i,s,f):f(r,i,s)}};return[L.languages.registerDefinitionProvider(e.documentSelector,n),n]}},va=class extends je{constructor(e){super(e,m.ReferencesRequest.type)}fillClientCapabilities(e){H(H(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.referencesProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideReferences:(r,i,s,c)=>{let f=this._client,d=(R,w,T,b)=>f.sendRequest(m.ReferencesRequest.type,f.code2ProtocolConverter.asReferenceParams(R,w,T),b).then(f.protocol2CodeConverter.asReferences,F=>f.handleFailedRequest(m.ReferencesRequest.type,F,null)),v=f.clientOptions.middleware;return v.provideReferences?v.provideReferences(r,i,s,c,d):d(r,i,s,c)}};return[L.languages.registerReferenceProvider(e.documentSelector,n),n]}},ya=class extends je{constructor(e){super(e,m.DocumentHighlightRequest.type)}fillClientCapabilities(e){H(H(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentHighlightProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentHighlights:(r,i,s)=>{let c=this._client,f=(v,R,w)=>c.sendRequest(m.DocumentHighlightRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(v,R),w).then(c.protocol2CodeConverter.asDocumentHighlights,T=>c.handleFailedRequest(m.DocumentHighlightRequest.type,T,null)),d=c.clientOptions.middleware;return d.provideDocumentHighlights?d.provideDocumentHighlights(r,i,s,f):f(r,i,s)}};return[L.languages.registerDocumentHighlightProvider(e.documentSelector,n),n]}},Ra=class extends je{constructor(e){super(e,m.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=H(H(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:Wd},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:Hd},n.labelSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentSymbolProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentSymbols:(i,s)=>{let c=this._client,f=(v,R)=>c.sendRequest(m.DocumentSymbolRequest.type,c.code2ProtocolConverter.asDocumentSymbolParams(v),R).then(w=>{if(w!==null){if(w.length===0)return[];{let T=w[0];return m.DocumentSymbol.is(T)?c.protocol2CodeConverter.asDocumentSymbols(w):c.protocol2CodeConverter.asSymbolInformations(w)}}},w=>c.handleFailedRequest(m.DocumentSymbolRequest.type,w,null)),d=c.clientOptions.middleware;return d.provideDocumentSymbols?d.provideDocumentSymbols(i,s,f):f(i,s)}},r=e.label!==void 0?{label:e.label}:void 0;return[L.languages.registerDocumentSymbolProvider(e.documentSelector,n,r),n]}},Ca=class extends fa{constructor(e){super(e,m.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let n=H(H(e,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:Wd},n.tagSupport={valueSet:Hd}}initialize(e){e.workspaceSymbolProvider&&this.register({id:ue.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let n={provideWorkspaceSymbols:(r,i)=>{let s=this._client,c=(d,v)=>s.sendRequest(m.WorkspaceSymbolRequest.type,{query:d},v).then(s.protocol2CodeConverter.asSymbolInformations,R=>s.handleFailedRequest(m.WorkspaceSymbolRequest.type,R,null)),f=s.clientOptions.middleware;return f.provideWorkspaceSymbols?f.provideWorkspaceSymbols(r,i,c):c(r,i)}};return[L.languages.registerWorkspaceSymbolProvider(n),n]}},_a=class extends je{constructor(e){super(e,m.CodeActionRequest.type)}fillClientCapabilities(e){let n=H(H(e,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[m.CodeActionKind.Empty,m.CodeActionKind.QuickFix,m.CodeActionKind.Refactor,m.CodeActionKind.RefactorExtract,m.CodeActionKind.RefactorInline,m.CodeActionKind.RefactorRewrite,m.CodeActionKind.Source,m.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!1}initialize(e,n){let r=this.getRegistrationOptions(n,e.codeActionProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideCodeActions:(r,i,s,c)=>{let f=this._client,d=(R,w,T,b)=>{let F={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(R),range:f.code2ProtocolConverter.asRange(w),context:f.code2ProtocolConverter.asCodeActionContext(T)};return f.sendRequest(m.CodeActionRequest.type,F,b).then(N=>{if(N===null)return;let z=[];for(let x of N)m.Command.is(x)?z.push(f.protocol2CodeConverter.asCommand(x)):z.push(f.protocol2CodeConverter.asCodeAction(x));return z},N=>f.handleFailedRequest(m.CodeActionRequest.type,N,null))},v=f.clientOptions.middleware;return v.provideCodeActions?v.provideCodeActions(r,i,s,c,d):d(r,i,s,c)},resolveCodeAction:e.resolveProvider?(r,i)=>{let s=this._client,c=this._client.clientOptions.middleware,f=(d,v)=>s.sendRequest(m.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeAction(d),v).then(s.protocol2CodeConverter.asCodeAction,R=>s.handleFailedRequest(m.CodeActionResolveRequest.type,R,d));return c.resolveCodeAction?c.resolveCodeAction(r,i,f):f(r,i)}:void 0};return[L.languages.registerCodeActionsProvider(e.documentSelector,n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),n]}},wa=class extends je{constructor(e){super(e,m.CodeLensRequest.type)}fillClientCapabilities(e){H(H(e,"textDocument"),"codeLens").dynamicRegistration=!0,H(H(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,n){this._client.onRequest(m.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(n,e.codeLensProvider);i&&this.register({id:ue.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=new L.EventEmitter,r={onDidChangeCodeLenses:n.event,provideCodeLenses:(i,s)=>{let c=this._client,f=(v,R)=>c.sendRequest(m.CodeLensRequest.type,c.code2ProtocolConverter.asCodeLensParams(v),R).then(c.protocol2CodeConverter.asCodeLenses,w=>c.handleFailedRequest(m.CodeLensRequest.type,w,null)),d=c.clientOptions.middleware;return d.provideCodeLenses?d.provideCodeLenses(i,s,f):f(i,s)},resolveCodeLens:e.resolveProvider?(i,s)=>{let c=this._client,f=(v,R)=>c.sendRequest(m.CodeLensResolveRequest.type,c.code2ProtocolConverter.asCodeLens(v),R).then(c.protocol2CodeConverter.asCodeLens,w=>c.handleFailedRequest(m.CodeLensResolveRequest.type,w,v)),d=c.clientOptions.middleware;return d.resolveCodeLens?d.resolveCodeLens(i,s,f):f(i,s)}:void 0};return[L.languages.registerCodeLensProvider(e.documentSelector,r),{provider:r,onDidChangeCodeLensEmitter:n}]}},Ta=class extends je{constructor(e){super(e,m.DocumentFormattingRequest.type)}fillClientCapabilities(e){H(H(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentFormattingProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentFormattingEdits:(r,i,s)=>{let c=this._client,f=(v,R,w)=>{let T={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(v),options:c.code2ProtocolConverter.asFormattingOptions(R,jr.fromConfiguration(v))};return c.sendRequest(m.DocumentFormattingRequest.type,T,w).then(c.protocol2CodeConverter.asTextEdits,b=>c.handleFailedRequest(m.DocumentFormattingRequest.type,b,null))},d=c.clientOptions.middleware;return d.provideDocumentFormattingEdits?d.provideDocumentFormattingEdits(r,i,s,f):f(r,i,s)}};return[L.languages.registerDocumentFormattingEditProvider(e.documentSelector,n),n]}},Sa=class extends je{constructor(e){super(e,m.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){H(H(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentRangeFormattingProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentRangeFormattingEdits:(r,i,s,c)=>{let f=this._client,d=(R,w,T,b)=>{let F={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(R),range:f.code2ProtocolConverter.asRange(w),options:f.code2ProtocolConverter.asFormattingOptions(T,jr.fromConfiguration(R))};return f.sendRequest(m.DocumentRangeFormattingRequest.type,F,b).then(f.protocol2CodeConverter.asTextEdits,N=>f.handleFailedRequest(m.DocumentRangeFormattingRequest.type,N,null))},v=f.clientOptions.middleware;return v.provideDocumentRangeFormattingEdits?v.provideDocumentRangeFormattingEdits(r,i,s,c,d):d(r,i,s,c)}};return[L.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,n),n]}},ba=class extends je{constructor(e){super(e,m.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){H(H(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentOnTypeFormattingProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideOnTypeFormattingEdits:(i,s,c,f,d)=>{let v=this._client,R=(T,b,F,N,z)=>{let x={textDocument:v.code2ProtocolConverter.asTextDocumentIdentifier(T),position:v.code2ProtocolConverter.asPosition(b),ch:F,options:v.code2ProtocolConverter.asFormattingOptions(N,jr.fromConfiguration(T))};return v.sendRequest(m.DocumentOnTypeFormattingRequest.type,x,z).then(v.protocol2CodeConverter.asTextEdits,k=>v.handleFailedRequest(m.DocumentOnTypeFormattingRequest.type,k,null))},w=v.clientOptions.middleware;return w.provideOnTypeFormattingEdits?w.provideOnTypeFormattingEdits(i,s,c,f,d,R):R(i,s,c,f,d)}},r=e.moreTriggerCharacter||[];return[L.languages.registerOnTypeFormattingEditProvider(e.documentSelector,n,e.firstTriggerCharacter,...r),n]}},Pa=class extends je{constructor(e){super(e,m.RenameRequest.type)}fillClientCapabilities(e){let n=H(H(e,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=m.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.renameProvider);r&&(ce.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:ue.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let n={provideRenameEdits:(r,i,s,c)=>{let f=this._client,d=(R,w,T,b)=>{let F={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(R),position:f.code2ProtocolConverter.asPosition(w),newName:T};return f.sendRequest(m.RenameRequest.type,F,b).then(f.protocol2CodeConverter.asWorkspaceEdit,N=>f.handleFailedRequest(m.RenameRequest.type,N,null))},v=f.clientOptions.middleware;return v.provideRenameEdits?v.provideRenameEdits(r,i,s,c,d):d(r,i,s,c)},prepareRename:e.prepareProvider?(r,i,s)=>{let c=this._client,f=(v,R,w)=>{let T={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(v),position:c.code2ProtocolConverter.asPosition(R)};return c.sendRequest(m.PrepareRenameRequest.type,T,w).then(b=>m.Range.is(b)?c.protocol2CodeConverter.asRange(b):this.isDefaultBehavior(b)?b.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):b&&m.Range.is(b.range)?{range:c.protocol2CodeConverter.asRange(b.range),placeholder:b.placeholder}:Promise.reject(new Error("The element can't be renamed.")),b=>c.handleFailedRequest(m.PrepareRenameRequest.type,b,void 0))},d=c.clientOptions.middleware;return d.prepareRename?d.prepareRename(r,i,s,f):f(r,i,s)}:void 0};return[L.languages.registerRenameProvider(e.documentSelector,n),n]}isDefaultBehavior(e){let n=e;return n&&ce.boolean(n.defaultBehavior)}},Ea=class extends je{constructor(e){super(e,m.DocumentLinkRequest.type)}fillClientCapabilities(e){let n=H(H(e,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentLinkProvider);r&&this.register({id:ue.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentLinks:(r,i)=>{let s=this._client,c=(d,v)=>s.sendRequest(m.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(d),v).then(s.protocol2CodeConverter.asDocumentLinks,R=>s.handleFailedRequest(m.DocumentLinkRequest.type,R,null)),f=s.clientOptions.middleware;return f.provideDocumentLinks?f.provideDocumentLinks(r,i,c):c(r,i)},resolveDocumentLink:e.resolveProvider?(r,i)=>{let s=this._client,c=(d,v)=>s.sendRequest(m.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(d),v).then(s.protocol2CodeConverter.asDocumentLink,R=>s.handleFailedRequest(m.DocumentLinkResolveRequest.type,R,d)),f=s.clientOptions.middleware;return f.resolveDocumentLink?f.resolveDocumentLink(r,i,c):c(r,i)}:void 0};return[L.languages.registerDocumentLinkProvider(e.documentSelector,n),n]}},Da=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return m.DidChangeConfigurationNotification.type}fillClientCapabilities(e){H(H(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register({id:ue.generateUuid(),registerOptions:{section:e}})}register(e){let n=L.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,n),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let n=this._listeners.get(e);n&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,n){let r;if(ce.string(e)?r=[e]:r=e,r!==void 0&&n!==void 0&&!r.some(f=>n.affectsConfiguration(f)))return;let i=c=>{if(c===void 0){this._client.sendNotification(m.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(m.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(c)})},s=this.getMiddleware();s?s(r,i):i(r)}extractSettingsInformation(e){function n(s,c){let f=s;for(let d=0;d<c.length-1;d++){let v=f[c[d]];v||(v=Object.create(null),f[c[d]]=v),f=v}return f}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let c=e[s],f=c.indexOf("."),d=null;if(f>=0?d=L.workspace.getConfiguration(c.substr(0,f),r).get(c.substr(f+1)):d=L.workspace.getConfiguration(void 0,r).get(c),d){let v=e[s].split(".");n(i,v)[v[v.length-1]]=cR.toJSONObject(d)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},qa=class{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return m.ExecuteCommandRequest.type}fillClientCapabilities(e){H(H(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:ue.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let n=this._client,r=n.clientOptions.middleware,i=(s,c)=>{let f={command:s,arguments:c};return n.sendRequest(m.ExecuteCommandRequest.type,f).then(void 0,d=>n.handleFailedRequest(m.ExecuteCommandRequest.type,d,void 0))};if(e.registerOptions.commands){let s=[];for(let c of e.registerOptions.commands)s.push(L.commands.registerCommand(c,(...f)=>r.executeCommand?r.executeCommand(c,f,i):i(c,f)));this._commands.set(e.id,s)}}unregister(e){let n=this._commands.get(e);n&&n.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(n=>n.dispose())}),this._commands.clear()}},pR;(function(t){function e(n){return n&&m.MessageReader.is(n.reader)&&m.MessageWriter.is(n.writer)}t.is=e})(pR=we.MessageTransports||(we.MessageTransports={}));var ki=class{constructor(e,n){this._resolve=e,this._reject=n,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},An=class{constructor(e,n,r){var i;this._traceFormat=m.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=n,r=r||{};let s={isTrusted:!1};r.markdown!==void 0&&r.markdown.isTrusted===!0&&(s.isTrusted=!0),this._clientOptions={documentSelector:r.documentSelector||[],synchronize:r.synchronize||{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName||this._name,revealOutputChannelOn:r.revealOutputChannelOn||Mr.Error,stdioEncoding:r.stdioEncoding||"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler||this.createDefaultErrorHandler((i=r.connectionOptions)===null||i===void 0?void 0:i.maxRestartCount),middleware:r.middleware||{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:s},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=he.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new $d.Delayer(250),this._onReady=new Promise((c,f)=>{this._onReadyCallbacks=new ki(c,f)}),this._onStop=void 0,this._telemetryEmitter=new m.Emitter,this._stateChangeEmitter=new m.Emitter,this._trace=m.Trace.Off,this._tracer={log:(c,f)=>{ce.string(c)?this.logTrace(c,f):this.logObjectTrace(c)}},this._c2p=uR.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=lR.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let n=this.getPublicState();this._state=e;let r=this.getPublicState();r!==n&&this._stateChangeEmitter.fire({oldState:n,newState:r})}getPublicState(){return this.state===he.Running?Oi.Running:this.state===he.Starting?Oi.Starting:Oi.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...n)}catch(r){throw this.error(`Sending request ${ce.string(e)?e:e.method} failed.`,r),r}}onRequest(e,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(e,n)}catch(r){throw this.error(`Registering request handler ${ce.string(e)?e:e.method} failed.`,r),r}}sendNotification(e,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,n)}catch(r){throw this.error(`Sending notification ${ce.string(e)?e:e.method} failed.`,r),r}}onNotification(e,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(e,n)}catch(r){throw this.error(`Registering notification handler ${ce.string(e)?e:e.method} failed.`,r),r}}onProgress(e,n,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(m.WorkDoneProgress.is(e)){let i=this._clientOptions.middleware.handleWorkDoneProgress;if(i!==void 0)return this._resolvedConnection.onProgress(e,n,s=>{i(n,s,()=>r(s))})}return this._resolvedConnection.onProgress(e,n,r)}catch(i){throw this.error(`Registering progress handler for token ${n} failed.`,i),i}}sendProgress(e,n,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,n,r)}catch(i){throw this.error(`Sending progress for token ${n} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=L.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new ra(this._name,e??4)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(n=>{n.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof m.ResponseError){let n=e;return`  Message: ${n.message}
  Code: ${n.code} ${n.data?`
`+n.data.toString():""}`}return e instanceof Error?ce.string(e.stack)?e.stack:e.message:ce.string(e)?e:e.toString()}info(e,n,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=Mr.Info&&this.showNotificationMessage()}warn(e,n,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=Mr.Warn&&this.showNotificationMessage()}error(e,n,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=Mr.Error&&this.showNotificationMessage()}showNotificationMessage(){L.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,n){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.traceOutputChannel.appendLine(this.data2String(n))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===he.Initial||this.state===he.Stopping||this.state===he.Stopped}needsStop(){return this.state===he.Starting||this.state===he.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===he.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,n)=>{this._onReadyCallbacks=new ki(e,n)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?L.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):L.languages.createDiagnosticCollection()),this.state=he.Starting,this.resolveConnection().then(e=>(e.onLogMessage(n=>{switch(n.type){case m.MessageType.Error:this.error(n.message,void 0,!1);break;case m.MessageType.Warning:this.warn(n.message,void 0,!1);break;case m.MessageType.Info:this.info(n.message,void 0,!1);break;default:this.outputChannel.appendLine(n.message)}}),e.onShowMessage(n=>{switch(n.type){case m.MessageType.Error:L.window.showErrorMessage(n.message);break;case m.MessageType.Warning:L.window.showWarningMessage(n.message);break;case m.MessageType.Info:L.window.showInformationMessage(n.message);break;default:L.window.showInformationMessage(n.message)}}),e.onRequest(m.ShowMessageRequest.type,n=>{let r;switch(n.type){case m.MessageType.Error:r=L.window.showErrorMessage;break;case m.MessageType.Warning:r=L.window.showWarningMessage;break;case m.MessageType.Info:r=L.window.showInformationMessage;break;default:r=L.window.showInformationMessage}let i=n.actions||[];return r(n.message,...i)}),e.onTelemetry(n=>{this._telemetryEmitter.fire(n)}),e.onRequest(m.ShowDocumentRequest.type,async n=>{var r;let i=async c=>{let f=this.protocol2CodeConverter.asUri(c.uri);try{if(c.external===!0)return{success:await L.env.openExternal(f)};{let d={};return c.selection!==void 0&&(d.selection=this.protocol2CodeConverter.asRange(c.selection)),c.takeFocus===void 0||c.takeFocus===!1?d.preserveFocus=!0:c.takeFocus===!0&&(d.preserveFocus=!1),await L.window.showTextDocument(f,d),{success:!0}}}catch{return{success:!0}}},s=(r=this._clientOptions.middleware.window)===null||r===void 0?void 0:r.showDocument;return s!==void 0?s(n,i):i(n)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=he.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),L.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new L.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let n=this._clientOptions.initializationOptions,r=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:null,clientInfo:{name:L.env.appName,version:L.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(L.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:ce.func(n)?n():n,trace:m.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(i),this._clientOptions.progressOnInitialization){let s=ue.generateUuid(),c=new dR.ProgressPart(e,s);return i.workDoneToken=s,this.doInitialize(e,i).then(f=>(c.done(),f),f=>{throw c.cancel(),f})}else return this.doInitialize(e,i)}doInitialize(e,n){return e.initialize(n).then(r=>{this._resolvedConnection=e,this._initializeResult=r,this.state=he.Running;let i;return ce.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===m.TextDocumentSyncKind.None?i={openClose:!1,change:m.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(s=>this.handleDiagnostics(s)),e.onRequest(m.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(m.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(m.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s)),e.sendNotification(m.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),r}).then(void 0,r=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof m.ResponseError&&r.data&&r.data.retry?L.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))}):(r&&r.message&&L.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop(),this._onReadyCallbacks.reject(r)),r})}_clientGetRootPath(){let e=L.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===he.Stopping&&this._onStop?this._onStop:(this.state=he.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.end(),e.dispose(),this.state=he.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=he.Stopped,Promise.resolve())}cleanUp(e=!0,n=!0){this._listeners&&(this._listeners.forEach(r=>r.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(r=>r.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let r of this._features.values())r.dispose();e&&this.cleanUpChannel(),n&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var n;let r=this;function i(c){r._fileEvents.push(c),r._fileEventDelayer.trigger(()=>{r.onReady().then(()=>{r.resolveConnection().then(f=>{r.isConnectionActive()&&(r.forceDocumentSync(),f.didChangeWatchedFiles({changes:r._fileEvents})),r._fileEvents=[]})},f=>{r.error("Notify file events failed.",f)})})}let s=(n=this.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;s!=null&&s.didChangeWatchedFile?s.didChangeWatchedFile(e,i):i(e)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(m.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let n=this._p2c.asUri(e.uri),r=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(n,r,(s,c)=>this.setDiagnostics(s,c)):this.setDiagnostics(n,r)}setDiagnostics(e,n){this._diagnostics&&this._diagnostics.set(e,n)}createConnection(){let e=(r,i,s)=>{this.handleConnectionError(r,i,s)},n=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(r=>fR(r.reader,r.writer,e,n,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===he.Stopping||this.state===he.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=Ln.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===Ln.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===he.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=he.StartFailed):this.state=he.Stopped,this.cleanUp(!1,!0)):e===Ln.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=he.Initial,this.start())}handleConnectionError(e,n,r){this._clientOptions.errorHandler.error(e,n,r)===xi.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){L.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,n=!1){let r=L.workspace.getConfiguration(this._id),i=m.Trace.Off,s=m.TraceFormat.Text;if(r){let c=r.get("trace.server","off");typeof c=="string"?i=m.Trace.fromString(c):(i=m.Trace.fromString(r.get("trace.server.verbosity","off")),s=m.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:n,traceFormat:this._traceFormat})}hookFileEvents(e){let n=this._clientOptions.synchronize.fileEvents;if(!n)return;let r;ce.array(n)?r=n:r=[n],r&&this._dynamicFeatures.get(m.DidChangeWatchedFilesNotification.type.method).registerRaw(ue.generateUuid(),r)}registerFeatures(e){for(let n of e)this.registerFeature(n)}registerFeature(e){if(this._features.push(e),ia.is(e)){let n=e.registrationType;this._dynamicFeatures.set(n.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Da(this)),this.registerFeature(new oa(this,this._syncedDocuments)),this.registerFeature(new aa(this)),this.registerFeature(new ca(this)),this.registerFeature(new ua(this)),this.registerFeature(new la(this)),this.registerFeature(new sa(this,this._syncedDocuments)),this.registerFeature(new da(this,e=>this.notifyFileEvent(e))),this.registerFeature(new ha(this)),this.registerFeature(new pa(this)),this.registerFeature(new ga(this)),this.registerFeature(new ma(this)),this.registerFeature(new va(this)),this.registerFeature(new ya(this)),this.registerFeature(new Ra(this)),this.registerFeature(new Ca(this)),this.registerFeature(new _a(this)),this.registerFeature(new wa(this)),this.registerFeature(new Ta(this)),this.registerFeature(new Sa(this)),this.registerFeature(new ba(this)),this.registerFeature(new Pa(this)),this.registerFeature(new Ea(this)),this.registerFeature(new qa(this))}fillInitializeParams(e){for(let n of this._features)ce.func(n.fillInitializeParams)&&n.fillInitializeParams(e)}computeClientCapabilities(){let e={};H(e,"workspace").applyEdit=!0;let n=H(H(e,"workspace"),"workspaceEdit");n.documentChanges=!0,n.resourceOperations=[m.ResourceOperationKind.Create,m.ResourceOperationKind.Rename,m.ResourceOperationKind.Delete],n.failureHandling=m.FailureHandlingKind.TextOnlyTransactional,n.normalizesLineEndings=!0,n.changeAnnotationSupport={groupsOnLabel:!0};let r=H(H(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[m.DiagnosticTag.Unnecessary,m.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=H(e,"window"),s=H(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let c=H(i,"showDocument");c.support=!0;let f=H(e,"general");f.regularExpressions={engine:"ECMAScript",version:"ES2020"},f.markdown={parser:"marked",version:"1.1.0"};for(let d of this._features)d.fillClientCapabilities(e);return e}initializeFeatures(e){let n=this._clientOptions.documentSelector;for(let r of this._features)r.initialize(this._capabilities,n)}handleRegistrationRequest(e){return new Promise((n,r)=>{for(let i of e.registrations){let s=this._dynamicFeatures.get(i.method);if(s===void 0){r(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let c=i.registerOptions||{};c.documentSelector=c.documentSelector||this._clientOptions.documentSelector;let f={id:i.id,registerOptions:c};try{s.register(f)}catch(d){r(d);return}}n()})}handleUnregistrationRequest(e){return new Promise((n,r)=>{for(let i of e.unregisterations){let s=this._dynamicFeatures.get(i.method);if(!s){r(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}s.unregister(i.id)}n()})}handleApplyWorkspaceEdit(e){let n=e.edit,r=new Map;L.workspace.textDocuments.forEach(s=>r.set(s.uri.toString(),s));let i=!1;if(n.documentChanges){for(let s of n.documentChanges)if(m.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let c=r.get(s.textDocument.uri);if(c&&c.version!==s.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):ce.asPromise(L.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(s=>({applied:s})))}handleFailedRequest(e,n,r){if(n instanceof m.ResponseError){if(n.code===m.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(n.code===m.LSPErrorCodes.ContentModified)return r}throw this.error(`Request ${e.method} failed.`,n),n}makeCancelError(){let e=new Error(An.Canceled);return e.name=An.Canceled,e}};we.BaseLanguageClient=An;An.Canceled="Canceled"});var zd=E(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.ColorProviderFeature=void 0;var Ii=require("vscode"),$r=ge(),gR=st();function Kd(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Oa=class extends gR.TextDocumentFeature{constructor(e){super(e,$r.DocumentColorRequest.type)}fillClientCapabilities(e){Kd(Kd(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideColorPresentations:(r,i,s)=>{let c=this._client,f=(v,R,w)=>{let T={color:v,textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(R.document),range:c.code2ProtocolConverter.asRange(R.range)};return c.sendRequest($r.ColorPresentationRequest.type,T,w).then(this.asColorPresentations.bind(this),b=>c.handleFailedRequest($r.ColorPresentationRequest.type,b,null))},d=c.clientOptions.middleware;return d.provideColorPresentations?d.provideColorPresentations(r,i,s,f):f(r,i,s)},provideDocumentColors:(r,i)=>{let s=this._client,c=(d,v)=>{let R={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(d)};return s.sendRequest($r.DocumentColorRequest.type,R,v).then(this.asColorInformations.bind(this),w=>s.handleFailedRequest($r.ColorPresentationRequest.type,w,null))},f=s.clientOptions.middleware;return f.provideDocumentColors?f.provideDocumentColors(r,i,c):c(r,i)}};return[Ii.languages.registerColorProvider(e.documentSelector,n),n]}asColor(e){return new Ii.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(n=>new Ii.ColorInformation(this._client.protocol2CodeConverter.asRange(n.range),this.asColor(n.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(n=>{let r=new Ii.ColorPresentation(n.label);return r.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(n.additionalTextEdits),r.textEdit=this._client.protocol2CodeConverter.asTextEdit(n.textEdit),r}):[]}};Ni.ColorProviderFeature=Oa});var Bd=E(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.ImplementationFeature=void 0;var mR=require("vscode"),xa=ge(),vR=st();function Ud(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var ka=class extends vR.TextDocumentFeature{constructor(e){super(e,xa.ImplementationRequest.type)}fillClientCapabilities(e){let n=Ud(Ud(e,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideImplementation:(r,i,s)=>{let c=this._client,f=(v,R,w)=>c.sendRequest(xa.ImplementationRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(v,R),w).then(c.protocol2CodeConverter.asDefinitionResult,T=>c.handleFailedRequest(xa.ImplementationRequest.type,T,null)),d=c.clientOptions.middleware;return d.provideImplementation?d.provideImplementation(r,i,s,f):f(r,i,s)}};return[mR.languages.registerImplementationProvider(e.documentSelector,n),n]}};Fi.ImplementationFeature=ka});var Gd=E(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.TypeDefinitionFeature=void 0;var yR=require("vscode"),Ia=ge(),RR=st();function Li(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Na=class extends RR.TextDocumentFeature{constructor(e){super(e,Ia.TypeDefinitionRequest.type)}fillClientCapabilities(e){Li(Li(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=Li(Li(e,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideTypeDefinition:(r,i,s)=>{let c=this._client,f=(v,R,w)=>c.sendRequest(Ia.TypeDefinitionRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(v,R),w).then(c.protocol2CodeConverter.asDefinitionResult,T=>c.handleFailedRequest(Ia.TypeDefinitionRequest.type,T,null)),d=c.clientOptions.middleware;return d.provideTypeDefinition?d.provideTypeDefinition(r,i,s,f):f(r,i,s)}};return[yR.languages.registerTypeDefinitionProvider(e.documentSelector,n),n]}};Ai.TypeDefinitionFeature=Na});var Xd=E(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.WorkspaceFoldersFeature=ir.arrayDiff=void 0;var CR=Di(),Mi=require("vscode"),Fa=ge();function La(t,e){if(t!==void 0)return t[e]}function Aa(t,e){return t.filter(n=>e.indexOf(n)<0)}ir.arrayDiff=Aa;var Ma=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return Fa.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let n=Mi.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?e.workspaceFolders=null:e.workspaceFolders=n.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let n=this._client;n.onRequest(Fa.WorkspaceFoldersRequest.type,s=>{let c=()=>{let d=Mi.workspace.workspaceFolders;return d===void 0?null:d.map(R=>this.asProtocol(R))},f=n.clientOptions.middleware.workspace;return f&&f.workspaceFolders?f.workspaceFolders(s,c):c(s)});let r=La(La(La(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=CR.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let n=Aa(this._initialFolders,e),r=Aa(e,this._initialFolders);(r.length>0||n.length>0)&&this.doSendEvent(r,n)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,n){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:n.map(i=>this.asProtocol(i))}};this._client.sendNotification(Fa.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let n=e.id,r=this._client,i=Mi.workspace.onDidChangeWorkspaceFolders(s=>{let c=d=>{this.doSendEvent(d.added,d.removed)},f=r.clientOptions.middleware.workspace;f&&f.didChangeWorkspaceFolders?f.didChangeWorkspaceFolders(s,c):c(s)});this._listeners.set(n,i),this.sendInitialEvent(Mi.workspace.workspaceFolders)}unregister(e){let n=this._listeners.get(e);n!==void 0&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};ir.WorkspaceFoldersFeature=Ma});var Jd=E(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.FoldingRangeFeature=void 0;var Wr=require("vscode"),or=ge(),_R=st();function Vd(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var sr=class extends _R.TextDocumentFeature{constructor(e){super(e,or.FoldingRangeRequest.type)}fillClientCapabilities(e){let n=Vd(Vd(e,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideFoldingRanges:(r,i,s)=>{let c=this._client,f=(v,R,w)=>{let T={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(v)};return c.sendRequest(or.FoldingRangeRequest.type,T,w).then(sr.asFoldingRanges,b=>c.handleFailedRequest(or.FoldingRangeRequest.type,b,null))},d=c.clientOptions.middleware;return d.provideFoldingRanges?d.provideFoldingRanges(r,i,s,f):f(r,i,s)}};return[Wr.languages.registerFoldingRangeProvider(e.documentSelector,n),n]}static asFoldingRangeKind(e){if(e)switch(e){case or.FoldingRangeKind.Comment:return Wr.FoldingRangeKind.Comment;case or.FoldingRangeKind.Imports:return Wr.FoldingRangeKind.Imports;case or.FoldingRangeKind.Region:return Wr.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(n=>new Wr.FoldingRange(n.startLine,n.endLine,sr.asFoldingRangeKind(n.kind))):[]}};ji.FoldingRangeFeature=sr});var Yd=E($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.DeclarationFeature=void 0;var wR=require("vscode"),ja=ge(),TR=st();function Qd(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var $a=class extends TR.TextDocumentFeature{constructor(e){super(e,ja.DeclarationRequest.type)}fillClientCapabilities(e){let n=Qd(Qd(e,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideDeclaration:(r,i,s)=>{let c=this._client,f=(v,R,w)=>c.sendRequest(ja.DeclarationRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(v,R),w).then(c.protocol2CodeConverter.asDeclarationResult,T=>c.handleFailedRequest(ja.DeclarationRequest.type,T,null)),d=c.clientOptions.middleware;return d.provideDeclaration?d.provideDeclaration(r,i,s,f):f(r,i,s)}};return[wR.languages.registerDeclarationProvider(e.documentSelector,n),n]}};$i.DeclarationFeature=$a});var ef=E(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.SelectionRangeFeature=void 0;var SR=require("vscode"),Wa=ge(),bR=st();function Zd(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Ha=class extends bR.TextDocumentFeature{constructor(e){super(e,Wa.SelectionRangeRequest.type)}fillClientCapabilities(e){let n=Zd(Zd(e,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideSelectionRanges:(r,i,s)=>{let c=this._client,f=(v,R,w)=>{let T={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(v),positions:c.code2ProtocolConverter.asPositions(R)};return c.sendRequest(Wa.SelectionRangeRequest.type,T,w).then(b=>c.protocol2CodeConverter.asSelectionRanges(b),b=>c.handleFailedRequest(Wa.SelectionRangeRequest.type,b,null))},d=c.clientOptions.middleware;return d.provideSelectionRanges?d.provideSelectionRanges(r,i,s,f):f(r,i,s)}};return[SR.languages.registerSelectionRangeProvider(e.documentSelector,n),n]}};Wi.SelectionRangeFeature=Ha});var tf=E(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.ProgressFeature=void 0;var PR=ge(),ER=ta();function DR(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Ka=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){DR(e,"window").workDoneProgress=!0}initialize(){let e=this._client,n=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new ER.ProgressPart(this._client,i.token,n))};e.onRequest(PR.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Hi.ProgressFeature=Ka});var rf=E(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.CallHierarchyFeature=void 0;var qR=require("vscode"),Mn=ge(),OR=st();function nf(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var za=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,n,r){let i=this.client,s=this.middleware,c=(f,d,v)=>{let R=i.code2ProtocolConverter.asTextDocumentPositionParams(f,d);return i.sendRequest(Mn.CallHierarchyPrepareRequest.type,R,v).then(w=>i.protocol2CodeConverter.asCallHierarchyItems(w),w=>i.handleFailedRequest(Mn.CallHierarchyPrepareRequest.type,w,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,n,r,c):c(e,n,r)}provideCallHierarchyIncomingCalls(e,n){let r=this.client,i=this.middleware,s=(c,f)=>{let d={item:r.code2ProtocolConverter.asCallHierarchyItem(c)};return r.sendRequest(Mn.CallHierarchyIncomingCallsRequest.type,d,f).then(v=>r.protocol2CodeConverter.asCallHierarchyIncomingCalls(v),v=>r.handleFailedRequest(Mn.CallHierarchyIncomingCallsRequest.type,v,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,n,s):s(e,n)}provideCallHierarchyOutgoingCalls(e,n){let r=this.client,i=this.middleware,s=(c,f)=>{let d={item:r.code2ProtocolConverter.asCallHierarchyItem(c)};return r.sendRequest(Mn.CallHierarchyOutgoingCallsRequest.type,d,f).then(v=>r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(v),v=>r.handleFailedRequest(Mn.CallHierarchyOutgoingCallsRequest.type,v,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,n,s):s(e,n)}},Ua=class extends OR.TextDocumentFeature{constructor(e){super(e,Mn.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=nf(nf(e,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new za(n);return[qR.languages.registerCallHierarchyProvider(e.documentSelector,r),r]}};Ki.CallHierarchyFeature=Ua});var of=E(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.SemanticTokensFeature=void 0;var zi=require("vscode"),xR=st(),J=ge(),kR=an();function Ui(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Ba=class extends xR.TextDocumentFeature{constructor(e){super(e,J.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let n=Ui(Ui(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[J.SemanticTokenTypes.namespace,J.SemanticTokenTypes.type,J.SemanticTokenTypes.class,J.SemanticTokenTypes.enum,J.SemanticTokenTypes.interface,J.SemanticTokenTypes.struct,J.SemanticTokenTypes.typeParameter,J.SemanticTokenTypes.parameter,J.SemanticTokenTypes.variable,J.SemanticTokenTypes.property,J.SemanticTokenTypes.enumMember,J.SemanticTokenTypes.event,J.SemanticTokenTypes.function,J.SemanticTokenTypes.method,J.SemanticTokenTypes.macro,J.SemanticTokenTypes.keyword,J.SemanticTokenTypes.modifier,J.SemanticTokenTypes.comment,J.SemanticTokenTypes.string,J.SemanticTokenTypes.number,J.SemanticTokenTypes.regexp,J.SemanticTokenTypes.operator],n.tokenModifiers=[J.SemanticTokenModifiers.declaration,J.SemanticTokenModifiers.definition,J.SemanticTokenModifiers.readonly,J.SemanticTokenModifiers.static,J.SemanticTokenModifiers.deprecated,J.SemanticTokenModifiers.abstract,J.SemanticTokenModifiers.async,J.SemanticTokenModifiers.modification,J.SemanticTokenModifiers.documentation,J.SemanticTokenModifiers.defaultLibrary],n.formats=[J.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,Ui(Ui(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,n){this._client.onRequest(J.SemanticTokensRefreshRequest.type,async()=>{for(let c of this.getAllProviders())c.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(n,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=kR.boolean(e.full)?e.full:e.full!==void 0,r=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,i=new zi.EventEmitter,s=n?{onDidChangeSemanticTokens:i.event,provideDocumentSemanticTokens:(w,T)=>{let b=this._client,F=b.clientOptions.middleware,N=(z,x)=>{let k={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(z)};return b.sendRequest(J.SemanticTokensRequest.type,k,x).then(O=>b.protocol2CodeConverter.asSemanticTokens(O),O=>b.handleFailedRequest(J.SemanticTokensRequest.type,O,null))};return F.provideDocumentSemanticTokens?F.provideDocumentSemanticTokens(w,T,N):N(w,T)},provideDocumentSemanticTokensEdits:r?(w,T,b)=>{let F=this._client,N=F.clientOptions.middleware,z=(x,k,O)=>{let q={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(x),previousResultId:k};return F.sendRequest(J.SemanticTokensDeltaRequest.type,q,O).then(U=>J.SemanticTokens.is(U)?F.protocol2CodeConverter.asSemanticTokens(U):F.protocol2CodeConverter.asSemanticTokensEdits(U),U=>F.handleFailedRequest(J.SemanticTokensDeltaRequest.type,U,null))};return N.provideDocumentSemanticTokensEdits?N.provideDocumentSemanticTokensEdits(w,T,b,z):z(w,T,b)}:void 0}:void 0,f=e.range===!0?{provideDocumentRangeSemanticTokens:(w,T,b)=>{let F=this._client,N=F.clientOptions.middleware,z=(x,k,O)=>{let q={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(x),range:F.code2ProtocolConverter.asRange(k)};return F.sendRequest(J.SemanticTokensRangeRequest.type,q,O).then(U=>F.protocol2CodeConverter.asSemanticTokens(U),U=>F.handleFailedRequest(J.SemanticTokensRangeRequest.type,U,null))};return N.provideDocumentRangeSemanticTokens?N.provideDocumentRangeSemanticTokens(w,T,b,z):z(w,T,b)}}:void 0,d=[],R=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return s!==void 0&&d.push(zi.languages.registerDocumentSemanticTokensProvider(e.documentSelector,s,R)),f!==void 0&&d.push(zi.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,f,R)),[new zi.Disposable(()=>d.forEach(w=>w.dispose())),{range:f,full:s,onDidChangeSemanticTokensEmitter:i}]}};Bi.SemanticTokensFeature=Ba});var af=E((jw,sf)=>{sf.exports=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);IR(i)?n.push.apply(n,i):n.push(i)}return n};var IR=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var ff=E(($w,df)=>{"use strict";df.exports=uf;function uf(t,e,n){t instanceof RegExp&&(t=cf(t,n)),e instanceof RegExp&&(e=cf(e,n));var r=lf(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function cf(t,e){var n=e.match(t);return n?n[0]:null}uf.range=lf;function lf(t,e,n){var r,i,s,c,f,d=n.indexOf(t),v=n.indexOf(e,d+1),R=d;if(d>=0&&v>0){if(t===e)return[d,v];for(r=[],s=n.length;R>=0&&!f;)R==d?(r.push(R),d=n.indexOf(t,R+1)):r.length==1?f=[r.pop(),v]:(i=r.pop(),i<s&&(s=i,c=v),v=n.indexOf(e,R+1)),R=d<v&&d>=0?d:v;r.length&&(f=[s,c])}return f}});var Cf=E((Ww,Rf)=>{var NR=af(),hf=ff();Rf.exports=AR;var pf="\0SLASH"+Math.random()+"\0",gf="\0OPEN"+Math.random()+"\0",Xa="\0CLOSE"+Math.random()+"\0",mf="\0COMMA"+Math.random()+"\0",vf="\0PERIOD"+Math.random()+"\0";function Ga(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function FR(t){return t.split("\\\\").join(pf).split("\\{").join(gf).split("\\}").join(Xa).split("\\,").join(mf).split("\\.").join(vf)}function LR(t){return t.split(pf).join("\\").split(gf).join("{").split(Xa).join("}").split(mf).join(",").split(vf).join(".")}function yf(t){if(!t)return[""];var e=[],n=hf("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,c=r.split(",");c[c.length-1]+="{"+i+"}";var f=yf(s);return s.length&&(c[c.length-1]+=f.shift(),c.push.apply(c,f)),e.push.apply(e,c),e}function AR(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),ar(FR(t),!0).map(LR)):[]}function MR(t){return"{"+t+"}"}function jR(t){return/^-?0\d/.test(t)}function $R(t,e){return t<=e}function WR(t,e){return t>=e}function ar(t,e){var n=[],r=hf("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),c=i||s,f=r.body.indexOf(",")>=0;if(!c&&!f)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+Xa+r.post,ar(t)):[t];var d;if(c)d=r.body.split(/\.\./);else if(d=yf(r.body),d.length===1&&(d=ar(d[0],!1).map(MR),d.length===1)){var R=r.post.length?ar(r.post,!1):[""];return R.map(function(ke){return r.pre+d[0]+ke})}var v=r.pre,R=r.post.length?ar(r.post,!1):[""],w;if(c){var T=Ga(d[0]),b=Ga(d[1]),F=Math.max(d[0].length,d[1].length),N=d.length==3?Math.abs(Ga(d[2])):1,z=$R,x=b<T;x&&(N*=-1,z=WR);var k=d.some(jR);w=[];for(var O=T;z(O,b);O+=N){var q;if(s)q=String.fromCharCode(O),q==="\\"&&(q="");else if(q=String(O),k){var U=F-q.length;if(U>0){var Te=new Array(U+1).join("0");O<0?q="-"+Te+q.slice(1):q=Te+q}}w.push(q)}}else w=NR(d,function(xe){return ar(xe,!1)});for(var De=0;De<w.length;De++)for(var qe=0;qe<R.length;qe++){var me=v+w[De]+R[qe];(!e||c||me)&&n.push(me)}return n}});var Pf=E((Hw,bf)=>{bf.exports=at;at.Minimatch=$e;var Hr=function(){try{return require("path")}catch{}}()||{sep:"/"};at.sep=Hr.sep;var Qa=at.GLOBSTAR=$e.GLOBSTAR={},HR=Cf(),_f={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Va="[^/]",Ja=Va+"*?",KR="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",zR="(?:(?!(?:\\/|^)\\.).)*?",wf=UR("().*{}+?[]^$\\!");function UR(t){return t.split("").reduce(function(e,n){return e[n]=!0,e},{})}var Tf=/\/+/;at.filter=BR;function BR(t,e){return e=e||{},function(n,r,i){return at(n,t,e)}}function hn(t,e){e=e||{};var n={};return Object.keys(t).forEach(function(r){n[r]=t[r]}),Object.keys(e).forEach(function(r){n[r]=e[r]}),n}at.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return at;var e=at,n=function(i,s,c){return e(i,s,hn(t,c))};return n.Minimatch=function(i,s){return new e.Minimatch(i,hn(t,s))},n.Minimatch.defaults=function(i){return e.defaults(hn(t,i)).Minimatch},n.filter=function(i,s){return e.filter(i,hn(t,s))},n.defaults=function(i){return e.defaults(hn(t,i))},n.makeRe=function(i,s){return e.makeRe(i,hn(t,s))},n.braceExpand=function(i,s){return e.braceExpand(i,hn(t,s))},n.match=function(r,i,s){return e.match(r,i,hn(t,s))},n};$e.defaults=function(t){return at.defaults(t).Minimatch};function at(t,e,n){return Xi(e),n||(n={}),!n.nocomment&&e.charAt(0)==="#"?!1:new $e(e,n).match(t)}function $e(t,e){if(!(this instanceof $e))return new $e(t,e);Xi(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&Hr.sep!=="/"&&(t=t.split(Hr.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}$e.prototype.debug=function(){};$e.prototype.make=GR;function GR(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map(function(r){return r.split(Tf)}),this.debug(this.pattern,n),n=n.map(function(r,i,s){return r.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}$e.prototype.parseNegate=XR;function XR(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}at.braceExpand=function(t,e){return Sf(t,e)};$e.prototype.braceExpand=Sf;function Sf(t,e){return e||(this instanceof $e?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,Xi(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:HR(t)}var VR=1024*64,Xi=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>VR)throw new TypeError("pattern is too long")};$e.prototype.parse=JR;var Gi={};function JR(t,e){Xi(t);var n=this.options;if(t==="**")if(n.noglobstar)t="*";else return Qa;if(t==="")return"";var r="",i=!!n.nocase,s=!1,c=[],f=[],d,v=!1,R=-1,w=-1,T=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=this;function F(){if(d){switch(d){case"*":r+=Ja,i=!0;break;case"?":r+=Va,i=!0;break;default:r+="\\"+d;break}b.debug("clearStateChar %j %j",d,r),d=!1}}for(var N=0,z=t.length,x;N<z&&(x=t.charAt(N));N++){if(this.debug("%s	%s %s %j",t,N,r,x),s&&wf[x]){r+="\\"+x,s=!1;continue}switch(x){case"/":return!1;case"\\":F(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,N,r,x),v){this.debug("  in class"),x==="!"&&N===w+1&&(x="^"),r+=x;continue}b.debug("call clearStateChar %j",d),F(),d=x,n.noext&&F();continue;case"(":if(v){r+="(";continue}if(!d){r+="\\(";continue}c.push({type:d,start:N-1,reStart:r.length,open:_f[d].open,close:_f[d].close}),r+=d==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",d,r),d=!1;continue;case")":if(v||!c.length){r+="\\)";continue}F(),i=!0;var k=c.pop();r+=k.close,k.type==="!"&&f.push(k),k.reEnd=r.length;continue;case"|":if(v||!c.length||s){r+="\\|",s=!1;continue}F(),r+="|";continue;case"[":if(F(),v){r+="\\"+x;continue}v=!0,w=N,R=r.length,r+=x;continue;case"]":if(N===w+1||!v){r+="\\"+x,s=!1;continue}var O=t.substring(w+1,N);try{RegExp("["+O+"]")}catch{var q=this.parse(O,Gi);r=r.substr(0,R)+"\\["+q[0]+"\\]",i=i||q[1],v=!1;continue}i=!0,v=!1,r+=x;continue;default:F(),s?s=!1:wf[x]&&!(x==="^"&&v)&&(r+="\\"),r+=x}}for(v&&(O=t.substr(w+1),q=this.parse(O,Gi),r=r.substr(0,R)+"\\["+q[0],i=i||q[1]),k=c.pop();k;k=c.pop()){var U=r.slice(k.reStart+k.open.length);this.debug("setting tail",r,k),U=U.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(it,ct,_t){return _t||(_t="\\"),ct+ct+_t+"|"}),this.debug(`tail=%j
   %s`,U,U,k,r);var Te=k.type==="*"?Ja:k.type==="?"?Va:"\\"+k.type;i=!0,r=r.slice(0,k.reStart)+Te+"\\("+U}F(),s&&(r+="\\\\");var De=!1;switch(r.charAt(0)){case"[":case".":case"(":De=!0}for(var qe=f.length-1;qe>-1;qe--){var me=f[qe],xe=r.slice(0,me.reStart),ke=r.slice(me.reStart,me.reEnd-8),Ze=r.slice(me.reEnd-8,me.reEnd),Ge=r.slice(me.reEnd);Ze+=Ge;var et=xe.split("(").length-1,Xe=Ge;for(N=0;N<et;N++)Xe=Xe.replace(/\)[+*?]?/,"");Ge=Xe;var Rt="";Ge===""&&e!==Gi&&(Rt="$");var le=xe+ke+Ge+Rt+Ze;r=le}if(r!==""&&i&&(r="(?=.)"+r),De&&(r=T+r),e===Gi)return[r,i];if(!i)return YR(t);var Ct=n.nocase?"i":"";try{var Oe=new RegExp("^"+r+"$",Ct)}catch{return new RegExp("$.")}return Oe._glob=t,Oe._src=r,Oe}at.makeRe=function(t,e){return new $e(t,e||{}).makeRe()};$e.prototype.makeRe=QR;function QR(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?Ja:e.dot?KR:zR,r=e.nocase?"i":"",i=t.map(function(s){return s.map(function(c){return c===Qa?n:typeof c=="string"?ZR(c):c._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}at.match=function(t,e,n){n=n||{};var r=new $e(e,n);return t=t.filter(function(i){return r.match(i)}),r.options.nonull&&!t.length&&t.push(e),t};$e.prototype.match=function(e,n){if(typeof n>"u"&&(n=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;var r=this.options;Hr.sep!=="/"&&(e=e.split(Hr.sep).join("/")),e=e.split(Tf),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s,c;for(c=e.length-1;c>=0&&(s=e[c],!s);c--);for(c=0;c<i.length;c++){var f=i[c],d=e;r.matchBase&&f.length===1&&(d=[s]);var v=this.matchOne(d,f,n);if(v)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate};$e.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,c=t.length,f=e.length;i<c&&s<f;i++,s++){this.debug("matchOne loop");var d=e[s],v=t[i];if(this.debug(e,d,v),d===!1)return!1;if(d===Qa){this.debug("GLOBSTAR",[e,d,v]);var R=i,w=s+1;if(w===f){for(this.debug("** at the end");i<c;i++)if(t[i]==="."||t[i]===".."||!r.dot&&t[i].charAt(0)===".")return!1;return!0}for(;R<c;){var T=t[R];if(this.debug(`
globstar while`,t,R,e,w,T),this.matchOne(t.slice(R),e.slice(w),n))return this.debug("globstar found match!",R,c,T),!0;if(T==="."||T===".."||!r.dot&&T.charAt(0)==="."){this.debug("dot detected!",t,R,e,w);break}this.debug("globstar swallow a segment, and continue"),R++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,R,e,w),R===c))}var b;if(typeof d=="string"?(b=v===d,this.debug("string match",d,v,b)):(b=v.match(d),this.debug("pattern match",d,v,b)),!b)return!1}if(i===c&&s===f)return!0;if(i===c)return n;if(s===f)return i===c-1&&t[i]==="";throw new Error("wtf?")};function YR(t){return t.replace(/\\(.)/g,"$1")}function ZR(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var qf=E(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.WillDeleteFilesFeature=rt.WillRenameFilesFeature=rt.WillCreateFilesFeature=rt.DidDeleteFilesFeature=rt.DidRenameFilesFeature=rt.DidCreateFilesFeature=void 0;var Nt=require("vscode"),eC=Pf(),Gt=ge(),tC=Di();function Ef(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function nC(t,e){return t[e]}function Df(t,e,n){t[e]=n}var pn=class{constructor(e,n,r,i,s){this._filters=new Map,this._client=e,this._event=n,this._registrationType=r,this._clientCapability=i,this._serverCapability=s}get registrationType(){return this._registrationType}fillClientCapabilities(e){let n=Ef(Ef(e,"workspace"),"fileOperations");Df(n,"dynamicRegistration",!0),Df(n,this._clientCapability,!0)}initialize(e){var n;let r=(n=e.workspace)===null||n===void 0?void 0:n.fileOperations,i=r!==void 0?nC(r,this._serverCapability):void 0;if((i==null?void 0:i.filters)!==void 0)try{this.register({id:tC.generateUuid(),registerOptions:{filters:i.filters}})}catch(s){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${s}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let n=e.registerOptions.filters.map(r=>{let i=new eC.Minimatch(r.pattern.glob,pn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,n)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(e,n){let r=await Promise.all(e.files.map(async s=>{let c=n(s),f=c.fsPath.replace(/\\/g,"/");for(let d of this._filters.values())for(let v of d)if(!(v.scheme!==void 0&&v.scheme!==c.scheme)){if(v.matcher.match(f)){if(v.kind===void 0)return!0;let R=await pn.getFileType(c);if(R===void 0)return this._client.error(`Failed to determine file type for ${c.toString()}.`),!0;if(R===Nt.FileType.File&&v.kind===Gt.FileOperationPatternKind.file||R===Nt.FileType.Directory&&v.kind===Gt.FileOperationPatternKind.folder)return!0}else if(v.kind===Gt.FileOperationPatternKind.folder&&await pn.getFileType(c)===Nt.FileType.Directory&&v.matcher.match(`${f}/`))return!0}return!1})),i=e.files.filter((s,c)=>r[c]);return Object.assign(Object.assign({},e),{files:i})}static async getFileType(e){try{return(await Nt.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},Kr=class extends pn{constructor(e,n,r,i,s,c,f){super(e,n,r,i,s),this._notificationType=r,this._accessUri=c,this._createParams=f}async send(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=async i=>{this._client.sendNotification(this._notificationType,this._createParams(i))};this.doSend(n,r)}}},Ya=class extends Kr{constructor(e){super(e,Nt.workspace.onDidCreateFiles,Gt.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return i!=null&&i.didCreateFiles?i.didCreateFiles(e,n):n(e)}};rt.DidCreateFilesFeature=Ya;var Za=class extends Kr{constructor(e){super(e,Nt.workspace.onDidRenameFiles,Gt.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return i!=null&&i.didRenameFiles?i.didRenameFiles(e,n):n(e)}};rt.DidRenameFilesFeature=Za;var ec=class extends Kr{constructor(e){super(e,Nt.workspace.onDidDeleteFiles,Gt.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,e.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return i!=null&&i.didDeleteFiles?i.didDeleteFiles(e,n):n(e)}};rt.DidDeleteFilesFeature=ec;var zr=class extends pn{constructor(e,n,r,i,s,c,f){super(e,n,r,i,s),this._requestType=r,this._accessUri=c,this._createParams=f}async send(e){let n=this.waitUntil(e);e.waitUntil(n)}async waitUntil(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,r)}else return}},tc=class extends zr{constructor(e){super(e,Nt.workspace.onWillCreateFiles,Gt.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return i!=null&&i.willCreateFiles?i.willCreateFiles(e,n):n(e)}};rt.WillCreateFilesFeature=tc;var nc=class extends zr{constructor(e){super(e,Nt.workspace.onWillRenameFiles,Gt.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return i!=null&&i.willRenameFiles?i.willRenameFiles(e,n):n(e)}};rt.WillRenameFilesFeature=nc;var rc=class extends zr{constructor(e){super(e,Nt.workspace.onWillDeleteFiles,Gt.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return i!=null&&i.willDeleteFiles?i.willDeleteFiles(e,n):n(e)}};rt.WillDeleteFilesFeature=rc});var xf=E(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.LinkedEditingFeature=void 0;var rC=require("vscode"),ic=ge(),iC=st();function Of(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var oc=class extends iC.TextDocumentFeature{constructor(e){super(e,ic.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let n=Of(Of(e,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideLinkedEditingRanges:(r,i,s)=>{let c=this._client,f=(v,R,w)=>c.sendRequest(ic.LinkedEditingRangeRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(v,R),w).then(c.protocol2CodeConverter.asLinkedEditingRanges,T=>c.handleFailedRequest(ic.LinkedEditingRangeRequest.type,T,null)),d=c.clientOptions.middleware;return d.provideLinkedEditingRange?d.provideLinkedEditingRange(r,i,s,f):f(r,i,s)}};return[rC.languages.registerLinkedEditingRangeProvider(e.documentSelector,n),n]}};Vi.LinkedEditingFeature=oc});var ac=E(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.ProposedFeatures=jn.CommonLanguageClient=void 0;var oC=st(),sC=zd(),aC=Is(),cC=Bd(),uC=Gd(),lC=Xd(),dC=Jd(),fC=Yd(),hC=ef(),pC=tf(),gC=rf(),mC=of(),cr=qf(),vC=xf(),sc=class extends oC.BaseLanguageClient{constructor(e,n,r){super(e,n,r)}registerProposedFeatures(){this.registerFeatures(kf.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new aC.ConfigurationFeature(this)),this.registerFeature(new uC.TypeDefinitionFeature(this)),this.registerFeature(new cC.ImplementationFeature(this)),this.registerFeature(new sC.ColorProviderFeature(this)),this.registerFeature(new lC.WorkspaceFoldersFeature(this)),this.registerFeature(new dC.FoldingRangeFeature(this)),this.registerFeature(new fC.DeclarationFeature(this)),this.registerFeature(new hC.SelectionRangeFeature(this)),this.registerFeature(new pC.ProgressFeature(this)),this.registerFeature(new gC.CallHierarchyFeature(this)),this.registerFeature(new mC.SemanticTokensFeature(this)),this.registerFeature(new vC.LinkedEditingFeature(this)),this.registerFeature(new cr.DidCreateFilesFeature(this)),this.registerFeature(new cr.DidRenameFilesFeature(this)),this.registerFeature(new cr.DidDeleteFilesFeature(this)),this.registerFeature(new cr.WillCreateFilesFeature(this)),this.registerFeature(new cr.WillRenameFilesFeature(this)),this.registerFeature(new cr.WillDeleteFilesFeature(this))}};jn.CommonLanguageClient=sc;var kf;(function(t){function e(n){return[]}t.createAll=e})(kf=jn.ProposedFeatures||(jn.ProposedFeatures={}))});var Nf=E(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.terminate=void 0;var If=require("child_process"),yC=require("path"),RC=process.platform==="win32",CC=process.platform==="darwin",_C=process.platform==="linux";function wC(t,e){if(RC)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),If.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(_C||CC)try{var n=yC.join(__dirname,"terminateProcess.sh"),r=If.spawnSync(n,[t.pid.toString()]);return!r.error}catch{return!1}else return t.kill("SIGKILL"),!0}Ji.terminate=wC});var cc=E((Gw,Ff)=>{"use strict";Ff.exports=ge()});var Lf=E(Xt=>{"use strict";var TC=Xt&&Xt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),uc=Xt&&Xt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&TC(e,t,n)};Object.defineProperty(Xt,"__esModule",{value:!0});uc(ge(),Xt);uc(st(),Xt);uc(ac(),Xt)});var $f=E(Ye=>{"use strict";var SC=Ye&&Ye.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),jf=Ye&&Ye.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&SC(e,t,n)};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.SettingMonitor=Ye.LanguageClient=Ye.TransportKind=void 0;var $n=require("child_process"),lc=require("fs"),dc=require("path"),Af=Cl(),gn=require("vscode"),Ee=an(),bC=ac(),PC=st(),EC=Nf(),Pe=cc();jf(cc(),Ye);jf(Lf(),Ye);var Mf="^1.52.0",fc;(function(t){function e(n){return Ee.string(n.command)}t.is=e})(fc||(fc={}));var We;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(We=Ye.TransportKind||(Ye.TransportKind={}));var ur;(function(t){function e(n){let r=n;return r&&r.kind===We.socket&&Ee.number(r.port)}t.isSocket=e})(ur||(ur={}));var hc;(function(t){function e(n){return Ee.string(n.module)}t.is=e})(hc||(hc={}));var pc;(function(t){function e(n){let r=n;return r&&r.writer!==void 0&&r.reader!==void 0}t.is=e})(pc||(pc={}));var gc;(function(t){function e(n){let r=n;return r&&r.process!==void 0&&typeof r.detached=="boolean"}t.is=e})(gc||(gc={}));var mc=class extends bC.CommonLanguageClient{constructor(e,n,r,i,s){let c,f,d,v,R;Ee.string(n)?(c=e,f=n,d=r,v=i,R=!!s):(c=e.toLowerCase(),f=e,d=n,v=r,R=i),R===void 0&&(R=!1),super(c,f,v),this._serverOptions=d,this._forceDebug=R;try{this.checkVersion()}catch(w){throw Ee.string(w.message)&&this.outputChannel.appendLine(w.message),w}}checkVersion(){let e=Af.parse(gn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${gn.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!Af.satisfies(e,Mf))throw new Error(`The language client requires VS Code version ${Mf} but received version ${gn.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){e&&setTimeout(()=>{try{process.kill(e.pid,0),EC.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function n(R,w){if(!R&&!w)return;let T=Object.create(null);return Object.keys(process.env).forEach(b=>T[b]=process.env[b]),w&&(T.ELECTRON_RUN_AS_NODE="1",T.ELECTRON_NO_ASAR="1"),R&&Object.keys(R).forEach(b=>T[b]=R[b]),T}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let R=process.execArgv;return R?R.some(w=>r.some(T=>w.startsWith(T))||i.some(T=>w===T)):!1}function c(R){if(R.stdin===null||R.stdout===null||R.stderr===null)throw new Error("Process created without stdio streams")}let f=this._serverOptions;if(Ee.func(f))return f().then(R=>{if(PC.MessageTransports.is(R))return this._isDetached=!!R.detached,R;if(pc.is(R))return this._isDetached=!!R.detached,{reader:new Pe.StreamMessageReader(R.reader),writer:new Pe.StreamMessageWriter(R.writer)};{let w;return gc.is(R)?(w=R.process,this._isDetached=R.detached):(w=R,this._isDetached=!1),w.stderr.on("data",T=>this.outputChannel.append(Ee.string(T)?T:T.toString(e))),{reader:new Pe.StreamMessageReader(w.stdout),writer:new Pe.StreamMessageWriter(w.stdin)}}});let d,v=f;return v.run||v.debug?this._forceDebug||s()?d=v.debug:d=v.run:d=f,this._getServerWorkingDir(d.options).then(R=>{if(hc.is(d)&&d.module){let w=d,T=w.transport||We.stdio;if(w.runtime){let b=[],F=w.options||Object.create(null);F.execArgv&&F.execArgv.forEach(k=>b.push(k)),b.push(w.module),w.args&&w.args.forEach(k=>b.push(k));let N=Object.create(null);N.cwd=R,N.env=n(F.env,!1);let z=this._getRuntimePath(w.runtime,R),x;if(T===We.ipc?(N.stdio=[null,null,null,"ipc"],b.push("--node-ipc")):T===We.stdio?b.push("--stdio"):T===We.pipe?(x=Pe.generateRandomPipeName(),b.push(`--pipe=${x}`)):ur.isSocket(T)&&b.push(`--socket=${T.port}`),b.push(`--clientProcessId=${process.pid.toString()}`),T===We.ipc||T===We.stdio){let k=$n.spawn(z,b,N);return!k||!k.pid?Promise.reject(`Launching server using runtime ${z} failed.`):(this._serverProcess=k,k.stderr.on("data",O=>this.outputChannel.append(Ee.string(O)?O:O.toString(e))),T===We.ipc?(k.stdout.on("data",O=>this.outputChannel.append(Ee.string(O)?O:O.toString(e))),Promise.resolve({reader:new Pe.IPCMessageReader(k),writer:new Pe.IPCMessageWriter(k)})):Promise.resolve({reader:new Pe.StreamMessageReader(k.stdout),writer:new Pe.StreamMessageWriter(k.stdin)}))}else{if(T===We.pipe)return Pe.createClientPipeTransport(x).then(k=>{let O=$n.spawn(z,b,N);return!O||!O.pid?Promise.reject(`Launching server using runtime ${z} failed.`):(this._serverProcess=O,O.stderr.on("data",q=>this.outputChannel.append(Ee.string(q)?q:q.toString(e))),O.stdout.on("data",q=>this.outputChannel.append(Ee.string(q)?q:q.toString(e))),k.onConnected().then(q=>({reader:q[0],writer:q[1]})))});if(ur.isSocket(T))return Pe.createClientSocketTransport(T.port).then(k=>{let O=$n.spawn(z,b,N);return!O||!O.pid?Promise.reject(`Launching server using runtime ${z} failed.`):(this._serverProcess=O,O.stderr.on("data",q=>this.outputChannel.append(Ee.string(q)?q:q.toString(e))),O.stdout.on("data",q=>this.outputChannel.append(Ee.string(q)?q:q.toString(e))),k.onConnected().then(q=>({reader:q[0],writer:q[1]})))})}}else{let b;return new Promise((F,N)=>{let z=w.args&&w.args.slice()||[];T===We.ipc?z.push("--node-ipc"):T===We.stdio?z.push("--stdio"):T===We.pipe?(b=Pe.generateRandomPipeName(),z.push(`--pipe=${b}`)):ur.isSocket(T)&&z.push(`--socket=${T.port}`),z.push(`--clientProcessId=${process.pid.toString()}`);let x=w.options||Object.create(null);if(x.env=n(x.env,!0),x.execArgv=x.execArgv||[],x.cwd=R,x.silent=!0,T===We.ipc||T===We.stdio){let k=$n.fork(w.module,z||[],x);c(k),this._serverProcess=k,k.stderr.on("data",O=>this.outputChannel.append(Ee.string(O)?O:O.toString(e))),T===We.ipc?(k.stdout.on("data",O=>this.outputChannel.append(Ee.string(O)?O:O.toString(e))),F({reader:new Pe.IPCMessageReader(this._serverProcess),writer:new Pe.IPCMessageWriter(this._serverProcess)})):F({reader:new Pe.StreamMessageReader(k.stdout),writer:new Pe.StreamMessageWriter(k.stdin)})}else T===We.pipe?Pe.createClientPipeTransport(b).then(k=>{let O=$n.fork(w.module,z||[],x);c(O),this._serverProcess=O,O.stderr.on("data",q=>this.outputChannel.append(Ee.string(q)?q:q.toString(e))),O.stdout.on("data",q=>this.outputChannel.append(Ee.string(q)?q:q.toString(e))),k.onConnected().then(q=>{F({reader:q[0],writer:q[1]})})}):ur.isSocket(T)&&Pe.createClientSocketTransport(T.port).then(k=>{let O=$n.fork(w.module,z||[],x);c(O),this._serverProcess=O,O.stderr.on("data",q=>this.outputChannel.append(Ee.string(q)?q:q.toString(e))),O.stdout.on("data",q=>this.outputChannel.append(Ee.string(q)?q:q.toString(e))),k.onConnected().then(q=>{F({reader:q[0],writer:q[1]})})})})}}else if(fc.is(d)&&d.command){let w=d,T=w.args||[],b=Object.assign({},w.options);b.cwd=b.cwd||R;let F=$n.spawn(w.command,T,b);return!F||!F.pid?Promise.reject(`Launching server using command ${w.command} failed.`):(F.stderr.on("data",N=>this.outputChannel.append(Ee.string(N)?N:N.toString(e))),this._serverProcess=F,this._isDetached=!!b.detached,Promise.resolve({reader:new Pe.StreamMessageReader(F.stdout),writer:new Pe.StreamMessageWriter(F.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(f,null,4)))})}_getRuntimePath(e,n){if(dc.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=dc.join(r,e);if(lc.existsSync(i))return i}if(n!==void 0){let i=dc.join(n,e);if(lc.existsSync(i))return i}return e}_mainGetRootPath(){let e=gn.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}_getServerWorkingDir(e){let n=e&&e.cwd;return n||(n=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),n?new Promise(r=>{lc.lstat(n,(i,s)=>{r(!i&&s.isDirectory()?n:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let n;try{n=JSON.parse(e)}catch{}return n===void 0||typeof n.locale!="string"?"en":n.locale}};Ye.LanguageClient=mc;var vc=class{constructor(e,n){this._client=e,this._setting=n,this._listeners=[]}start(){return gn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new gn.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),n=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?gn.workspace.getConfiguration(n).get(r,!1):gn.workspace.getConfiguration(n);i&&this._client.needsStart()?this._client.start():!i&&this._client.needsStop()&&this._client.stop()}};Ye.SettingMonitor=vc});var Hf=E((Jw,Wf)=>{"use strict";Wf.exports=$f()});var zf=E((Qw,Kf)=>{"use strict";Kf.exports=function(e){return e.map(function(n){return n&&typeof n=="object"?n.op.replace(/(.)/g,"\\$1"):/["\s]/.test(n)&&!/'/.test(n)?"'"+n.replace(/(['\\])/g,"\\$1")+"'":/["'\s]/.test(n)?'"'+n.replace(/(["\\$`!])/g,"\\$1")+'"':String(n).replace(/([A-Za-z]:)?([#!"$&'()*,:;<=>?@[\\\]^`{|}])/g,"$1\\$2")}).join(" ")}});var Gf=E((Yw,Bf)=>{"use strict";var yc="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(","\\<\\<\\<",">>",">\\&","<\\&","[&;()|<>]"].join("|")+")",Uf="|&;()<> \\t",DC=`(\\\\['"`+Uf+`]|[^\\s'"`+Uf+"])+",qC='"((\\\\"|[^"])*?)"',OC="'((\\\\'|[^'])*?)'",Wn="";for(Rc=0;Rc<4;Rc++)Wn+=(Math.pow(16,8)*Math.random()).toString(16);var Rc;function xC(t,e,n){var r=new RegExp(["("+yc+")","("+DC+"|"+qC+"|"+OC+")*"].join("|"),"g"),i=t.match(r).filter(Boolean);if(!i)return[];e||(e={}),n||(n={});var s=!1;function c(f,d,v){var R=typeof e=="function"?e(v):e[v];return R===void 0&&v!=""?R="":R===void 0&&(R="$"),typeof R=="object"?d+Wn+JSON.stringify(R)+Wn:d+R}return i.map(function(f,d){if(s)return;if(RegExp("^"+yc+"$").test(f))return{op:f};var v="'",R='"',w="$",T=n.escape||"\\",b=!1,F=!1,N="",z=!1,x;function k(){x+=1;var q,U;if(f.charAt(x)==="{"){if(x+=1,f.charAt(x)==="}")throw new Error("Bad substitution: "+f.substr(x-2,3));if(q=f.indexOf("}",x),q<0)throw new Error("Bad substitution: "+f.substr(x));U=f.substr(x,q-x),x=q}else/[*@#?$!_-]/.test(f.charAt(x))?(U=f.charAt(x),x+=1):(q=f.substr(x).match(/[^\w\d_]/),q?(U=f.substr(x,q.index),x+=q.index-1):(U=f.substr(x),x=f.length));return c(null,"",U)}for(x=0;x<f.length;x++){var O=f.charAt(x);if(z=z||!b&&(O==="*"||O==="?"),F)N+=O,F=!1;else if(b)O===b?b=!1:b==v?N+=O:O===T?(x+=1,O=f.charAt(x),O===R||O===T||O===w?N+=O:N+=T+O):O===w?N+=k():N+=O;else if(O===R||O===v)b=O;else{if(RegExp("^"+yc+"$").test(O))return{op:f};if(/^#$/.test(O))return s=!0,N.length?[N,{comment:f.slice(x+1)+i.slice(d+1).join(" ")}]:[{comment:f.slice(x+1)+i.slice(d+1).join(" ")}];O===T?F=!0:O===w?N+=k():N+=O}}return z?{op:"glob",pattern:N}:N}).reduce(function(f,d){return d===void 0?f:f.concat(d)},[])}Bf.exports=function(e,n,r){var i=xC(e,n,r);return typeof n!="function"?i:i.reduce(function(s,c){if(typeof c=="object")return s.concat(c);var f=c.split(RegExp("("+Wn+".*?"+Wn+")","g"));return f.length===1?s.concat(f[0]):s.concat(f.filter(Boolean).map(function(d){return RegExp("^"+Wn).test(d)?JSON.parse(d.split(Wn)[1]):d}))},[])}});var Xf=E(Cc=>{"use strict";Cc.quote=zf();Cc.parse=Gf()});var MC={};yh(MC,{activate:()=>AC,deactivate:()=>NC});module.exports=Rh(MC);var Be=on(require("vscode")),uh=on(Hf()),mn=on(require("os"));var Br=on(require("vscode"));var wc=on(Xf()),Vt=on(require("vscode"));var Ue=on(require("vscode")),Qi=()=>process.platform==="win32",Yi=()=>Ue.env.shell.endsWith("cmd.exe"),Zi=()=>["powershell.exe","pwsh.exe","pwsh"].some(t=>Ue.env.shell.endsWith(t)),Vf=()=>["powershell.exe"].some(t=>Ue.env.shell.endsWith(t));function eo(t,e){return/\s/.test(t)&&(Yi()?t=`"${t}"`:Zi()&&e?t=`& '${t}'`:t=`'${t}'`),t}function kC(t){return Qi()?t.replace(/\\/g,"/"):t}function Jf(t){let e=Ue.workspace.getConfiguration("magicRacket.languageServer").get("command"),n=Ue.workspace.getConfiguration("magicRacket.languageServer").get("arguments");e!==void 0&&e!==""&&n!==void 0?t(e,n):Ue.window.showErrorMessage("Invalid command for launching the language server. Please set the command in settings.")}function Qf(t){let e=Ue.workspace.getConfiguration("magicRacket.general").get("racketPath");e!==void 0&&e!==""?t([e]):Ue.window.showErrorMessage("Please configure the path to the Racket executable in settings.")}function to(t){let e=Ue.workspace.getConfiguration("magicRacket.general").get("racketPath"),n=Ue.workspace.getConfiguration("magicRacket.REPL").get("arguments");e!==void 0&&e!==""&&n!==void 0?t([e,...n]):Ue.window.showErrorMessage("Please configure the path to the Racket executable and the arguments for launching a REPL in settings.")}function _c(t){let e=Ue.window.activeTextEditor;e?t(e):Ue.window.showErrorMessage("A file must be opened before you can do that")}function lr(t){_c(e=>t(kC(e.document.fileName)))}function Yf(t){let e=t.match(/^.*\/([^/]+\.[^/]+)$/);return e?e[1]:(Vt.window.showErrorMessage("Invalid file name."),"")}function Zf(t,e){let n=r=>{let i=r.trim();i&&(t.show(!0),t.sendText(i))};if(e.selections.length===1&&e.selection.isEmpty){n(e.document.lineAt(e.selection.active.line).text);return}e.selections.forEach(r=>n(e.document.getText(r)))}function eh(t,e,n){if(n.show(),Qi()){n.sendText(Zi()||Yi()?"cls":"clear");let r=eo(t[0],!0);e=eo(e,!1),n.sendText(`${r} ${t.slice(1).join(" ")} ${e}`)}else n.sendText("clear"),n.sendText((0,wc.quote)([...t,e]))}function th(t,e){e.show(),e.sendText(`(enter! (file "${t}"))`)}function Tc(t){let e;if(t){let n=Vt.workspace.getConfiguration("magicRacket.outputTerminal").get("outputTerminalTitle"),r=n&&n!==""?n:"Output ($name)";e=Vt.window.createTerminal(r.replace("$name",Yf(t)))}else{let n=Vt.workspace.getConfiguration("magicRacket.outputTerminal").get("sharedOutputTerminalTitle"),r=n&&n!==""?n:"Racket Output";e=Vt.window.createTerminal(r)}return e.show(),e}function no(t,e){let n=Vt.workspace.getConfiguration("magicRacket.REPL").get("title"),r=n&&n!==""?n:"REPL ($name)",i=Vt.window.createTerminal(r.replace("$name",Yf(t)));if(i.show(),Qi()){let c=`${eo(e[0],!0)} ${e.slice(1).join(" ")}`;Yi()?c+=` --eval ^"(enter! (file \\^"${t}\\^"))^"`:Zi()&&Vf()?c+=` --eval '(enter! (file \\"${t}\\"))'`:c+=` --eval '(enter! (file "${t}"))'`,i.sendText(c)}else i.sendText((0,wc.quote)([...e,"--eval",`(enter! (file "${t}"))`]));return i}function Ur(t,e,n){let r=t.get(e);if(r)return r;let i=n();return t.set(e,i),i}function nh(t){var e,n;(n=(e=Br.window.activeTextEditor)==null?void 0:e.document)==null||n.save().then(()=>t())}function rh(t){lr(e=>{Qf(n=>{let r;Br.workspace.getConfiguration("magicRacket.outputTerminal").get("numberOfOutputTerminals")==="one"?r=Ur(t,"one",()=>Tc(null)):r=Ur(t,e,()=>Tc(e)),nh(()=>eh(n,e,r))})})}function ih(t){lr(e=>{to(n=>{let r=!0,i=Ur(t,e,()=>(r=!1,no(e,n)));r&&nh(()=>th(e,i))})})}function oh(t){_c(e=>{lr(n=>{to(r=>{let i=Ur(t,n,()=>no(n,r));Zf(i,e)})})})}function sh(t){lr(e=>{to(n=>{Ur(t,e,()=>no(e,n)).show()})})}function ah(t){lr(e=>{let n=t.get(e);n?n.show():Br.window.showErrorMessage("No output terminal exists for this file")})}var yt=on(require("vscode")),Hn=class{async provideTasks(){return this.getTasks()}resolveTask(){}getTasks(){return[Hn.runTask,Hn.testTask]}},Jt=Hn;Jt.taskType="racket",Jt.testAndRunTask=new yt.Task({type:Hn.taskType},yt.TaskScope.Workspace,"Test and run file","racket",new yt.ShellExecution("${config:magicRacket.general.racketPath}",["${file}"])),Jt.runTask=new yt.Task({type:Hn.taskType},yt.TaskScope.Workspace,"Run file","racket",new yt.ShellExecution("${config:magicRacket.general.racketPath}",["${file}"])),Jt.testTask=new yt.Task({type:Hn.taskType},yt.TaskScope.Workspace,"Test file","racket",new yt.ShellExecution("${config:magicRacket.general.racoPath}",["test","${file}"]));var dr,ro=!1,Sc;function NC(){return Sc&&Sc.dispose(),dr?dr.stop():Promise.reject(new Error("There is no language server client to be deactivated"))}function FC(){let t=Be.window.createOutputChannel("Racket");t.appendLine("Magic Racket environment info"),t.appendLine(""),t.appendLine(`os.arch:            ${mn.arch}`),t.appendLine(`os.platform:        ${mn.platform}`),t.appendLine(`os.release:         ${mn.release}`),t.appendLine(`os.version:         ${mn.version}`),t.appendLine(`process.version:    ${process.version}`),t.appendLine(`vscode.env.appHost: ${Be.env.appHost}`),t.appendLine(`vscode.env.appName: ${Be.env.appName}`),t.appendLine(`vscode.env.shell:   ${Be.env.shell}`)}function LC(){Jf((t,e)=>{let n={command:t,args:e},r={run:n,debug:n},i={documentSelector:[{scheme:"file",language:"racket"}],uriConverters:{code2Protocol:s=>s.toString(!0),protocol2Code:s=>Be.Uri.parse(s)}};dr=new uh.LanguageClient("magicRacket","Racket Language Client",r,i)})}function Gr(t,e){return Be.commands.registerCommand(`magic-racket.${t}`,e)}function ch(){let t=Be.workspace.getConfiguration("magicRacket.languageServer").get("enabled",!0);dr&&(t&&!ro?(dr.start(),ro=!0):!t&&ro&&(dr.stop(),ro=!1))}function AC(t){FC(),LC(),ch();let e=new Map,n=new Map;Be.workspace.onDidChangeConfiguration(ch),Sc=Be.tasks.registerTaskProvider(Jt.taskType,new Jt),Be.window.onDidCloseTerminal(d=>{e.forEach((v,R)=>v===d&&e.delete(R)&&v.dispose()),n.forEach((v,R)=>v===d&&n.delete(R)&&v.dispose())});let r=Gr("loadFileInRepl",()=>ih(n)),i=Gr("runFile",()=>rh(e)),s=Gr("executeSelectionInRepl",()=>oh(n)),c=Gr("openRepl",()=>sh(n)),f=Gr("showOutputTerminal",()=>ah(e));t.subscriptions.push(r,i,s,c,f)}0&&(module.exports={activate,deactivate});
